/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/@easepick/bundle/dist/index.esm.js":
/*!*********************************************************!*\
  !*** ./node_modules/@easepick/bundle/dist/index.esm.js ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "AmpPlugin": () => (/* binding */ d),
/* harmony export */   "DateTime": () => (/* binding */ t),
/* harmony export */   "KbdPlugin": () => (/* binding */ h),
/* harmony export */   "LockPlugin": () => (/* binding */ a),
/* harmony export */   "PresetPlugin": () => (/* binding */ r),
/* harmony export */   "RangePlugin": () => (/* binding */ c),
/* harmony export */   "TimePlugin": () => (/* binding */ l),
/* harmony export */   "create": () => (/* binding */ n),
/* harmony export */   "easepick": () => (/* binding */ s)
/* harmony export */ });
class t extends Date{static parseDateTime(e,i="YYYY-MM-DD",n="en-US"){if(!e)return new Date((new Date).setHours(0,0,0,0));if(e instanceof t)return e.toJSDate();if(e instanceof Date)return e;if(/^-?\d{10,}$/.test(String(e)))return new Date(Number(e));if("string"==typeof e){const s=[];let o=null;for(;null!=(o=t.regex.exec(i));)"\\"!==o[1]&&s.push(o);if(s.length){const i={year:null,month:null,shortMonth:null,longMonth:null,day:null,hour:0,minute:0,second:0,ampm:null,value:""};s[0].index>0&&(i.value+=".*?");for(const[e,o]of Object.entries(s)){const s=Number(e),{group:a,pattern:r}=t.formatPatterns(o[0],n);i[a]=s+1,i.value+=r,i.value+=".*?"}const o=new RegExp(`^${i.value}$`);if(o.test(e)){const s=o.exec(e),a=Number(s[i.year]);let r=null;i.month?r=Number(s[i.month])-1:i.shortMonth?r=t.shortMonths(n).indexOf(s[i.shortMonth]):i.longMonth&&(r=t.longMonths(n).indexOf(s[i.longMonth]));const c=Number(s[i.day])||1,l=Number(s[i.hour]);let h=Number.isNaN(l)?0:l;const d=Number(s[i.minute]),p=Number.isNaN(d)?0:d,u=Number(s[i.second]),g=Number.isNaN(u)?0:u,m=s[i.ampm];return m&&"PM"===m&&(h+=12,24===h&&(h=0)),new Date(a,r,c,h,p,g,0)}}}return new Date((new Date).setHours(0,0,0,0))}static regex=/(\\)?(Y{2,4}|M{1,4}|D{1,2}|H{1,2}|h{1,2}|m{1,2}|s{1,2}|A|a)/g;static MONTH_JS=[0,1,2,3,4,5,6,7,8,9,10,11];static shortMonths(e){return t.MONTH_JS.map((t=>new Date(2019,t).toLocaleString(e,{month:"short"})))}static longMonths(e){return t.MONTH_JS.map((t=>new Date(2019,t).toLocaleString(e,{month:"long"})))}static formatPatterns(e,i){switch(e){case"YY":case"YYYY":return{group:"year",pattern:`(\\d{${e.length}})`};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:`(${t.shortMonths(i).join("|")})`};case"MMMM":return{group:"longMonth",pattern:`(${t.longMonths(i).join("|")})`};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"};case"h":case"H":return{group:"hour",pattern:"(\\d{1,2})"};case"hh":case"HH":return{group:"hour",pattern:"(\\d{2})"};case"m":return{group:"minute",pattern:"(\\d{1,2})"};case"mm":return{group:"minute",pattern:"(\\d{2})"};case"s":return{group:"second",pattern:"(\\d{1,2})"};case"ss":return{group:"second",pattern:"(\\d{2})"};case"a":case"A":return{group:"ampm",pattern:"(AM|PM|am|pm)"}}}lang;constructor(e=null,i="YYYY-MM-DD",n="en-US"){super(t.parseDateTime(e,i,n)),this.lang=n}getWeek(t){const e=new Date(this.midnight_ts(this)),i=(this.getDay()+(7-t))%7;e.setDate(e.getDate()-i);const n=e.getTime();return e.setMonth(0,1),e.getDay()!==t&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((n-e.getTime())/6048e5)}clone(){return new t(this)}toJSDate(){return new Date(this)}inArray(t,e="[]"){return t.some((t=>t instanceof Array?this.isBetween(t[0],t[1],e):this.isSame(t,"day")))}isBetween(t,e,i="()"){switch(i){default:case"()":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(e);case"[)":return this.midnight_ts(this)>=this.midnight_ts(t)&&this.midnight_ts(this)<this.midnight_ts(e);case"(]":return this.midnight_ts(this)>this.midnight_ts(t)&&this.midnight_ts(this)<=this.midnight_ts(e);case"[]":return this.midnight_ts()>=this.midnight_ts(t)&&this.midnight_ts()<=this.midnight_ts(e)}}isBefore(t,e="days"){switch(e){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return t.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")}isSameOrBefore(t,e="days"){switch(e){case"day":case"days":return new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(t.getFullYear(),t.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")}isAfter(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(t.getFullYear(),t.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>t.getFullYear()}throw new Error("isAfter: Invalid unit!")}isSameOrAfter(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")}isSame(t,e="days"){switch(e){case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(t.getFullYear(),t.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")}add(t,e="days"){switch(e){case"day":case"days":this.setDate(this.getDate()+t);break;case"month":case"months":this.setMonth(this.getMonth()+t)}return this}subtract(t,e="days"){switch(e){case"day":case"days":this.setDate(this.getDate()-t);break;case"month":case"months":this.setMonth(this.getMonth()-t)}return this}diff(t,e="days"){switch(e){default:case"day":case"days":return Math.round((this.midnight_ts()-this.midnight_ts(t))/864e5);case"month":case"months":let e=12*(t.getFullYear()-this.getFullYear());return e-=t.getMonth(),e+=this.getMonth(),e}}format(e,i="en-US"){let n="";const s=[];let o=null;for(;null!=(o=t.regex.exec(e));)"\\"!==o[1]&&s.push(o);if(s.length){s[0].index>0&&(n+=e.substring(0,s[0].index));for(const[t,o]of Object.entries(s)){const a=Number(t);n+=this.formatTokens(o[0],i),s[a+1]&&(n+=e.substring(o.index+o[0].length,s[a+1].index)),a===s.length-1&&(n+=e.substring(o.index+o[0].length))}}return n.replace(/\\/g,"")}midnight_ts(t){return t?new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0).getTime():new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()}formatTokens(e,i){switch(e){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return`0${this.getMonth()+1}`.slice(-2);case"MMM":return t.shortMonths(i)[this.getMonth()];case"MMMM":return t.longMonths(i)[this.getMonth()];case"D":return String(this.getDate());case"DD":return`0${this.getDate()}`.slice(-2);case"H":return String(this.getHours());case"HH":return`0${this.getHours()}`.slice(-2);case"h":return String(this.getHours()%12||12);case"hh":return`0${this.getHours()%12||12}`.slice(-2);case"m":return String(this.getMinutes());case"mm":return`0${this.getMinutes()}`.slice(-2);case"s":return String(this.getSeconds());case"ss":return`0${this.getSeconds()}`.slice(-2);case"a":return this.getHours()<12||24===this.getHours()?"am":"pm";case"A":return this.getHours()<12||24===this.getHours()?"AM":"PM";default:return""}}}class e{picker;constructor(t){this.picker=t}render(e,i){e||(e=new t),e.setDate(1),e.setHours(0,0,0,0),"function"==typeof this[`get${i}View`]&&this[`get${i}View`](e)}getContainerView(t){this.picker.ui.container.innerHTML="",this.picker.options.header&&this.picker.trigger("render",{date:t.clone(),view:"Header"}),this.picker.trigger("render",{date:t.clone(),view:"Main"}),this.picker.options.autoApply||this.picker.trigger("render",{date:t.clone(),view:"Footer"})}getHeaderView(t){const e=document.createElement("header");this.picker.options.header instanceof HTMLElement&&e.appendChild(this.picker.options.header),"string"==typeof this.picker.options.header&&(e.innerHTML=this.picker.options.header),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{target:e,date:t.clone(),view:"Header"})}getMainView(t){const e=document.createElement("main");this.picker.ui.container.appendChild(e);const i=document.createElement("div");i.className=`calendars grid-${this.picker.options.grid}`;for(let e=0;e<this.picker.options.calendars;e++){const n=document.createElement("div");n.className="calendar",i.appendChild(n);const s=this.getCalendarHeaderView(t.clone());n.appendChild(s),this.picker.trigger("view",{date:t.clone(),view:"CalendarHeader",index:e,target:s});const o=this.getCalendarDayNamesView();n.appendChild(o),this.picker.trigger("view",{date:t.clone(),view:"CalendarDayNames",index:e,target:o});const a=this.getCalendarDaysView(t.clone());n.appendChild(a),this.picker.trigger("view",{date:t.clone(),view:"CalendarDays",index:e,target:a});const r=this.getCalendarFooterView(this.picker.options.lang,t.clone());n.appendChild(r),this.picker.trigger("view",{date:t.clone(),view:"CalendarFooter",index:e,target:r}),this.picker.trigger("view",{date:t.clone(),view:"CalendarItem",index:e,target:n}),t.add(1,"month")}e.appendChild(i),this.picker.trigger("view",{date:t.clone(),view:"Calendars",target:i}),this.picker.trigger("view",{date:t.clone(),view:"Main",target:e})}getFooterView(t){const e=document.createElement("footer"),i=document.createElement("div");i.className="footer-buttons";const n=document.createElement("button");n.className="cancel-button unit",n.innerHTML=this.picker.options.locale.cancel,i.appendChild(n);const s=document.createElement("button");s.className="apply-button unit",s.innerHTML=this.picker.options.locale.apply,s.disabled=!0,i.appendChild(s),e.appendChild(i),this.picker.ui.container.appendChild(e),this.picker.trigger("view",{date:t,target:e,view:"Footer"})}getCalendarHeaderView(t){const e=document.createElement("div");e.className="header";const i=document.createElement("div");i.className="month-name",i.innerHTML=`<span>${t.toLocaleString(this.picker.options.lang,{month:"long"})}</span> ${t.format("YYYY")}`,e.appendChild(i);const n=document.createElement("button");n.className="previous-button unit",n.innerHTML=this.picker.options.locale.previousMonth,e.appendChild(n);const s=document.createElement("button");return s.className="next-button unit",s.innerHTML=this.picker.options.locale.nextMonth,e.appendChild(s),e}getCalendarDayNamesView(){const t=document.createElement("div");t.className="daynames-row";for(let e=1;e<=7;e++){const i=3+this.picker.options.firstDay+e,n=document.createElement("div");n.className="dayname",n.innerHTML=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"short"}),n.title=new Date(1970,0,i,12,0,0,0).toLocaleString(this.picker.options.lang,{weekday:"long"}),t.appendChild(n),this.picker.trigger("view",{dayIdx:i,view:"CalendarDayName",target:n})}return t}getCalendarDaysView(t){const e=document.createElement("div");e.className="days-grid";const i=this.calcOffsetDays(t,this.picker.options.firstDay),n=32-new Date(t.getFullYear(),t.getMonth(),32).getDate();for(let t=0;t<i;t++){const t=document.createElement("div");t.className="offset",e.appendChild(t)}for(let i=1;i<=n;i++){t.setDate(i);const n=this.getCalendarDayView(t);e.appendChild(n),this.picker.trigger("view",{date:t,view:"CalendarDay",target:n})}return e}getCalendarDayView(e){const i=this.picker.options.date?new t(this.picker.options.date):null,n=new t,s=document.createElement("div");return s.className="day unit",s.innerHTML=e.format("D"),s.dataset.time=String(e.getTime()),e.isSame(n,"day")&&s.classList.add("today"),[0,6].includes(e.getDay())&&s.classList.add("weekend"),this.picker.datePicked.length?this.picker.datePicked[0].isSame(e,"day")&&s.classList.add("selected"):i&&e.isSame(i,"day")&&s.classList.add("selected"),this.picker.trigger("view",{date:e,view:"CalendarDay",target:s}),s}getCalendarFooterView(t,e){const i=document.createElement("div");return i.className="footer",i}calcOffsetDays(t,e){let i=t.getDay()-e;return i<0&&(i+=7),i}}class i{picker;instances={};constructor(t){this.picker=t}initialize(){const t=[];this.picker.options.plugins.forEach((e=>{"function"==typeof e?t.push(new e):"string"==typeof e&&"undefined"!=typeof easepick&&Object.prototype.hasOwnProperty.call(easepick,e)?t.push(new easepick[e]):console.warn(`easepick: ${e} not found.`)})),t.sort(((t,e)=>t.priority>e.priority?-1:t.priority<e.priority||t.dependencies.length>e.dependencies.length?1:t.dependencies.length<e.dependencies.length?-1:0)),t.forEach((t=>{t.attach(this.picker),this.instances[t.getName()]=t}))}getInstance(t){return this.instances[t]}addInstance(t){if(Object.prototype.hasOwnProperty.call(this.instances,t))console.warn(`easepick: ${t} already added.`);else{if("undefined"!=typeof easepick&&Object.prototype.hasOwnProperty.call(easepick,t)){const e=new easepick[t];return e.attach(this.picker),this.instances[e.getName()]=e,e}if("undefined"!==this.getPluginFn(t)){const e=new(this.getPluginFn(t));return e.attach(this.picker),this.instances[e.getName()]=e,e}console.warn(`easepick: ${t} not found.`)}return null}removeInstance(t){return t in this.instances&&this.instances[t].detach(),delete this.instances[t]}reloadInstance(t){return this.removeInstance(t),this.addInstance(t)}getPluginFn(t){return[...this.picker.options.plugins].filter((e=>"function"==typeof e&&(new e).getName()===t)).shift()}}class n{Calendar=new e(this);PluginManager=new i(this);calendars=[];datePicked=[];cssLoaded=0;binds={hidePicker:this.hidePicker.bind(this),show:this.show.bind(this)};options={doc:document,css:[],element:null,firstDay:1,grid:1,calendars:1,lang:"en-US",date:null,format:"YYYY-MM-DD",readonly:!0,autoApply:!0,header:!1,inline:!1,scrollToDate:!0,locale:{nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',cancel:"Cancel",apply:"Apply"},documentClick:this.binds.hidePicker,plugins:[]};ui={container:null,shadowRoot:null,wrapper:null};version="1.2.1";constructor(t){const e={...this.options.locale,...t.locale};this.options={...this.options,...t},this.options.locale=e,this.handleOptions(),this.ui.wrapper=document.createElement("span"),this.ui.wrapper.style.display="none",this.ui.wrapper.style.position="absolute",this.ui.wrapper.style.pointerEvents="none",this.ui.wrapper.className="easepick-wrapper",this.ui.wrapper.attachShadow({mode:"open"}),this.ui.shadowRoot=this.ui.wrapper.shadowRoot,this.ui.container=document.createElement("div"),this.ui.container.className="container",this.options.zIndex&&(this.ui.container.style.zIndex=String(this.options.zIndex)),this.options.inline&&(this.ui.wrapper.style.position="relative",this.ui.container.classList.add("inline")),this.ui.shadowRoot.appendChild(this.ui.container),this.options.element.after(this.ui.wrapper),this.handleCSS(),this.options.element.addEventListener("click",this.binds.show),this.on("view",this.onView.bind(this)),this.on("render",this.onRender.bind(this)),this.PluginManager.initialize(),this.parseValues(),"function"==typeof this.options.setup&&this.options.setup(this),this.on("click",this.onClick.bind(this));const i=this.options.scrollToDate?this.getDate():null;this.renderAll(i)}on(t,e,i={}){this.ui.container.addEventListener(t,e,i)}off(t,e,i={}){this.ui.container.removeEventListener(t,e,i)}trigger(t,e={}){return this.ui.container.dispatchEvent(new CustomEvent(t,{detail:e}))}destroy(){this.options.element.removeEventListener("click",this.binds.show),"function"==typeof this.options.documentClick&&document.removeEventListener("click",this.options.documentClick,!0),Object.keys(this.PluginManager.instances).forEach((t=>{this.PluginManager.removeInstance(t)})),this.ui.wrapper.remove()}onRender(t){const{view:e,date:i}=t.detail;this.Calendar.render(i,e)}onView(t){const{view:e,target:i}=t.detail;"Footer"===e&&this.datePicked.length&&(i.querySelector(".apply-button").disabled=!1)}onClickHeaderButton(t){this.isCalendarHeaderButton(t)&&(t.classList.contains("next-button")?this.calendars[0].add(1,"month"):this.calendars[0].subtract(1,"month"),this.renderAll(this.calendars[0]))}onClickCalendarDay(e){if(this.isCalendarDay(e)){const i=new t(e.dataset.time);this.options.autoApply?(this.setDate(i),this.trigger("select",{date:this.getDate()}),this.hide()):(this.datePicked[0]=i,this.trigger("preselect",{date:this.getDate()}),this.renderAll())}}onClickApplyButton(t){if(this.isApplyButton(t)){if(this.datePicked[0]instanceof Date){const t=this.datePicked[0].clone();this.setDate(t)}this.hide(),this.trigger("select",{date:this.getDate()})}}onClickCancelButton(t){this.isCancelButton(t)&&this.hide()}onClick(t){const e=t.target;if(e instanceof HTMLElement){const t=e.closest(".unit");if(!(t instanceof HTMLElement))return;this.onClickHeaderButton(t),this.onClickCalendarDay(t),this.onClickApplyButton(t),this.onClickCancelButton(t)}}isShown(){return this.ui.container.classList.contains("inline")||this.ui.container.classList.contains("show")}show(t){if(this.isShown())return;const e=t&&"target"in t?t.target:this.options.element,{top:i,left:n}=this.adjustPosition(e);this.ui.container.style.top=`${i}px`,this.ui.container.style.left=`${n}px`,this.ui.container.classList.add("show"),this.trigger("show",{target:e})}hide(){this.ui.container.classList.remove("show"),this.datePicked.length=0,this.renderAll(),this.trigger("hide")}setDate(e){const i=new t(e,this.options.format);this.options.date=i.clone(),this.updateValues(),this.calendars.length&&this.renderAll()}getDate(){return this.options.date instanceof t?this.options.date.clone():null}parseValues(){this.options.date?this.setDate(this.options.date):this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.setDate(this.options.element.value),this.options.date instanceof Date||(this.options.date=null)}updateValues(){const t=this.getDate(),e=t instanceof Date?t.format(this.options.format,this.options.lang):"",i=this.options.element;i instanceof HTMLInputElement?i.value=e:i instanceof HTMLElement&&(i.innerText=e)}hidePicker(t){let e=t.target,i=null;e.shadowRoot&&(e=t.composedPath()[0],i=e.getRootNode().host),this.isShown()&&i!==this.ui.wrapper&&e!==this.options.element&&this.hide()}renderAll(t){this.trigger("render",{view:"Container",date:(t||this.calendars[0]).clone()})}isCalendarHeaderButton(t){return["previous-button","next-button"].some((e=>t.classList.contains(e)))}isCalendarDay(t){return t.classList.contains("day")}isApplyButton(t){return t.classList.contains("apply-button")}isCancelButton(t){return t.classList.contains("cancel-button")}gotoDate(e){const i=new t(e,this.options.format);i.setDate(1),this.calendars[0]=i.clone(),this.renderAll()}clear(){this.options.date=null,this.datePicked.length=0,this.updateValues(),this.renderAll(),this.trigger("clear")}handleOptions(){this.options.element instanceof HTMLElement||(this.options.element=this.options.doc.querySelector(this.options.element)),"function"==typeof this.options.documentClick&&document.addEventListener("click",this.options.documentClick,!0),this.options.element instanceof HTMLInputElement&&(this.options.element.readOnly=this.options.readonly),this.options.date?this.calendars[0]=new t(this.options.date,this.options.format):this.calendars[0]=new t}handleCSS(){if(Array.isArray(this.options.css))this.options.css.forEach((t=>{const e=document.createElement("link");e.href=t,e.rel="stylesheet";const i=()=>{this.cssLoaded++,this.cssLoaded===this.options.css.length&&(this.ui.wrapper.style.display="")};e.addEventListener("load",i),e.addEventListener("error",i),this.ui.shadowRoot.append(e)}));else if("string"==typeof this.options.css){const t=document.createElement("style"),e=document.createTextNode(this.options.css);t.appendChild(e),this.ui.shadowRoot.append(t),this.ui.wrapper.style.display=""}else"function"==typeof this.options.css&&(this.options.css.call(this,this),this.ui.wrapper.style.display="")}adjustPosition(t){const e=t.getBoundingClientRect(),i=this.ui.wrapper.getBoundingClientRect();this.ui.container.classList.add("calc");const n=this.ui.container.getBoundingClientRect();this.ui.container.classList.remove("calc");let s=e.bottom-i.bottom,o=e.left-i.left;return"undefined"!=typeof window&&(window.innerHeight<s+n.height&&s-n.height>=0&&(s=e.top-i.top-n.height),window.innerWidth<o+n.width&&e.right-n.width>=0&&(o=e.right-i.right-n.width)),{left:o,top:s}}}var s=Object.freeze({__proto__:null,Core:n,create:n});class o{picker;options;priority=0;dependencies=[];attach(t){const e=this.getName(),i={...this.options};this.options={...this.options,...t.options[e]||{}};for(const n of Object.keys(i))if(null!==i[n]&&"object"==typeof i[n]&&Object.keys(i[n]).length&&e in t.options&&n in t.options[e]){const s={...t.options[e][n]};null!==s&&"object"==typeof s&&Object.keys(s).length&&Object.keys(s).every((t=>Object.keys(i[n]).includes(t)))&&(this.options[n]={...i[n],...s})}if(this.picker=t,this.dependenciesNotFound()){const t=this.dependencies.filter((t=>!this.pluginsAsStringArray().includes(t)));return void console.warn(`${this.getName()}: required dependencies (${t.join(", ")}).`)}const n=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.add(n),this.onAttach()}detach(){const t=this.camelCaseToKebab(this.getName());this.picker.ui.container.classList.remove(t),"function"==typeof this.onDetach&&this.onDetach()}dependenciesNotFound(){return this.dependencies.length&&!this.dependencies.every((t=>this.pluginsAsStringArray().includes(t)))}pluginsAsStringArray(){return this.picker.options.plugins.map((t=>"function"==typeof t?(new t).getName():t))}camelCaseToKebab(t){return t.replace(/([a-zA-Z])(?=[A-Z])/g,"$1-").toLowerCase()}}class a extends o{priority=1;binds={onView:this.onView.bind(this)};options={minDate:null,maxDate:null,minDays:null,maxDays:null,selectForward:null,selectBackward:null,presets:!0,inseparable:!1,filter:null};getName(){return"LockPlugin"}onAttach(){if(this.options.minDate&&(this.options.minDate=new t(this.options.minDate,this.picker.options.format,this.picker.options.lang)),this.options.maxDate&&(this.options.maxDate=new t(this.options.maxDate,this.picker.options.format,this.picker.options.lang),this.options.maxDate instanceof t&&this.picker.options.calendars>1&&this.picker.calendars[0].isSame(this.options.maxDate,"month"))){const t=this.picker.calendars[0].clone().subtract(1,"month");this.picker.gotoDate(t)}if((this.options.minDays||this.options.maxDays||this.options.selectForward||this.options.selectBackward)&&!this.picker.options.plugins.includes("RangePlugin")){const t=["minDays","maxDays","selectForward","selectBackward"];console.warn(`${this.getName()}: options ${t.join(", ")} required RangePlugin.`)}this.picker.on("view",this.binds.onView)}onDetach(){this.picker.off("view",this.binds.onView)}onView(e){const{view:i,target:n,date:s}=e.detail;if("CalendarHeader"===i&&(this.options.minDate instanceof t&&s.isSameOrBefore(this.options.minDate,"month")&&n.classList.add("no-previous-month"),this.options.maxDate instanceof t&&s.isSameOrAfter(this.options.maxDate,"month")&&n.classList.add("no-next-month")),"CalendarDay"===i){const t=this.picker.datePicked.length?this.picker.datePicked[0]:null;if(this.testFilter(s))return void n.classList.add("locked");if(this.options.inseparable){if(this.options.minDays){const t=s.clone().subtract(this.options.minDays-1,"day"),e=s.clone().add(this.options.minDays-1,"day");let i=!1,o=!1;for(;t.isBefore(s,"day");){if(this.testFilter(t)){i=!0;break}t.add(1,"day")}for(;e.isAfter(s,"day");){if(this.testFilter(e)){o=!0;break}e.subtract(1,"day")}i&&o&&n.classList.add("not-available")}this.rangeIsNotAvailable(s,t)&&n.classList.add("not-available")}this.dateIsNotAvailable(s,t)&&n.classList.add("not-available")}if(this.options.presets&&"PresetPluginButton"===i){const e=new t(Number(n.dataset.start)),i=new t(Number(n.dataset.end)),s=i.diff(e,"day"),o=this.options.minDays&&s<this.options.minDays,a=this.options.maxDays&&s>this.options.maxDays;(o||a||this.lockMinDate(e)||this.lockMaxDate(e)||this.lockMinDate(i)||this.lockMaxDate(i)||this.rangeIsNotAvailable(e,i))&&n.setAttribute("disabled","disabled")}}dateIsNotAvailable(t,e){return this.lockMinDate(t)||this.lockMaxDate(t)||this.lockMinDays(t,e)||this.lockMaxDays(t,e)||this.lockSelectForward(t)||this.lockSelectBackward(t)}rangeIsNotAvailable(t,e){if(!t||!e)return!1;const i=(t.isSameOrBefore(e,"day")?t:e).clone(),n=(e.isSameOrAfter(t,"day")?e:t).clone();for(;i.isSameOrBefore(n,"day");){if(this.testFilter(i))return!0;i.add(1,"day")}return!1}lockMinDate(e){return this.options.minDate instanceof t&&e.isBefore(this.options.minDate,"day")}lockMaxDate(e){return this.options.maxDate instanceof t&&e.isAfter(this.options.maxDate,"day")}lockMinDays(t,e){if(this.options.minDays&&e){const i=e.clone().subtract(this.options.minDays-1,"day"),n=e.clone().add(this.options.minDays-1,"day");return t.isBetween(i,n)}return!1}lockMaxDays(t,e){if(this.options.maxDays&&e){const i=e.clone().subtract(this.options.maxDays,"day"),n=e.clone().add(this.options.maxDays,"day");return!t.isBetween(i,n)}return!1}lockSelectForward(t){if(1===this.picker.datePicked.length&&this.options.selectForward){const e=this.picker.datePicked[0].clone();return t.isBefore(e,"day")}return!1}lockSelectBackward(t){if(1===this.picker.datePicked.length&&this.options.selectBackward){const e=this.picker.datePicked[0].clone();return t.isAfter(e,"day")}return!1}testFilter(t){return"function"==typeof this.options.filter&&this.options.filter(t,this.picker.datePicked)}}class r extends o{dependencies=["RangePlugin"];binds={onView:this.onView.bind(this),onClick:this.onClick.bind(this)};options={customLabels:["Today","Yesterday","Last 7 Days","Last 30 Days","This Month","Last Month"],customPreset:{},position:"left"};getName(){return"PresetPlugin"}onAttach(){if(!Object.keys(this.options.customPreset).length){const e=new t,i=()=>{const i=e.clone();i.setDate(1);const n=new Date(e.getFullYear(),e.getMonth()+1,0);return[new t(i),new t(n)]},n=()=>{const i=e.clone();i.setMonth(i.getMonth()-1),i.setDate(1);const n=new Date(e.getFullYear(),e.getMonth(),0);return[new t(i),new t(n)]},s=[[e.clone(),e.clone()],[e.clone().subtract(1,"day"),e.clone().subtract(1,"day")],[e.clone().subtract(6,"day"),e.clone()],[e.clone().subtract(29,"day"),e.clone()],i(),n()];Object.values(this.options.customLabels).forEach(((t,e)=>{this.options.customPreset[t]=s[e]}))}this.picker.on("view",this.binds.onView),this.picker.on("click",this.binds.onClick)}onDetach(){this.picker.off("view",this.binds.onView),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:i}=t.detail;if("Main"===e){const t=document.createElement("div");t.className="preset-plugin-container",Object.keys(this.options.customPreset).forEach((e=>{if(Object.prototype.hasOwnProperty.call(this.options.customPreset,e)){const i=this.options.customPreset[e],n=document.createElement("button");n.className="preset-button unit",n.innerHTML=e,n.dataset.start=i[0].getTime(),n.dataset.end=i[1].getTime(),t.appendChild(n),this.picker.trigger("view",{view:"PresetPluginButton",target:n})}})),i.appendChild(t),i.classList.add(`preset-${this.options.position}`),this.picker.trigger("view",{view:"PresetPluginContainer",target:t})}}onClick(e){const i=e.target;if(i instanceof HTMLElement){const e=i.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.isPresetButton(e)){const i=new t(Number(e.dataset.start)),n=new t(Number(e.dataset.end));this.picker.options.autoApply?(this.picker.setDateRange(i,n),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.picker.datePicked=[i,n],this.picker.renderAll())}}}isPresetButton(t){return t.classList.contains("preset-button")}}class c extends o{tooltipElement;triggerElement;binds={setStartDate:this.setStartDate.bind(this),setEndDate:this.setEndDate.bind(this),setDateRange:this.setDateRange.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onShow:this.onShow.bind(this),onMouseEnter:this.onMouseEnter.bind(this),onMouseLeave:this.onMouseLeave.bind(this),onClickCalendarDay:this.onClickCalendarDay.bind(this),onClickApplyButton:this.onClickApplyButton.bind(this),parseValues:this.parseValues.bind(this),updateValues:this.updateValues.bind(this),clear:this.clear.bind(this)};options={elementEnd:null,startDate:null,endDate:null,repick:!1,strict:!0,delimiter:" - ",tooltip:!0,tooltipNumber:t=>t,locale:{zero:"",one:"day",two:"",few:"",many:"",other:"days"},documentClick:this.hidePicker.bind(this)};getName(){return"RangePlugin"}onAttach(){this.binds._setStartDate=this.picker.setStartDate,this.binds._setEndDate=this.picker.setEndDate,this.binds._setDateRange=this.picker.setDateRange,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,this.binds._parseValues=this.picker.parseValues,this.binds._updateValues=this.picker.updateValues,this.binds._clear=this.picker.clear,this.binds._onClickCalendarDay=this.picker.onClickCalendarDay,this.binds._onClickApplyButton=this.picker.onClickApplyButton,Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds.setStartDate},setEndDate:{configurable:!0,value:this.binds.setEndDate},setDateRange:{configurable:!0,value:this.binds.setDateRange},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},parseValues:{configurable:!0,value:this.binds.parseValues},updateValues:{configurable:!0,value:this.binds.updateValues},clear:{configurable:!0,value:this.binds.clear},onClickCalendarDay:{configurable:!0,value:this.binds.onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds.onClickApplyButton}}),this.options.elementEnd&&(this.options.elementEnd instanceof HTMLElement||(this.options.elementEnd=this.picker.options.doc.querySelector(this.options.elementEnd)),this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.readOnly=this.picker.options.readonly),"function"==typeof this.picker.options.documentClick&&(document.removeEventListener("click",this.picker.options.documentClick,!0),"function"==typeof this.options.documentClick&&document.addEventListener("click",this.options.documentClick,!0)),this.options.elementEnd.addEventListener("click",this.picker.show.bind(this.picker))),this.options.repick=this.options.repick&&this.options.elementEnd instanceof HTMLElement,this.picker.options.date=null,this.picker.on("view",this.binds.onView),this.picker.on("show",this.binds.onShow),this.picker.on("mouseenter",this.binds.onMouseEnter,!0),this.picker.on("mouseleave",this.binds.onMouseLeave,!0),this.checkIntlPluralLocales()}onDetach(){Object.defineProperties(this.picker,{setStartDate:{configurable:!0,value:this.binds._setStartDate},setEndDate:{configurable:!0,value:this.binds._setEndDate},setDateRange:{configurable:!0,value:this.binds._setDateRange},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate},parseValues:{configurable:!0,value:this.binds._parseValues},updateValues:{configurable:!0,value:this.binds._updateValues},clear:{configurable:!0,value:this.binds._clear},onClickCalendarDay:{configurable:!0,value:this.binds._onClickCalendarDay},onClickApplyButton:{configurable:!0,value:this.binds._onClickApplyButton}}),this.picker.off("view",this.binds.onView),this.picker.off("show",this.binds.onShow),this.picker.off("mouseenter",this.binds.onMouseEnter,!0),this.picker.off("mouseleave",this.binds.onMouseLeave,!0)}parseValues(){if(this.options.startDate||this.options.endDate)this.options.strict?this.options.startDate&&this.options.endDate?this.setDateRange(this.options.startDate,this.options.endDate):(this.options.startDate=null,this.options.endDate=null):(this.options.startDate&&this.setStartDate(this.options.startDate),this.options.endDate&&this.setEndDate(this.options.endDate));else if(this.options.elementEnd)this.options.strict?this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setDateRange(this.picker.options.element.value,this.options.elementEnd.value):(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.setStartDate(this.picker.options.element.value),this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length&&this.setEndDate(this.options.elementEnd.value));else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[t,e]=this.picker.options.element.value.split(this.options.delimiter);this.options.strict?t&&e&&this.setDateRange(t,e):(t&&this.setStartDate(t),e&&this.setEndDate(e))}}updateValues(){const t=this.picker.options.element,e=this.options.elementEnd,i=this.picker.getStartDate(),n=this.picker.getEndDate(),s=i instanceof Date?i.format(this.picker.options.format,this.picker.options.lang):"",o=n instanceof Date?n.format(this.picker.options.format,this.picker.options.lang):"";if(e)t instanceof HTMLInputElement?t.value=s:t instanceof HTMLElement&&(t.innerText=s),e instanceof HTMLInputElement?e.value=o:e instanceof HTMLElement&&(e.innerText=o);else{const e=`${s}${s||o?this.options.delimiter:""}${o}`;t instanceof HTMLInputElement?t.value=e:t instanceof HTMLElement&&(t.innerText=e)}}clear(){this.options.startDate=null,this.options.endDate=null,this.picker.datePicked.length=0,this.updateValues(),this.picker.renderAll(),this.picker.trigger("clear")}onShow(t){const{target:e}=t.detail;this.triggerElement=e,this.picker.options.scrollToDate&&this.getStartDate()instanceof Date&&this.picker.gotoDate(this.getStartDate()),this.initializeRepick()}onView(e){const{view:i,target:n}=e.detail;if("Main"===i&&(this.tooltipElement=document.createElement("span"),this.tooltipElement.className="range-plugin-tooltip",n.appendChild(this.tooltipElement)),"CalendarDay"===i){const e=new t(n.dataset.time),i=this.picker.datePicked,s=i.length?this.picker.datePicked[0]:this.getStartDate(),o=i.length?this.picker.datePicked[1]:this.getEndDate();s&&s.isSame(e,"day")&&n.classList.add("start"),s&&o&&(o.isSame(e,"day")&&n.classList.add("end"),e.isBetween(s,o)&&n.classList.add("in-range"))}if("Footer"===i){const t=1===this.picker.datePicked.length&&!this.options.strict||2===this.picker.datePicked.length;n.querySelector(".apply-button").disabled=!t}}hidePicker(t){let e=t.target,i=null;e.shadowRoot&&(e=t.composedPath()[0],i=e.getRootNode().host),this.picker.isShown()&&i!==this.picker.ui.wrapper&&e!==this.picker.options.element&&e!==this.options.elementEnd&&this.picker.hide()}setStartDate(e){const i=new t(e,this.picker.options.format);this.options.startDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setEndDate(e){const i=new t(e,this.picker.options.format);this.options.endDate=i?i.clone():null,this.updateValues(),this.picker.renderAll()}setDateRange(e,i){const n=new t(e,this.picker.options.format),s=new t(i,this.picker.options.format);this.options.startDate=n?n.clone():null,this.options.endDate=s?s.clone():null,this.updateValues(),this.picker.renderAll()}getStartDate(){return this.options.startDate instanceof Date?this.options.startDate.clone():null}getEndDate(){return this.options.endDate instanceof Date?this.options.endDate.clone():null}onMouseEnter(e){const i=e.target;if(i instanceof HTMLElement){this.isContainer(i)&&this.initializeRepick();const e=i.closest(".unit");if(!(e instanceof HTMLElement))return;if(this.picker.isCalendarDay(e)){if(1!==this.picker.datePicked.length)return;let i=this.picker.datePicked[0].clone(),n=new t(e.dataset.time),s=!1;if(i.isAfter(n,"day")){const t=i.clone();i=n.clone(),n=t.clone(),s=!0}if([...this.picker.ui.container.querySelectorAll(".day")].forEach((o=>{const a=new t(o.dataset.time),r=this.picker.Calendar.getCalendarDayView(a);a.isBetween(i,n)&&r.classList.add("in-range"),a.isSame(this.picker.datePicked[0],"day")&&(r.classList.add("start"),r.classList.toggle("flipped",s)),o===e&&(r.classList.add("end"),r.classList.toggle("flipped",s)),o.className=r.className})),this.options.tooltip){const t=this.options.tooltipNumber(n.diff(i,"day")+1);if(t>0){const i=new Intl.PluralRules(this.picker.options.lang).select(t),n=`${t} ${this.options.locale[i]}`;this.showTooltip(e,n)}else this.hideTooltip()}}}}onMouseLeave(t){if(this.isContainer(t.target)&&this.options.repick){const t=this.getStartDate(),e=this.getEndDate();t&&e&&(this.picker.datePicked.length=0,this.picker.renderAll())}}onClickCalendarDay(e){if(this.picker.isCalendarDay(e)){2===this.picker.datePicked.length&&(this.picker.datePicked.length=0);const i=new t(e.dataset.time);if(this.picker.datePicked[this.picker.datePicked.length]=i,2===this.picker.datePicked.length&&this.picker.datePicked[0].isAfter(this.picker.datePicked[1])){const t=this.picker.datePicked[1].clone();this.picker.datePicked[1]=this.picker.datePicked[0].clone(),this.picker.datePicked[0]=t.clone()}1!==this.picker.datePicked.length&&this.picker.options.autoApply||this.picker.trigger("preselect",{start:this.picker.datePicked[0]instanceof Date?this.picker.datePicked[0].clone():null,end:this.picker.datePicked[1]instanceof Date?this.picker.datePicked[1].clone():null}),1===this.picker.datePicked.length&&(!this.options.strict&&this.picker.options.autoApply&&(this.picker.options.element===this.triggerElement&&this.setStartDate(this.picker.datePicked[0]),this.options.elementEnd===this.triggerElement&&this.setEndDate(this.picker.datePicked[0]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()})),this.picker.renderAll()),2===this.picker.datePicked.length&&(this.picker.options.autoApply?(this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide()):(this.hideTooltip(),this.picker.renderAll()))}}onClickApplyButton(t){this.picker.isApplyButton(t)&&(1!==this.picker.datePicked.length||this.options.strict||(this.picker.options.element===this.triggerElement&&(this.options.endDate=null,this.setStartDate(this.picker.datePicked[0])),this.options.elementEnd===this.triggerElement&&(this.options.startDate=null,this.setEndDate(this.picker.datePicked[0]))),2===this.picker.datePicked.length&&this.setDateRange(this.picker.datePicked[0],this.picker.datePicked[1]),this.picker.trigger("select",{start:this.picker.getStartDate(),end:this.picker.getEndDate()}),this.picker.hide())}showTooltip(t,e){this.tooltipElement.style.visibility="visible",this.tooltipElement.innerHTML=e;const i=this.picker.ui.container.getBoundingClientRect(),n=this.tooltipElement.getBoundingClientRect(),s=t.getBoundingClientRect();let o=s.top,a=s.left;o-=i.top,a-=i.left,o-=n.height,a-=n.width/2,a+=s.width/2,this.tooltipElement.style.top=`${o}px`,this.tooltipElement.style.left=`${a}px`}hideTooltip(){this.tooltipElement.style.visibility="hidden"}checkIntlPluralLocales(){if(!this.options.tooltip)return;const t=[...new Set([new Intl.PluralRules(this.picker.options.lang).select(0),new Intl.PluralRules(this.picker.options.lang).select(1),new Intl.PluralRules(this.picker.options.lang).select(2),new Intl.PluralRules(this.picker.options.lang).select(6),new Intl.PluralRules(this.picker.options.lang).select(18)])],e=Object.keys(this.options.locale);t.every((t=>e.includes(t)))||console.warn(`${this.getName()}: provide locales (${t.join(", ")}) for correct tooltip text.`)}initializeRepick(){if(!this.options.repick)return;const t=this.getStartDate(),e=this.getEndDate();e&&this.triggerElement===this.picker.options.element&&(this.picker.datePicked[0]=e),t&&this.triggerElement===this.options.elementEnd&&(this.picker.datePicked[0]=t)}isContainer(t){return t===this.picker.ui.container}}class l extends o{options={native:!1,seconds:!1,stepHours:1,stepMinutes:5,stepSeconds:5,format12:!1};rangePlugin;timePicked={input:null,start:null,end:null};timePrePicked={input:null,start:null,end:null};binds={getDate:this.getDate.bind(this),getStartDate:this.getStartDate.bind(this),getEndDate:this.getEndDate.bind(this),onView:this.onView.bind(this),onInput:this.onInput.bind(this),onChange:this.onChange.bind(this),onClick:this.onClick.bind(this),setTime:this.setTime.bind(this),setStartTime:this.setStartTime.bind(this),setEndTime:this.setEndTime.bind(this)};getName(){return"TimePlugin"}onAttach(){this.binds._getDate=this.picker.getDate,this.binds._getStartDate=this.picker.getStartDate,this.binds._getEndDate=this.picker.getEndDate,Object.defineProperties(this.picker,{getDate:{configurable:!0,value:this.binds.getDate},getStartDate:{configurable:!0,value:this.binds.getStartDate},getEndDate:{configurable:!0,value:this.binds.getEndDate},setTime:{configurable:!0,value:this.binds.setTime},setStartTime:{configurable:!0,value:this.binds.setStartTime},setEndTime:{configurable:!0,value:this.binds.setEndTime}}),this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.parseValues(),this.picker.on("view",this.binds.onView),this.picker.on("input",this.binds.onInput),this.picker.on("change",this.binds.onChange),this.picker.on("click",this.binds.onClick)}onDetach(){delete this.picker.setTime,delete this.picker.setStartTime,delete this.picker.setEndTime,Object.defineProperties(this.picker,{getDate:{configurable:!0,value:this.binds._getDate},getStartDate:{configurable:!0,value:this.binds._getStartDate},getEndDate:{configurable:!0,value:this.binds._getEndDate}}),this.picker.off("view",this.binds.onView),this.picker.off("input",this.binds.onInput),this.picker.off("change",this.binds.onChange),this.picker.off("click",this.binds.onClick)}onView(t){const{view:e,target:i}=t.detail;if("Main"===e){this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin");const t=document.createElement("div");if(t.className="time-plugin-container",this.rangePlugin){const e=this.getStartInput();t.appendChild(e),this.picker.trigger("view",{view:"TimePluginInput",target:e});const i=this.getEndInput();t.appendChild(i),this.picker.trigger("view",{view:"TimePluginInput",target:i})}else{const e=this.getSingleInput();t.appendChild(e),this.picker.trigger("view",{view:"TimePluginInput",target:e})}i.appendChild(t),this.picker.trigger("view",{view:"TimePluginContainer",target:t})}}onInput(e){const i=e.target;if(i instanceof HTMLInputElement&&i.classList.contains("time-plugin-input")){const e=this.timePicked[i.name]||new t,[n,s]=i.value.split(":");e.setHours(Number(n)||0,Number(s)||0,0,0),this.picker.options.autoApply?(this.timePicked[i.name]=e,this.picker.updateValues()):this.timePrePicked[i.name]=e}}onChange(e){const i=e.target;if(i instanceof HTMLSelectElement&&i.classList.contains("time-plugin-custom-input")){const e=/(\w+)\[(\w+)\]/,[,n,s]=i.name.match(e),o=Number(i.value);let a=new t;switch(!this.picker.options.autoApply&&this.timePrePicked[n]instanceof Date?a=this.timePrePicked[n].clone():this.timePicked[n]instanceof Date&&(a=this.timePicked[n].clone()),s){case"HH":if(this.options.format12){const t=i.closest(".time-plugin-custom-block").querySelector(`select[name="${n}[period]"]`).value,e=this.handleFormat12(t,a,o);a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),0)}else a.setHours(o,a.getMinutes(),a.getSeconds(),0);break;case"mm":a.setHours(a.getHours(),o,a.getSeconds(),0);break;case"ss":a.setHours(a.getHours(),a.getMinutes(),o,0);break;case"period":if(this.options.format12){const t=i.closest(".time-plugin-custom-block").querySelector(`select[name="${n}[HH]"]`).value,e=this.handleFormat12(i.value,a,Number(t));a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),0)}}if(this.picker.options.autoApply)this.timePicked[n]=a,this.picker.updateValues();else{this.timePrePicked[n]=a;const t=this.picker.ui.container.querySelector(".apply-button");if(this.rangePlugin){const e=this.rangePlugin.options,i=this.picker.datePicked,n=e.strict&&2===i.length||!e.strict&&i.length>0||!i.length&&e.strict&&e.startDate instanceof Date&&e.endDate instanceof Date||!i.length&&!e.strict&&(e.startDate instanceof Date||e.endDate instanceof Date);t.disabled=!n}else this.picker.datePicked.length&&(t.disabled=!1)}}}onClick(t){const e=t.target;if(e instanceof HTMLElement){const t=e.closest(".unit");if(!(t instanceof HTMLElement))return;this.picker.isApplyButton(t)&&(Object.keys(this.timePicked).forEach((t=>{this.timePrePicked[t]instanceof Date&&(this.timePicked[t]=this.timePrePicked[t].clone())})),this.picker.updateValues(),this.timePrePicked={input:null,start:null,end:null}),this.picker.isCancelButton(t)&&(this.timePrePicked={input:null,start:null,end:null},this.picker.renderAll())}}setTime(t){const e=this.handleTimeString(t);this.timePicked.input=e.clone(),this.picker.renderAll(),this.picker.updateValues()}setStartTime(t){const e=this.handleTimeString(t);this.timePicked.start=e.clone(),this.picker.renderAll(),this.picker.updateValues()}setEndTime(t){const e=this.handleTimeString(t);this.timePicked.end=e.clone(),this.picker.renderAll(),this.picker.updateValues()}handleTimeString(e){const i=new t,[n,s,o]=e.split(":").map((t=>Number(t))),a=n&&!Number.isNaN(n)?n:0,r=s&&!Number.isNaN(s)?s:0,c=o&&!Number.isNaN(o)?o:0;return i.setHours(a,r,c,0),i}getDate(){if(this.picker.options.date instanceof Date){const e=new t(this.picker.options.date,this.picker.options.format);if(this.timePicked.input instanceof Date){const t=this.timePicked.input;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getStartDate(){if(this.rangePlugin.options.startDate instanceof Date){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format);if(this.timePicked.start instanceof Date){const t=this.timePicked.start;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getEndDate(){if(this.rangePlugin.options.endDate instanceof Date){const e=new t(this.rangePlugin.options.endDate,this.picker.options.format);if(this.timePicked.end instanceof Date){const t=this.timePicked.end;e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),0)}return e}return null}getSingleInput(){return this.options.native?this.getNativeInput("input"):this.getCustomInput("input")}getStartInput(){return this.options.native?this.getNativeInput("start"):this.getCustomInput("start")}getEndInput(){return this.options.native?this.getNativeInput("end"):this.getCustomInput("end")}getNativeInput(t){const e=document.createElement("input");e.type="time",e.name=t,e.className="time-plugin-input unit";const i=this.timePicked[t];if(i){const t=`0${i.getHours()}`.slice(-2),n=`0${i.getMinutes()}`.slice(-2);e.value=`${t}:${n}`}return e}getCustomInput(t){const e=document.createElement("div");e.className="time-plugin-custom-block";const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[HH]`;const n=this.options.format12?1:0,s=this.options.format12?13:24;let o=null;!this.picker.options.autoApply&&this.timePrePicked[t]instanceof Date?o=this.timePrePicked[t].clone():this.timePicked[t]instanceof Date&&(o=this.timePicked[t].clone());for(let t=n;t<s;t+=this.options.stepHours){const e=document.createElement("option");e.value=String(t),e.text=String(t),o&&(this.options.format12?(o.getHours()%12?o.getHours()%12:12)===t&&(e.selected=!0):o.getHours()===t&&(e.selected=!0)),i.appendChild(e)}e.appendChild(i);const a=document.createElement("select");a.className="time-plugin-custom-input unit",a.name=`${t}[mm]`;for(let t=0;t<60;t+=this.options.stepMinutes){const e=document.createElement("option");e.value=`0${String(t)}`.slice(-2),e.text=`0${String(t)}`.slice(-2),o&&o.getMinutes()===t&&(e.selected=!0),a.appendChild(e)}if(e.appendChild(a),this.options.seconds){const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[ss]`;const n=60;for(let t=0;t<n;t+=this.options.stepSeconds){const e=document.createElement("option");e.value=`0${String(t)}`.slice(-2),e.text=`0${String(t)}`.slice(-2),o&&o.getSeconds()===t&&(e.selected=!0),i.appendChild(e)}e.appendChild(i)}if(this.options.format12){const i=document.createElement("select");i.className="time-plugin-custom-input unit",i.name=`${t}[period]`,["AM","PM"].forEach((t=>{const e=document.createElement("option");e.value=t,e.text=t,o&&"PM"===t&&o.getHours()>=12&&(e.selected=!0),i.appendChild(e)})),e.appendChild(i)}return e}handleFormat12(t,e,i){const n=e.clone();switch(t){case"AM":12===i?n.setHours(0,n.getMinutes(),n.getSeconds(),0):n.setHours(i,n.getMinutes(),n.getSeconds(),0);break;case"PM":12!==i?n.setHours(i+12,n.getMinutes(),n.getSeconds(),0):n.setHours(i,n.getMinutes(),n.getSeconds(),0)}return n}parseValues(){if(this.rangePlugin){if(this.rangePlugin.options.strict){if(this.rangePlugin.options.startDate&&this.rangePlugin.options.endDate){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format),i=new t(this.rangePlugin.options.endDate,this.picker.options.format);this.timePicked.start=e.clone(),this.timePicked.end=i.clone()}}else{if(this.rangePlugin.options.startDate){const e=new t(this.rangePlugin.options.startDate,this.picker.options.format);this.timePicked.start=e.clone()}if(this.rangePlugin.options.endDate){const e=new t(this.rangePlugin.options.endDate,this.picker.options.format);this.timePicked.end=e.clone()}}if(this.rangePlugin.options.elementEnd)if(this.rangePlugin.options.strict){if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length&&this.rangePlugin.options.elementEnd instanceof HTMLInputElement&&this.rangePlugin.options.elementEnd.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format),i=new t(this.rangePlugin.options.elementEnd.value,this.picker.options.format);this.timePicked.start=e.clone(),this.timePicked.end=i.clone()}}else{if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format);this.timePicked.start=e.clone()}if(this.rangePlugin.options.elementEnd instanceof HTMLInputElement&&this.rangePlugin.options.elementEnd.value.length){const e=new t(this.rangePlugin.options.elementEnd.value,this.picker.options.format);this.timePicked.start=e.clone()}}else if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const[e,i]=this.picker.options.element.value.split(this.rangePlugin.options.delimiter);if(this.rangePlugin.options.strict){if(e&&i){const n=new t(e,this.picker.options.format),s=new t(i,this.picker.options.format);this.timePicked.start=n.clone(),this.timePicked.end=s.clone()}}else{if(e){const i=new t(e,this.picker.options.format);this.timePicked.start=i.clone()}if(i){const e=new t(i,this.picker.options.format);this.timePicked.start=e.clone()}}}}else{if(this.picker.options.date){const e=new t(this.picker.options.date,this.picker.options.format);this.timePicked.input=e.clone()}if(this.picker.options.element instanceof HTMLInputElement&&this.picker.options.element.value.length){const e=new t(this.picker.options.element.value,this.picker.options.format);this.timePicked.input=e.clone()}}}}class h extends o{docElement=null;rangePlugin;binds={onView:this.onView.bind(this),onKeydown:this.onKeydown.bind(this)};options={unitIndex:1,dayIndex:2};getName(){return"KbdPlugin"}onAttach(){const t=this.picker.options.element,e=t.getBoundingClientRect();if(this.docElement=document.createElement("span"),this.docElement.style.position="absolute",this.docElement.style.top=`${t.offsetTop}px`,this.docElement.style.left=t.offsetLeft+e.width-25+"px",this.docElement.attachShadow({mode:"open"}),this.options.html)this.docElement.shadowRoot.innerHTML=this.options.html;else{const t=`\n      <style>\n      button {\n        border: none;\n        background: transparent;\n        font-size: ${window.getComputedStyle(this.picker.options.element).fontSize};\n      }\n      </style>\n\n      <button>&#128197;</button>\n      `;this.docElement.shadowRoot.innerHTML=t}const i=this.docElement.shadowRoot.querySelector("button");i&&(i.addEventListener("click",(t=>{t.preventDefault(),this.picker.show({target:this.picker.options.element})}),{capture:!0}),i.addEventListener("keydown",(t=>{"Escape"===t.code&&this.picker.hide()}),{capture:!0})),this.picker.options.element.after(this.docElement),this.picker.on("view",this.binds.onView),this.picker.on("keydown",this.binds.onKeydown)}onDetach(){this.docElement&&this.docElement.isConnected&&this.docElement.remove(),this.picker.off("view",this.binds.onView),this.picker.off("keydown",this.binds.onKeydown)}onView(t){const{view:e,target:i}=t.detail;i&&"querySelector"in i&&("CalendarDay"!==e||["locked","not-available"].some((t=>i.classList.contains(t)))?[...i.querySelectorAll(".unit:not(.day)")].forEach((t=>t.tabIndex=this.options.unitIndex)):i.tabIndex=this.options.dayIndex)}onKeydown(t){switch(this.onMouseEnter(t),t.code){case"ArrowUp":case"ArrowDown":this.verticalMove(t);break;case"ArrowLeft":case"ArrowRight":this.horizontalMove(t);break;case"Enter":case"Space":this.handleEnter(t);break;case"Escape":this.picker.hide()}}findAllowableDaySibling(t,e,i){const n=Array.from(t.querySelectorAll(`.day[tabindex="${this.options.dayIndex}"]`)),s=n.indexOf(e);return n.filter(((t,e)=>i(e,s)&&t.tabIndex===this.options.dayIndex))[0]}changeMonth(t){const e={ArrowLeft:"previous",ArrowRight:"next"},i=this.picker.ui.container.querySelector(`.${e[t.code]}-button[tabindex="${this.options.unitIndex}"]`);i&&!i.parentElement.classList.contains(`no-${e[t.code]}-month`)&&(i.dispatchEvent(new Event("click",{bubbles:!0})),setTimeout((()=>{let e=null;switch(t.code){case"ArrowLeft":const t=this.picker.ui.container.querySelectorAll(`.day[tabindex="${this.options.dayIndex}"]`);e=t[t.length-1];break;case"ArrowRight":e=this.picker.ui.container.querySelector(`.day[tabindex="${this.options.dayIndex}"]`)}e&&e.focus()})))}verticalMove(t){const e=t.target;if(e.classList.contains("day")){t.preventDefault();const i=this.findAllowableDaySibling(this.picker.ui.container,e,((e,i)=>e===("ArrowUp"===t.code?i-7:i+7)));i&&i.focus()}}horizontalMove(t){const e=t.target;if(e.classList.contains("day")){t.preventDefault();const i=this.findAllowableDaySibling(this.picker.ui.container,e,((e,i)=>e===("ArrowLeft"===t.code?i-1:i+1)));i?i.focus():this.changeMonth(t)}}handleEnter(t){const e=t.target;e.classList.contains("day")&&(t.preventDefault(),e.dispatchEvent(new Event("click",{bubbles:!0})),setTimeout((()=>{if(this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.rangePlugin||!this.picker.options.autoApply){const t=this.picker.ui.container.querySelector(".day.selected");t&&setTimeout((()=>{t.focus()}))}})))}onMouseEnter(t){t.target.classList.contains("day")&&setTimeout((()=>{const t=this.picker.ui.shadowRoot.activeElement;t&&t.dispatchEvent(new Event("mouseenter",{bubbles:!0}))}))}}class d extends o{rangePlugin;lockPlugin;priority=10;binds={onView:this.onView.bind(this),onColorScheme:this.onColorScheme.bind(this)};options={dropdown:{months:!1,years:!1,minYear:1950,maxYear:null},darkMode:!0,locale:{resetButton:'<svg xmlns="http://www.w3.org/2000/svg" height="24" width="24"><path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/></svg>'}};matchMedia;getName(){return"AmpPlugin"}onAttach(){this.options.darkMode&&window&&"matchMedia"in window&&(this.matchMedia=window.matchMedia("(prefers-color-scheme: dark)"),this.matchMedia.matches&&(this.picker.ui.container.dataset.theme="dark"),this.matchMedia.addEventListener("change",this.binds.onColorScheme)),this.options.weekNumbers&&this.picker.ui.container.classList.add("week-numbers"),this.picker.on("view",this.binds.onView)}onDetach(){this.options.darkMode&&window&&"matchMedia"in window&&this.matchMedia.removeEventListener("change",this.binds.onColorScheme),this.picker.ui.container.removeAttribute("data-theme"),this.picker.ui.container.classList.remove("week-numbers"),this.picker.off("view",this.binds.onView)}onView(t){this.lockPlugin=this.picker.PluginManager.getInstance("LockPlugin"),this.rangePlugin=this.picker.PluginManager.getInstance("RangePlugin"),this.handleDropdown(t),this.handleResetButton(t),this.handleWeekNumbers(t)}onColorScheme(t){const e=t.matches?"dark":"light";this.picker.ui.container.dataset.theme=e}handleDropdown(e){const{view:i,target:n,date:s,index:o}=e.detail;if("CalendarHeader"===i){const e=n.querySelector(".month-name");if(this.options.dropdown.months){e.childNodes[0].remove();const i=document.createElement("select");i.className="month-name--select month-name--dropdown";for(let e=0;e<12;e+=1){const n=document.createElement("option"),o=new t(new Date(s.getFullYear(),e,2,0,0,0)),a=new t(new Date(s.getFullYear(),e,1,0,0,0));n.value=String(e),n.text=o.toLocaleString(this.picker.options.lang,{month:"long"}),this.lockPlugin&&(n.disabled=this.lockPlugin.options.minDate&&a.isBefore(new t(this.lockPlugin.options.minDate),"month")||this.lockPlugin.options.maxDate&&a.isAfter(new t(this.lockPlugin.options.maxDate),"month")),n.selected=a.getMonth()===s.getMonth(),i.appendChild(n)}i.addEventListener("change",(t=>{const e=t.target;this.picker.calendars[0].setDate(1),this.picker.calendars[0].setMonth(Number(e.value)),this.picker.renderAll()})),e.prepend(i)}if(this.options.dropdown.years){e.childNodes[1].remove();const i=document.createElement("select");i.className="month-name--select";const n=this.options.dropdown.minYear,o=this.options.dropdown.maxYear?this.options.dropdown.maxYear:(new Date).getFullYear();if(s.getFullYear()>o){const t=document.createElement("option");t.value=String(s.getFullYear()),t.text=String(s.getFullYear()),t.selected=!0,t.disabled=!0,i.appendChild(t)}for(let e=o;e>=n;e-=1){const n=document.createElement("option"),o=new t(new Date(e,0,1,0,0,0));n.value=String(e),n.text=String(e),this.lockPlugin&&(n.disabled=this.lockPlugin.options.minDate&&o.isBefore(new t(this.lockPlugin.options.minDate),"year")||this.lockPlugin.options.maxDate&&o.isAfter(new t(this.lockPlugin.options.maxDate),"year")),n.selected=s.getFullYear()===e,i.appendChild(n)}if(s.getFullYear()<n){const t=document.createElement("option");t.value=String(s.getFullYear()),t.text=String(s.getFullYear()),t.selected=!0,t.disabled=!0,i.appendChild(t)}if("asc"===this.options.dropdown.years){const t=Array.prototype.slice.call(i.childNodes).reverse();i.innerHTML="",t.forEach((t=>{t.innerHTML=t.value,i.appendChild(t)}))}i.addEventListener("change",(t=>{const e=t.target;this.picker.calendars[0].setFullYear(Number(e.value)),this.picker.renderAll()})),e.appendChild(i)}}}handleResetButton(t){const{view:e,target:i}=t.detail;if("CalendarHeader"===e&&this.options.resetButton){const t=document.createElement("button");t.className="reset-button unit",t.innerHTML=this.options.locale.resetButton,t.addEventListener("click",(t=>{t.preventDefault();let e=!0;"function"==typeof this.options.resetButton&&(e=this.options.resetButton.call(this)),e&&this.picker.clear()})),i.appendChild(t)}}handleWeekNumbers(e){if(this.options.weekNumbers){const{view:i,target:n}=e.detail;if("CalendarDayNames"===i){const t=document.createElement("div");t.className="wnum-header",t.innerHTML="Wk",n.prepend(t)}"CalendarDays"===i&&[...n.children].forEach(((e,i)=>{if(0===i||i%7==0){let i;if(e.classList.contains("day"))i=new t(e.dataset.time);else{const e=n.querySelector(".day");i=new t(e.dataset.time)}let s=i.getWeek(this.picker.options.firstDay);53===s&&0===i.getMonth()&&(s="53/1");const o=document.createElement("div");o.className="wnum-item",o.innerHTML=String(s),n.insertBefore(o,e)}}))}}}


/***/ }),

/***/ "./src/cart.ts":
/*!*********************!*\
  !*** ./src/cart.ts ***!
  \*********************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {


var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {
    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }
    return new (P || (P = Promise))(function (resolve, reject) {
        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }
        function rejected(value) { try { step(generator["throw"](value)); } catch (e) { reject(e); } }
        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }
        step((generator = generator.apply(thisArg, _arguments || [])).next());
    });
};
var __generator = (this && this.__generator) || function (thisArg, body) {
    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;
    return g = { next: verb(0), "throw": verb(1), "return": verb(2) }, typeof Symbol === "function" && (g[Symbol.iterator] = function() { return this; }), g;
    function verb(n) { return function (v) { return step([n, v]); }; }
    function step(op) {
        if (f) throw new TypeError("Generator is already executing.");
        while (g && (g = 0, op[0] && (_ = 0)), _) try {
            if (f = 1, y && (t = op[0] & 2 ? y["return"] : op[0] ? y["throw"] || ((t = y["return"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;
            if (y = 0, t) op = [op[0] & 2, t.value];
            switch (op[0]) {
                case 0: case 1: t = op; break;
                case 4: _.label++; return { value: op[1], done: false };
                case 5: _.label++; y = op[1]; op = [0]; continue;
                case 7: op = _.ops.pop(); _.trys.pop(); continue;
                default:
                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }
                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }
                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }
                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }
                    if (t[2]) _.ops.pop();
                    _.trys.pop(); continue;
            }
            op = body.call(thisArg, _);
        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }
        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };
    }
};
Object.defineProperty(exports, "__esModule", ({ value: true }));
var bundle_1 = __webpack_require__(/*! @easepick/bundle */ "./node_modules/@easepick/bundle/dist/index.esm.js");
// --get cart items from hidden input for datepicker--
var cartEventsHiddenInput = document.querySelector('#carts-events-hidden-input');
var carts = JSON.parse(cartEventsHiddenInput.value);
// variable to set default image to brand dynamically in modal window. Can we get link from the internet?
var defaultImage = 'https://funko.com/on/demandware.static/-/Sites-funko-master-catalog/default/dwbb38a111/images/funko/upload/55998_CocaCola_S2_SpriteBottleCap_POP_GLAM-WEB.png';
// --count total quantity and price--
var totalPriceElement = document.querySelector('#cart-total-price');
var totalQuantityElement = document.querySelector('#cart-total-quantity');
var tableCartItems = document.querySelectorAll('.table-cart-item');
var submitBtn = document.querySelector('#cart-ship-request-submit-btn');
var totalPrice = 0;
var totalQuantity = 0;
var hasEventGroup = false;
// check if cart has event group
tableCartItems.forEach(function (item) {
    console.log('item', item);
    var group = item.getAttribute('data-target-group');
    if (group === 'Events') {
        hasEventGroup = true;
    }
    var priceElement = item.querySelector('.cart-item-retail_price');
    var quantityElement = item.querySelector('.cart-item-quantity');
    var availableProductQuantity = quantityElement.getAttribute('data-target-available-quantity');
    var price = parseFloat(priceElement.textContent);
    var quantity = parseInt(quantityElement.value);
    var totalPriceOneElement = price * quantity;
    totalPrice += totalPriceOneElement;
    totalQuantity += quantity;
    quantityElement.max = availableProductQuantity;
});
totalPriceElement.textContent = "$".concat(totalPrice.toFixed(2));
totalQuantityElement.textContent = totalQuantity.toString();
// add event date range, disable submit button if cart has event group
if (hasEventGroup) {
    var eventContainer = document.querySelector('#cart-event-container');
    eventContainer.classList.remove('hidden');
    eventContainer.classList.add('flex');
}
else {
    submitBtn.removeAttribute('disabled');
}
// --add delivery form when create ship request--
var deliverToStoreBtn = document.querySelector('#cart-deliver-to-store-btn');
var createStoreRequestContainer = document.querySelector('#cart-create-store-request-container');
deliverToStoreBtn.addEventListener('click', function () {
    createStoreRequestContainer.style.display = 'block';
});
// --delete cart item--
var deleteButtons = document.querySelectorAll('.delete-cart-item-btn');
deleteButtons.forEach(function (e) {
    e.addEventListener('click', function () { return __awaiter(void 0, void 0, void 0, function () {
        var id, response;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    if (!confirm('Are sure?')) return [3 /*break*/, 2];
                    id = e.getAttribute('data-cart-item-id');
                    return [4 /*yield*/, fetch("/cart/delete/".concat(id), {
                            method: 'DELETE',
                        })];
                case 1:
                    response = _a.sent();
                    if (response.status == 200) {
                        location.reload();
                    }
                    _a.label = 2;
                case 2: return [2 /*return*/];
            }
        });
    }); });
});
// --show/hide favorite store in dropdown--
var favoriteCheckbox = document.querySelector('#cart-favorite-store-checkbox');
var storeSelect = document.querySelector('#cart-store-select');
var optionsStore = document.querySelectorAll('.cart-store-option');
favoriteCheckbox.addEventListener('change', function () {
    var showFavoriteStore = favoriteCheckbox.checked;
    for (var i = 0; i < optionsStore.length; i++) {
        var isFavorite = optionsStore[i].getAttribute('data-target-favorite');
        if (showFavoriteStore && isFavorite !== 'True') {
            ;
            optionsStore[i].style.display = 'none';
        }
        else {
            ;
            optionsStore[i].style.display = 'block';
        }
    }
});
var storeCategorySelect = document.querySelector('#cart-store-request-category-select');
var options = storeCategorySelect.querySelectorAll('option');
storeCategorySelect.addEventListener('change', function () {
    options.forEach(function (e) {
        if (e.textContent === storeCategorySelect.options[storeCategorySelect.selectedIndex].text) {
            var storeSelect_1 = document.querySelector('#cart-store-select');
            var optionCategory = JSON.parse(e.getAttribute('data-target-store-category-store'));
            document.getElementById('cart-store-select').innerHTML = '';
            if (optionCategory) {
                optionCategory.store_category_store.forEach(function (e) {
                    var storeSelectOption = document.createElement('option');
                    console.log('e.id', e.store_id);
                    console.log('storeSelect', storeSelect_1);
                    storeSelectOption.setAttribute('value', e.store_id.toString());
                    storeSelectOption.textContent = e.store_name;
                    storeSelect_1.appendChild(storeSelectOption);
                });
            }
        }
    });
});
// --display only sales rep locker--
var salesRepLockerCheckbox = document.querySelector('#cart-sales-rep-locker-checkbox');
if (salesRepLockerCheckbox) {
    salesRepLockerCheckbox.addEventListener('change', function () {
        var favoriteStoreContainer = document.querySelector('#cart-store-container');
        var lockerStoreCategoryIds = JSON.parse(salesRepLockerCheckbox.getAttribute('data-target-locker-store-category-ids'));
        var oldStoreCategoryOptions = storeCategorySelect.querySelectorAll('option');
        var oldStoreOptions = storeSelect.querySelectorAll('option');
        if (salesRepLockerCheckbox.checked) {
            var newStoreCategoryOption = new Option('Locker', lockerStoreCategoryIds[1], true, true);
            var newStoreOption = new Option(' Locker Store', lockerStoreCategoryIds[0], true, true);
            favoriteStoreContainer.classList.add('invisible');
            oldStoreCategoryOptions.forEach(function (e) {
                e.disabled = true;
            });
            storeSelect.appendChild(newStoreOption);
            storeSelect.value = lockerStoreCategoryIds[0].toString();
            storeCategorySelect.appendChild(newStoreCategoryOption);
        }
        else {
            favoriteStoreContainer.classList.remove('invisible');
            storeSelect.removeChild(oldStoreOptions[oldStoreOptions.length - 1]);
            storeCategorySelect.removeChild(oldStoreCategoryOptions[oldStoreCategoryOptions.length - 1]);
            oldStoreCategoryOptions.forEach(function (e, i) {
                if (i !== 0) {
                    e.disabled = false;
                }
            });
            storeSelect.selectedIndex = 0;
            storeCategorySelect.selectedIndex = 0;
        }
    });
}
var eventButtons = document.querySelectorAll('.cart-item-event-button');
eventButtons.forEach(function (btn) {
    btn.addEventListener('click', function () {
        var cart = JSON.parse(btn.getAttribute('data-target-cart'));
        console.log('cart', cart);
        var div = document.querySelector('#product-event-name');
        div.innerHTML = cart.product.name;
        div = document.querySelector('#product-event-SKU');
        div.innerHTML = cart.product.SKU;
        var img = document.querySelector('#product-event-image');
        cart.product.image.length > 100
            ? (img.src = "data:image/png;base64, ".concat(cart.product.image))
            : (img.src = defaultImage);
        var input = document.querySelector('#product-event-quantity');
        input.value = cart.quantity.toString();
        input.min = '1';
        input = document.querySelector('#product-event-cart-id-hidden');
        input.value = cart.id.toString();
        input = document.querySelector('#product-event-product-id');
        input.value = cart.product.id.toString();
    });
});
var DateTime = bundle_1.easepick.DateTime;
function formatDate(date) {
    var year = date.getFullYear();
    var month = (date.getMonth() + 1).toString();
    var day = date.getDate().toString();
    return "".concat(year, "-").concat(month, "-").concat(day);
}
function getFirstAndLastDate() {
    var today = new Date();
    var fifthDayBefore = new Date(today);
    fifthDayBefore.setDate(today.getDate() - 5);
    var fifthDayAfter = new Date(today);
    fifthDayAfter.setDate(today.getDate() + 6);
    return [formatDate(fifthDayBefore), formatDate(fifthDayAfter)];
}
var bookedDates = [getFirstAndLastDate()].map(function (d) {
    if (d instanceof Array) {
        var start = new Date(d[0]);
        var end = new Date(d[1]);
        return [start, end];
    }
    return new DateTime(d, 'YYYY-MM-DD');
});
var picker = new bundle_1.easepick.create({
    element: document.getElementById('datepicker'),
    css: [
        'https://cdn.jsdelivr.net/npm/@easepick/bundle@1.2.1/dist/index.css',
        'https://easepick.com/css/demo_hotelcal.css',
    ],
    plugins: ['RangePlugin', 'LockPlugin'],
    RangePlugin: {
        tooltipNumber: function (num) {
            return num - 1;
        },
    },
    LockPlugin: {
        minDate: new Date(),
        minDays: 1,
        inseparable: true,
        filter: function (date, picked) {
            if (picked.length === 1) {
                var incl = date.isBefore(picked[0]) ? '[)' : '(]';
                return !picked[0].isSame(date, 'day') && date.inArray(bookedDates, incl);
            }
            return date.inArray(bookedDates, '[)');
        },
    },
    setup: function (picker) {
        var _this = this;
        picker.on('select', function (evt) { return __awaiter(_this, void 0, void 0, function () {
            var _a, view, date, target, startDate, endDate, availableEventQuantity, errorMessages;
            return __generator(this, function (_b) {
                switch (_b.label) {
                    case 0:
                        _a = evt.detail, view = _a.view, date = _a.date, target = _a.target;
                        startDate = evt.detail.start.getFullYear() + '_' + (evt.detail.start.getMonth() + 1) + '_' + evt.detail.start.getDate();
                        endDate = evt.detail.end.getFullYear() + '_' + (evt.detail.end.getMonth() + 1) + '_' + evt.detail.end.getDate();
                        return [4 /*yield*/, getEventAvailableQuantityByDate(carts, startDate, endDate)];
                    case 1:
                        availableEventQuantity = _b.sent();
                        if (availableEventQuantity.length !== 0) {
                            errorMessages = availableEventQuantity.map(function (e) { return e.error; });
                            alert('Maximum quantity exceeded!' + '\n' + errorMessages.join('\n'));
                            return [2 /*return*/];
                        }
                        else {
                            submitBtn.removeAttribute('disabled');
                        }
                        return [2 /*return*/];
                }
            });
        }); });
    },
});
function getEventAvailableQuantityByDate(carts, dateFrom, dateTo) {
    return __awaiter(this, void 0, void 0, function () {
        var uniqCarts, fetchPromises, resultAllPromises, results;
        var _this = this;
        return __generator(this, function (_a) {
            switch (_a.label) {
                case 0:
                    uniqCarts = carts.reduce(function (accCartItem, cart) {
                        var foundedCart = accCartItem.find(function (cartItem) { return cartItem.product_id === cart.product_id && cartItem.group === cart.group; });
                        if (foundedCart) {
                            foundedCart.quantity += cart.quantity;
                        }
                        else {
                            accCartItem.push(cart);
                        }
                        return accCartItem;
                    }, []);
                    fetchPromises = uniqCarts.map(function (cart) { return __awaiter(_this, void 0, void 0, function () {
                        var response, message, data_1, data;
                        return __generator(this, function (_a) {
                            switch (_a.label) {
                                case 0: return [4 /*yield*/, fetch("/event/get_available_quantity_by_date?date_from=".concat(dateFrom, "&date_to=").concat(dateTo, "&group_name=").concat(cart.group, "&product_id=").concat(cart.product_id, "&quantity=").concat(cart.quantity))];
                                case 1:
                                    response = _a.sent();
                                    if (!(response.status !== 200)) return [3 /*break*/, 3];
                                    return [4 /*yield*/, response.json()];
                                case 2:
                                    message = _a.sent();
                                    data_1 = {
                                        cartId: cart.id,
                                        error: message,
                                        status: false,
                                    };
                                    return [2 /*return*/, data_1];
                                case 3:
                                    data = {
                                        cartId: cart.id,
                                        status: true,
                                    };
                                    return [2 /*return*/, data];
                            }
                        });
                    }); });
                    resultAllPromises = [];
                    return [4 /*yield*/, Promise.all(fetchPromises)];
                case 1:
                    results = _a.sent();
                    results.forEach(function (result) {
                        if (result.status !== true) {
                            return resultAllPromises.push(result);
                        }
                    });
                    return [2 /*return*/, resultAllPromises];
            }
        });
    });
}


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module is referenced by other modules so it can't be inlined
/******/ 	var __webpack_exports__ = __webpack_require__("./src/cart.ts");
/******/ 	
/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1VBQ0E7VUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3N0YXRpYy8uL25vZGVfbW9kdWxlcy9AZWFzZXBpY2svYnVuZGxlL2Rpc3QvaW5kZXguZXNtLmpzIiwid2VicGFjazovL3N0YXRpYy8uL3NyYy9jYXJ0LnRzIiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9zdGF0aWMvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL3J1bnRpbWUvaGFzT3duUHJvcGVydHkgc2hvcnRoYW5kIiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL2JlZm9yZS1zdGFydHVwIiwid2VicGFjazovL3N0YXRpYy93ZWJwYWNrL3N0YXJ0dXAiLCJ3ZWJwYWNrOi8vc3RhdGljL3dlYnBhY2svYWZ0ZXItc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyB0IGV4dGVuZHMgRGF0ZXtzdGF0aWMgcGFyc2VEYXRlVGltZShlLGk9XCJZWVlZLU1NLUREXCIsbj1cImVuLVVTXCIpe2lmKCFlKXJldHVybiBuZXcgRGF0ZSgobmV3IERhdGUpLnNldEhvdXJzKDAsMCwwLDApKTtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4gZS50b0pTRGF0ZSgpO2lmKGUgaW5zdGFuY2VvZiBEYXRlKXJldHVybiBlO2lmKC9eLT9cXGR7MTAsfSQvLnRlc3QoU3RyaW5nKGUpKSlyZXR1cm4gbmV3IERhdGUoTnVtYmVyKGUpKTtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Y29uc3Qgcz1bXTtsZXQgbz1udWxsO2Zvcig7bnVsbCE9KG89dC5yZWdleC5leGVjKGkpKTspXCJcXFxcXCIhPT1vWzFdJiZzLnB1c2gobyk7aWYocy5sZW5ndGgpe2NvbnN0IGk9e3llYXI6bnVsbCxtb250aDpudWxsLHNob3J0TW9udGg6bnVsbCxsb25nTW9udGg6bnVsbCxkYXk6bnVsbCxob3VyOjAsbWludXRlOjAsc2Vjb25kOjAsYW1wbTpudWxsLHZhbHVlOlwiXCJ9O3NbMF0uaW5kZXg+MCYmKGkudmFsdWUrPVwiLio/XCIpO2Zvcihjb25zdFtlLG9db2YgT2JqZWN0LmVudHJpZXMocykpe2NvbnN0IHM9TnVtYmVyKGUpLHtncm91cDphLHBhdHRlcm46cn09dC5mb3JtYXRQYXR0ZXJucyhvWzBdLG4pO2lbYV09cysxLGkudmFsdWUrPXIsaS52YWx1ZSs9XCIuKj9cIn1jb25zdCBvPW5ldyBSZWdFeHAoYF4ke2kudmFsdWV9JGApO2lmKG8udGVzdChlKSl7Y29uc3Qgcz1vLmV4ZWMoZSksYT1OdW1iZXIoc1tpLnllYXJdKTtsZXQgcj1udWxsO2kubW9udGg/cj1OdW1iZXIoc1tpLm1vbnRoXSktMTppLnNob3J0TW9udGg/cj10LnNob3J0TW9udGhzKG4pLmluZGV4T2Yoc1tpLnNob3J0TW9udGhdKTppLmxvbmdNb250aCYmKHI9dC5sb25nTW9udGhzKG4pLmluZGV4T2Yoc1tpLmxvbmdNb250aF0pKTtjb25zdCBjPU51bWJlcihzW2kuZGF5XSl8fDEsbD1OdW1iZXIoc1tpLmhvdXJdKTtsZXQgaD1OdW1iZXIuaXNOYU4obCk/MDpsO2NvbnN0IGQ9TnVtYmVyKHNbaS5taW51dGVdKSxwPU51bWJlci5pc05hTihkKT8wOmQsdT1OdW1iZXIoc1tpLnNlY29uZF0pLGc9TnVtYmVyLmlzTmFOKHUpPzA6dSxtPXNbaS5hbXBtXTtyZXR1cm4gbSYmXCJQTVwiPT09bSYmKGgrPTEyLDI0PT09aCYmKGg9MCkpLG5ldyBEYXRlKGEscixjLGgscCxnLDApfX19cmV0dXJuIG5ldyBEYXRlKChuZXcgRGF0ZSkuc2V0SG91cnMoMCwwLDAsMCkpfXN0YXRpYyByZWdleD0vKFxcXFwpPyhZezIsNH18TXsxLDR9fER7MSwyfXxIezEsMn18aHsxLDJ9fG17MSwyfXxzezEsMn18QXxhKS9nO3N0YXRpYyBNT05USF9KUz1bMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMV07c3RhdGljIHNob3J0TW9udGhzKGUpe3JldHVybiB0Lk1PTlRIX0pTLm1hcCgodD0+bmV3IERhdGUoMjAxOSx0KS50b0xvY2FsZVN0cmluZyhlLHttb250aDpcInNob3J0XCJ9KSkpfXN0YXRpYyBsb25nTW9udGhzKGUpe3JldHVybiB0Lk1PTlRIX0pTLm1hcCgodD0+bmV3IERhdGUoMjAxOSx0KS50b0xvY2FsZVN0cmluZyhlLHttb250aDpcImxvbmdcIn0pKSl9c3RhdGljIGZvcm1hdFBhdHRlcm5zKGUsaSl7c3dpdGNoKGUpe2Nhc2VcIllZXCI6Y2FzZVwiWVlZWVwiOnJldHVybntncm91cDpcInllYXJcIixwYXR0ZXJuOmAoXFxcXGR7JHtlLmxlbmd0aH19KWB9O2Nhc2VcIk1cIjpyZXR1cm57Z3JvdXA6XCJtb250aFwiLHBhdHRlcm46XCIoXFxcXGR7MSwyfSlcIn07Y2FzZVwiTU1cIjpyZXR1cm57Z3JvdXA6XCJtb250aFwiLHBhdHRlcm46XCIoXFxcXGR7Mn0pXCJ9O2Nhc2VcIk1NTVwiOnJldHVybntncm91cDpcInNob3J0TW9udGhcIixwYXR0ZXJuOmAoJHt0LnNob3J0TW9udGhzKGkpLmpvaW4oXCJ8XCIpfSlgfTtjYXNlXCJNTU1NXCI6cmV0dXJue2dyb3VwOlwibG9uZ01vbnRoXCIscGF0dGVybjpgKCR7dC5sb25nTW9udGhzKGkpLmpvaW4oXCJ8XCIpfSlgfTtjYXNlXCJEXCI6cmV0dXJue2dyb3VwOlwiZGF5XCIscGF0dGVybjpcIihcXFxcZHsxLDJ9KVwifTtjYXNlXCJERFwiOnJldHVybntncm91cDpcImRheVwiLHBhdHRlcm46XCIoXFxcXGR7Mn0pXCJ9O2Nhc2VcImhcIjpjYXNlXCJIXCI6cmV0dXJue2dyb3VwOlwiaG91clwiLHBhdHRlcm46XCIoXFxcXGR7MSwyfSlcIn07Y2FzZVwiaGhcIjpjYXNlXCJISFwiOnJldHVybntncm91cDpcImhvdXJcIixwYXR0ZXJuOlwiKFxcXFxkezJ9KVwifTtjYXNlXCJtXCI6cmV0dXJue2dyb3VwOlwibWludXRlXCIscGF0dGVybjpcIihcXFxcZHsxLDJ9KVwifTtjYXNlXCJtbVwiOnJldHVybntncm91cDpcIm1pbnV0ZVwiLHBhdHRlcm46XCIoXFxcXGR7Mn0pXCJ9O2Nhc2VcInNcIjpyZXR1cm57Z3JvdXA6XCJzZWNvbmRcIixwYXR0ZXJuOlwiKFxcXFxkezEsMn0pXCJ9O2Nhc2VcInNzXCI6cmV0dXJue2dyb3VwOlwic2Vjb25kXCIscGF0dGVybjpcIihcXFxcZHsyfSlcIn07Y2FzZVwiYVwiOmNhc2VcIkFcIjpyZXR1cm57Z3JvdXA6XCJhbXBtXCIscGF0dGVybjpcIihBTXxQTXxhbXxwbSlcIn19fWxhbmc7Y29uc3RydWN0b3IoZT1udWxsLGk9XCJZWVlZLU1NLUREXCIsbj1cImVuLVVTXCIpe3N1cGVyKHQucGFyc2VEYXRlVGltZShlLGksbikpLHRoaXMubGFuZz1ufWdldFdlZWsodCl7Y29uc3QgZT1uZXcgRGF0ZSh0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpKSxpPSh0aGlzLmdldERheSgpKyg3LXQpKSU3O2Uuc2V0RGF0ZShlLmdldERhdGUoKS1pKTtjb25zdCBuPWUuZ2V0VGltZSgpO3JldHVybiBlLnNldE1vbnRoKDAsMSksZS5nZXREYXkoKSE9PXQmJmUuc2V0TW9udGgoMCwxKyg0LWUuZ2V0RGF5KCkrNyklNyksMStNYXRoLmNlaWwoKG4tZS5nZXRUaW1lKCkpLzYwNDhlNSl9Y2xvbmUoKXtyZXR1cm4gbmV3IHQodGhpcyl9dG9KU0RhdGUoKXtyZXR1cm4gbmV3IERhdGUodGhpcyl9aW5BcnJheSh0LGU9XCJbXVwiKXtyZXR1cm4gdC5zb21lKCh0PT50IGluc3RhbmNlb2YgQXJyYXk/dGhpcy5pc0JldHdlZW4odFswXSx0WzFdLGUpOnRoaXMuaXNTYW1lKHQsXCJkYXlcIikpKX1pc0JldHdlZW4odCxlLGk9XCIoKVwiKXtzd2l0Y2goaSl7ZGVmYXVsdDpjYXNlXCIoKVwiOnJldHVybiB0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpPnRoaXMubWlkbmlnaHRfdHModCkmJnRoaXMubWlkbmlnaHRfdHModGhpcyk8dGhpcy5taWRuaWdodF90cyhlKTtjYXNlXCJbKVwiOnJldHVybiB0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpPj10aGlzLm1pZG5pZ2h0X3RzKHQpJiZ0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpPHRoaXMubWlkbmlnaHRfdHMoZSk7Y2FzZVwiKF1cIjpyZXR1cm4gdGhpcy5taWRuaWdodF90cyh0aGlzKT50aGlzLm1pZG5pZ2h0X3RzKHQpJiZ0aGlzLm1pZG5pZ2h0X3RzKHRoaXMpPD10aGlzLm1pZG5pZ2h0X3RzKGUpO2Nhc2VcIltdXCI6cmV0dXJuIHRoaXMubWlkbmlnaHRfdHMoKT49dGhpcy5taWRuaWdodF90cyh0KSYmdGhpcy5taWRuaWdodF90cygpPD10aGlzLm1pZG5pZ2h0X3RzKGUpfX1pc0JlZm9yZSh0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6cmV0dXJuIG5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCkpLmdldFRpbWUoKT5uZXcgRGF0ZSh0aGlzLmdldEZ1bGxZZWFyKCksdGhpcy5nZXRNb250aCgpLHRoaXMuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjpyZXR1cm4gbmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk+bmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk7Y2FzZVwieWVhclwiOmNhc2VcInllYXJzXCI6cmV0dXJuIHQuZ2V0RnVsbFllYXIoKT50aGlzLmdldEZ1bGxZZWFyKCl9dGhyb3cgbmV3IEVycm9yKFwiaXNCZWZvcmU6IEludmFsaWQgdW5pdCFcIil9aXNTYW1lT3JCZWZvcmUodCxlPVwiZGF5c1wiKXtzd2l0Y2goZSl7Y2FzZVwiZGF5XCI6Y2FzZVwiZGF5c1wiOnJldHVybiBuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk+PW5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXRlKCkpLmdldFRpbWUoKTtjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOnJldHVybiBuZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLDEpLmdldFRpbWUoKT49bmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCl9dGhyb3cgbmV3IEVycm9yKFwiaXNTYW1lT3JCZWZvcmU6IEludmFsaWQgdW5pdCFcIil9aXNBZnRlcih0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6cmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXRlKCkpLmdldFRpbWUoKT5uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk+bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk7Y2FzZVwieWVhclwiOmNhc2VcInllYXJzXCI6cmV0dXJuIHRoaXMuZ2V0RnVsbFllYXIoKT50LmdldEZ1bGxZZWFyKCl9dGhyb3cgbmV3IEVycm9yKFwiaXNBZnRlcjogSW52YWxpZCB1bml0IVwiKX1pc1NhbWVPckFmdGVyKHQsZT1cImRheXNcIil7c3dpdGNoKGUpe2Nhc2VcImRheVwiOmNhc2VcImRheXNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSkuZ2V0VGltZSgpPj1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLHQuZ2V0RGF0ZSgpKS5nZXRUaW1lKCk7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCk+PW5ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksMSkuZ2V0VGltZSgpfXRocm93IG5ldyBFcnJvcihcImlzU2FtZU9yQWZ0ZXI6IEludmFsaWQgdW5pdCFcIil9aXNTYW1lKHQsZT1cImRheXNcIil7c3dpdGNoKGUpe2Nhc2VcImRheVwiOmNhc2VcImRheXNcIjpyZXR1cm4gbmV3IERhdGUodGhpcy5nZXRGdWxsWWVhcigpLHRoaXMuZ2V0TW9udGgoKSx0aGlzLmdldERhdGUoKSkuZ2V0VGltZSgpPT09bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSx0LmdldERhdGUoKSkuZ2V0VGltZSgpO2Nhc2VcIm1vbnRoXCI6Y2FzZVwibW9udGhzXCI6cmV0dXJuIG5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksMSkuZ2V0VGltZSgpPT09bmV3IERhdGUodC5nZXRGdWxsWWVhcigpLHQuZ2V0TW9udGgoKSwxKS5nZXRUaW1lKCl9dGhyb3cgbmV3IEVycm9yKFwiaXNTYW1lOiBJbnZhbGlkIHVuaXQhXCIpfWFkZCh0LGU9XCJkYXlzXCIpe3N3aXRjaChlKXtjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6dGhpcy5zZXREYXRlKHRoaXMuZ2V0RGF0ZSgpK3QpO2JyZWFrO2Nhc2VcIm1vbnRoXCI6Y2FzZVwibW9udGhzXCI6dGhpcy5zZXRNb250aCh0aGlzLmdldE1vbnRoKCkrdCl9cmV0dXJuIHRoaXN9c3VidHJhY3QodCxlPVwiZGF5c1wiKXtzd2l0Y2goZSl7Y2FzZVwiZGF5XCI6Y2FzZVwiZGF5c1wiOnRoaXMuc2V0RGF0ZSh0aGlzLmdldERhdGUoKS10KTticmVhaztjYXNlXCJtb250aFwiOmNhc2VcIm1vbnRoc1wiOnRoaXMuc2V0TW9udGgodGhpcy5nZXRNb250aCgpLXQpfXJldHVybiB0aGlzfWRpZmYodCxlPVwiZGF5c1wiKXtzd2l0Y2goZSl7ZGVmYXVsdDpjYXNlXCJkYXlcIjpjYXNlXCJkYXlzXCI6cmV0dXJuIE1hdGgucm91bmQoKHRoaXMubWlkbmlnaHRfdHMoKS10aGlzLm1pZG5pZ2h0X3RzKHQpKS84NjRlNSk7Y2FzZVwibW9udGhcIjpjYXNlXCJtb250aHNcIjpsZXQgZT0xMioodC5nZXRGdWxsWWVhcigpLXRoaXMuZ2V0RnVsbFllYXIoKSk7cmV0dXJuIGUtPXQuZ2V0TW9udGgoKSxlKz10aGlzLmdldE1vbnRoKCksZX19Zm9ybWF0KGUsaT1cImVuLVVTXCIpe2xldCBuPVwiXCI7Y29uc3Qgcz1bXTtsZXQgbz1udWxsO2Zvcig7bnVsbCE9KG89dC5yZWdleC5leGVjKGUpKTspXCJcXFxcXCIhPT1vWzFdJiZzLnB1c2gobyk7aWYocy5sZW5ndGgpe3NbMF0uaW5kZXg+MCYmKG4rPWUuc3Vic3RyaW5nKDAsc1swXS5pbmRleCkpO2Zvcihjb25zdFt0LG9db2YgT2JqZWN0LmVudHJpZXMocykpe2NvbnN0IGE9TnVtYmVyKHQpO24rPXRoaXMuZm9ybWF0VG9rZW5zKG9bMF0saSksc1thKzFdJiYobis9ZS5zdWJzdHJpbmcoby5pbmRleCtvWzBdLmxlbmd0aCxzW2ErMV0uaW5kZXgpKSxhPT09cy5sZW5ndGgtMSYmKG4rPWUuc3Vic3RyaW5nKG8uaW5kZXgrb1swXS5sZW5ndGgpKX19cmV0dXJuIG4ucmVwbGFjZSgvXFxcXC9nLFwiXCIpfW1pZG5pZ2h0X3RzKHQpe3JldHVybiB0P25ldyBEYXRlKHQuZ2V0RnVsbFllYXIoKSx0LmdldE1vbnRoKCksdC5nZXREYXRlKCksMCwwLDAsMCkuZ2V0VGltZSgpOm5ldyBEYXRlKHRoaXMuZ2V0RnVsbFllYXIoKSx0aGlzLmdldE1vbnRoKCksdGhpcy5nZXREYXRlKCksMCwwLDAsMCkuZ2V0VGltZSgpfWZvcm1hdFRva2VucyhlLGkpe3N3aXRjaChlKXtjYXNlXCJZWVwiOnJldHVybiBTdHJpbmcodGhpcy5nZXRGdWxsWWVhcigpKS5zbGljZSgtMik7Y2FzZVwiWVlZWVwiOnJldHVybiBTdHJpbmcodGhpcy5nZXRGdWxsWWVhcigpKTtjYXNlXCJNXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldE1vbnRoKCkrMSk7Y2FzZVwiTU1cIjpyZXR1cm5gMCR7dGhpcy5nZXRNb250aCgpKzF9YC5zbGljZSgtMik7Y2FzZVwiTU1NXCI6cmV0dXJuIHQuc2hvcnRNb250aHMoaSlbdGhpcy5nZXRNb250aCgpXTtjYXNlXCJNTU1NXCI6cmV0dXJuIHQubG9uZ01vbnRocyhpKVt0aGlzLmdldE1vbnRoKCldO2Nhc2VcIkRcIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0RGF0ZSgpKTtjYXNlXCJERFwiOnJldHVybmAwJHt0aGlzLmdldERhdGUoKX1gLnNsaWNlKC0yKTtjYXNlXCJIXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldEhvdXJzKCkpO2Nhc2VcIkhIXCI6cmV0dXJuYDAke3RoaXMuZ2V0SG91cnMoKX1gLnNsaWNlKC0yKTtjYXNlXCJoXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldEhvdXJzKCklMTJ8fDEyKTtjYXNlXCJoaFwiOnJldHVybmAwJHt0aGlzLmdldEhvdXJzKCklMTJ8fDEyfWAuc2xpY2UoLTIpO2Nhc2VcIm1cIjpyZXR1cm4gU3RyaW5nKHRoaXMuZ2V0TWludXRlcygpKTtjYXNlXCJtbVwiOnJldHVybmAwJHt0aGlzLmdldE1pbnV0ZXMoKX1gLnNsaWNlKC0yKTtjYXNlXCJzXCI6cmV0dXJuIFN0cmluZyh0aGlzLmdldFNlY29uZHMoKSk7Y2FzZVwic3NcIjpyZXR1cm5gMCR7dGhpcy5nZXRTZWNvbmRzKCl9YC5zbGljZSgtMik7Y2FzZVwiYVwiOnJldHVybiB0aGlzLmdldEhvdXJzKCk8MTJ8fDI0PT09dGhpcy5nZXRIb3VycygpP1wiYW1cIjpcInBtXCI7Y2FzZVwiQVwiOnJldHVybiB0aGlzLmdldEhvdXJzKCk8MTJ8fDI0PT09dGhpcy5nZXRIb3VycygpP1wiQU1cIjpcIlBNXCI7ZGVmYXVsdDpyZXR1cm5cIlwifX19Y2xhc3MgZXtwaWNrZXI7Y29uc3RydWN0b3IodCl7dGhpcy5waWNrZXI9dH1yZW5kZXIoZSxpKXtlfHwoZT1uZXcgdCksZS5zZXREYXRlKDEpLGUuc2V0SG91cnMoMCwwLDAsMCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpc1tgZ2V0JHtpfVZpZXdgXSYmdGhpc1tgZ2V0JHtpfVZpZXdgXShlKX1nZXRDb250YWluZXJWaWV3KHQpe3RoaXMucGlja2VyLnVpLmNvbnRhaW5lci5pbm5lckhUTUw9XCJcIix0aGlzLnBpY2tlci5vcHRpb25zLmhlYWRlciYmdGhpcy5waWNrZXIudHJpZ2dlcihcInJlbmRlclwiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiSGVhZGVyXCJ9KSx0aGlzLnBpY2tlci50cmlnZ2VyKFwicmVuZGVyXCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJNYWluXCJ9KSx0aGlzLnBpY2tlci5vcHRpb25zLmF1dG9BcHBseXx8dGhpcy5waWNrZXIudHJpZ2dlcihcInJlbmRlclwiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiRm9vdGVyXCJ9KX1nZXRIZWFkZXJWaWV3KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImhlYWRlclwiKTt0aGlzLnBpY2tlci5vcHRpb25zLmhlYWRlciBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiZlLmFwcGVuZENoaWxkKHRoaXMucGlja2VyLm9wdGlvbnMuaGVhZGVyKSxcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5waWNrZXIub3B0aW9ucy5oZWFkZXImJihlLmlubmVySFRNTD10aGlzLnBpY2tlci5vcHRpb25zLmhlYWRlciksdGhpcy5waWNrZXIudWkuY29udGFpbmVyLmFwcGVuZENoaWxkKGUpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse3RhcmdldDplLGRhdGU6dC5jbG9uZSgpLHZpZXc6XCJIZWFkZXJcIn0pfWdldE1haW5WaWV3KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1haW5cIik7dGhpcy5waWNrZXIudWkuY29udGFpbmVyLmFwcGVuZENoaWxkKGUpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTmFtZT1gY2FsZW5kYXJzIGdyaWQtJHt0aGlzLnBpY2tlci5vcHRpb25zLmdyaWR9YDtmb3IobGV0IGU9MDtlPHRoaXMucGlja2VyLm9wdGlvbnMuY2FsZW5kYXJzO2UrKyl7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO24uY2xhc3NOYW1lPVwiY2FsZW5kYXJcIixpLmFwcGVuZENoaWxkKG4pO2NvbnN0IHM9dGhpcy5nZXRDYWxlbmRhckhlYWRlclZpZXcodC5jbG9uZSgpKTtuLmFwcGVuZENoaWxkKHMpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJDYWxlbmRhckhlYWRlclwiLGluZGV4OmUsdGFyZ2V0OnN9KTtjb25zdCBvPXRoaXMuZ2V0Q2FsZW5kYXJEYXlOYW1lc1ZpZXcoKTtuLmFwcGVuZENoaWxkKG8pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RhdGU6dC5jbG9uZSgpLHZpZXc6XCJDYWxlbmRhckRheU5hbWVzXCIsaW5kZXg6ZSx0YXJnZXQ6b30pO2NvbnN0IGE9dGhpcy5nZXRDYWxlbmRhckRheXNWaWV3KHQuY2xvbmUoKSk7bi5hcHBlbmRDaGlsZChhKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiQ2FsZW5kYXJEYXlzXCIsaW5kZXg6ZSx0YXJnZXQ6YX0pO2NvbnN0IHI9dGhpcy5nZXRDYWxlbmRhckZvb3RlclZpZXcodGhpcy5waWNrZXIub3B0aW9ucy5sYW5nLHQuY2xvbmUoKSk7bi5hcHBlbmRDaGlsZChyKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiQ2FsZW5kYXJGb290ZXJcIixpbmRleDplLHRhcmdldDpyfSksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7ZGF0ZTp0LmNsb25lKCksdmlldzpcIkNhbGVuZGFySXRlbVwiLGluZGV4OmUsdGFyZ2V0Om59KSx0LmFkZCgxLFwibW9udGhcIil9ZS5hcHBlbmRDaGlsZChpKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiQ2FsZW5kYXJzXCIsdGFyZ2V0Oml9KSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQuY2xvbmUoKSx2aWV3OlwiTWFpblwiLHRhcmdldDplfSl9Z2V0Rm9vdGVyVmlldyh0KXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb290ZXJcIiksaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2kuY2xhc3NOYW1lPVwiZm9vdGVyLWJ1dHRvbnNcIjtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7bi5jbGFzc05hbWU9XCJjYW5jZWwtYnV0dG9uIHVuaXRcIixuLmlubmVySFRNTD10aGlzLnBpY2tlci5vcHRpb25zLmxvY2FsZS5jYW5jZWwsaS5hcHBlbmRDaGlsZChuKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cy5jbGFzc05hbWU9XCJhcHBseS1idXR0b24gdW5pdFwiLHMuaW5uZXJIVE1MPXRoaXMucGlja2VyLm9wdGlvbnMubG9jYWxlLmFwcGx5LHMuZGlzYWJsZWQ9ITAsaS5hcHBlbmRDaGlsZChzKSxlLmFwcGVuZENoaWxkKGkpLHRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5hcHBlbmRDaGlsZChlKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQsdGFyZ2V0OmUsdmlldzpcIkZvb3RlclwifSl9Z2V0Q2FsZW5kYXJIZWFkZXJWaWV3KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTmFtZT1cImhlYWRlclwiO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLmNsYXNzTmFtZT1cIm1vbnRoLW5hbWVcIixpLmlubmVySFRNTD1gPHNwYW4+JHt0LnRvTG9jYWxlU3RyaW5nKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyx7bW9udGg6XCJsb25nXCJ9KX08L3NwYW4+ICR7dC5mb3JtYXQoXCJZWVlZXCIpfWAsZS5hcHBlbmRDaGlsZChpKTtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7bi5jbGFzc05hbWU9XCJwcmV2aW91cy1idXR0b24gdW5pdFwiLG4uaW5uZXJIVE1MPXRoaXMucGlja2VyLm9wdGlvbnMubG9jYWxlLnByZXZpb3VzTW9udGgsZS5hcHBlbmRDaGlsZChuKTtjb25zdCBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cmV0dXJuIHMuY2xhc3NOYW1lPVwibmV4dC1idXR0b24gdW5pdFwiLHMuaW5uZXJIVE1MPXRoaXMucGlja2VyLm9wdGlvbnMubG9jYWxlLm5leHRNb250aCxlLmFwcGVuZENoaWxkKHMpLGV9Z2V0Q2FsZW5kYXJEYXlOYW1lc1ZpZXcoKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5jbGFzc05hbWU9XCJkYXluYW1lcy1yb3dcIjtmb3IobGV0IGU9MTtlPD03O2UrKyl7Y29uc3QgaT0zK3RoaXMucGlja2VyLm9wdGlvbnMuZmlyc3REYXkrZSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5jbGFzc05hbWU9XCJkYXluYW1lXCIsbi5pbm5lckhUTUw9bmV3IERhdGUoMTk3MCwwLGksMTIsMCwwLDApLnRvTG9jYWxlU3RyaW5nKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyx7d2Vla2RheTpcInNob3J0XCJ9KSxuLnRpdGxlPW5ldyBEYXRlKDE5NzAsMCxpLDEyLDAsMCwwKS50b0xvY2FsZVN0cmluZyh0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcse3dlZWtkYXk6XCJsb25nXCJ9KSx0LmFwcGVuZENoaWxkKG4pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse2RheUlkeDppLHZpZXc6XCJDYWxlbmRhckRheU5hbWVcIix0YXJnZXQ6bn0pfXJldHVybiB0fWdldENhbGVuZGFyRGF5c1ZpZXcodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuY2xhc3NOYW1lPVwiZGF5cy1ncmlkXCI7Y29uc3QgaT10aGlzLmNhbGNPZmZzZXREYXlzKHQsdGhpcy5waWNrZXIub3B0aW9ucy5maXJzdERheSksbj0zMi1uZXcgRGF0ZSh0LmdldEZ1bGxZZWFyKCksdC5nZXRNb250aCgpLDMyKS5nZXREYXRlKCk7Zm9yKGxldCB0PTA7dDxpO3QrKyl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NOYW1lPVwib2Zmc2V0XCIsZS5hcHBlbmRDaGlsZCh0KX1mb3IobGV0IGk9MTtpPD1uO2krKyl7dC5zZXREYXRlKGkpO2NvbnN0IG49dGhpcy5nZXRDYWxlbmRhckRheVZpZXcodCk7ZS5hcHBlbmRDaGlsZChuKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwidmlld1wiLHtkYXRlOnQsdmlldzpcIkNhbGVuZGFyRGF5XCIsdGFyZ2V0Om59KX1yZXR1cm4gZX1nZXRDYWxlbmRhckRheVZpZXcoZSl7Y29uc3QgaT10aGlzLnBpY2tlci5vcHRpb25zLmRhdGU/bmV3IHQodGhpcy5waWNrZXIub3B0aW9ucy5kYXRlKTpudWxsLG49bmV3IHQscz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3JldHVybiBzLmNsYXNzTmFtZT1cImRheSB1bml0XCIscy5pbm5lckhUTUw9ZS5mb3JtYXQoXCJEXCIpLHMuZGF0YXNldC50aW1lPVN0cmluZyhlLmdldFRpbWUoKSksZS5pc1NhbWUobixcImRheVwiKSYmcy5jbGFzc0xpc3QuYWRkKFwidG9kYXlcIiksWzAsNl0uaW5jbHVkZXMoZS5nZXREYXkoKSkmJnMuY2xhc3NMaXN0LmFkZChcIndlZWtlbmRcIiksdGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGg/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXS5pc1NhbWUoZSxcImRheVwiKSYmcy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIik6aSYmZS5pc1NhbWUoaSxcImRheVwiKSYmcy5jbGFzc0xpc3QuYWRkKFwic2VsZWN0ZWRcIiksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7ZGF0ZTplLHZpZXc6XCJDYWxlbmRhckRheVwiLHRhcmdldDpzfSksc31nZXRDYWxlbmRhckZvb3RlclZpZXcodCxlKXtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7cmV0dXJuIGkuY2xhc3NOYW1lPVwiZm9vdGVyXCIsaX1jYWxjT2Zmc2V0RGF5cyh0LGUpe2xldCBpPXQuZ2V0RGF5KCktZTtyZXR1cm4gaTwwJiYoaSs9NyksaX19Y2xhc3MgaXtwaWNrZXI7aW5zdGFuY2VzPXt9O2NvbnN0cnVjdG9yKHQpe3RoaXMucGlja2VyPXR9aW5pdGlhbGl6ZSgpe2NvbnN0IHQ9W107dGhpcy5waWNrZXIub3B0aW9ucy5wbHVnaW5zLmZvckVhY2goKGU9PntcImZ1bmN0aW9uXCI9PXR5cGVvZiBlP3QucHVzaChuZXcgZSk6XCJzdHJpbmdcIj09dHlwZW9mIGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBlYXNlcGljayYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGVhc2VwaWNrLGUpP3QucHVzaChuZXcgZWFzZXBpY2tbZV0pOmNvbnNvbGUud2FybihgZWFzZXBpY2s6ICR7ZX0gbm90IGZvdW5kLmApfSkpLHQuc29ydCgoKHQsZSk9PnQucHJpb3JpdHk+ZS5wcmlvcml0eT8tMTp0LnByaW9yaXR5PGUucHJpb3JpdHl8fHQuZGVwZW5kZW5jaWVzLmxlbmd0aD5lLmRlcGVuZGVuY2llcy5sZW5ndGg/MTp0LmRlcGVuZGVuY2llcy5sZW5ndGg8ZS5kZXBlbmRlbmNpZXMubGVuZ3RoPy0xOjApKSx0LmZvckVhY2goKHQ9Pnt0LmF0dGFjaCh0aGlzLnBpY2tlciksdGhpcy5pbnN0YW5jZXNbdC5nZXROYW1lKCldPXR9KSl9Z2V0SW5zdGFuY2UodCl7cmV0dXJuIHRoaXMuaW5zdGFuY2VzW3RdfWFkZEluc3RhbmNlKHQpe2lmKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0aGlzLmluc3RhbmNlcyx0KSljb25zb2xlLndhcm4oYGVhc2VwaWNrOiAke3R9IGFscmVhZHkgYWRkZWQuYCk7ZWxzZXtpZihcInVuZGVmaW5lZFwiIT10eXBlb2YgZWFzZXBpY2smJk9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlYXNlcGljayx0KSl7Y29uc3QgZT1uZXcgZWFzZXBpY2tbdF07cmV0dXJuIGUuYXR0YWNoKHRoaXMucGlja2VyKSx0aGlzLmluc3RhbmNlc1tlLmdldE5hbWUoKV09ZSxlfWlmKFwidW5kZWZpbmVkXCIhPT10aGlzLmdldFBsdWdpbkZuKHQpKXtjb25zdCBlPW5ldyh0aGlzLmdldFBsdWdpbkZuKHQpKTtyZXR1cm4gZS5hdHRhY2godGhpcy5waWNrZXIpLHRoaXMuaW5zdGFuY2VzW2UuZ2V0TmFtZSgpXT1lLGV9Y29uc29sZS53YXJuKGBlYXNlcGljazogJHt0fSBub3QgZm91bmQuYCl9cmV0dXJuIG51bGx9cmVtb3ZlSW5zdGFuY2UodCl7cmV0dXJuIHQgaW4gdGhpcy5pbnN0YW5jZXMmJnRoaXMuaW5zdGFuY2VzW3RdLmRldGFjaCgpLGRlbGV0ZSB0aGlzLmluc3RhbmNlc1t0XX1yZWxvYWRJbnN0YW5jZSh0KXtyZXR1cm4gdGhpcy5yZW1vdmVJbnN0YW5jZSh0KSx0aGlzLmFkZEluc3RhbmNlKHQpfWdldFBsdWdpbkZuKHQpe3JldHVyblsuLi50aGlzLnBpY2tlci5vcHRpb25zLnBsdWdpbnNdLmZpbHRlcigoZT0+XCJmdW5jdGlvblwiPT10eXBlb2YgZSYmKG5ldyBlKS5nZXROYW1lKCk9PT10KSkuc2hpZnQoKX19Y2xhc3MgbntDYWxlbmRhcj1uZXcgZSh0aGlzKTtQbHVnaW5NYW5hZ2VyPW5ldyBpKHRoaXMpO2NhbGVuZGFycz1bXTtkYXRlUGlja2VkPVtdO2Nzc0xvYWRlZD0wO2JpbmRzPXtoaWRlUGlja2VyOnRoaXMuaGlkZVBpY2tlci5iaW5kKHRoaXMpLHNob3c6dGhpcy5zaG93LmJpbmQodGhpcyl9O29wdGlvbnM9e2RvYzpkb2N1bWVudCxjc3M6W10sZWxlbWVudDpudWxsLGZpcnN0RGF5OjEsZ3JpZDoxLGNhbGVuZGFyczoxLGxhbmc6XCJlbi1VU1wiLGRhdGU6bnVsbCxmb3JtYXQ6XCJZWVlZLU1NLUREXCIscmVhZG9ubHk6ITAsYXV0b0FwcGx5OiEwLGhlYWRlcjohMSxpbmxpbmU6ITEsc2Nyb2xsVG9EYXRlOiEwLGxvY2FsZTp7bmV4dE1vbnRoOic8c3ZnIHdpZHRoPVwiMTFcIiBoZWlnaHQ9XCIxNlwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTIuNzQ4IDE2TDAgMTMuMzMzIDUuMzMzIDggMCAyLjY2NyAyLjc0OCAwbDcuOTE5IDh6XCIgZmlsbC1ydWxlPVwibm9uemVyb1wiLz48L3N2Zz4nLHByZXZpb3VzTW9udGg6Jzxzdmcgd2lkdGg9XCIxMVwiIGhlaWdodD1cIjE2XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNNy45MTkgMGwyLjc0OCAyLjY2N0w1LjMzMyA4bDUuMzM0IDUuMzMzTDcuOTE5IDE2IDAgOHpcIiBmaWxsLXJ1bGU9XCJub256ZXJvXCIvPjwvc3ZnPicsY2FuY2VsOlwiQ2FuY2VsXCIsYXBwbHk6XCJBcHBseVwifSxkb2N1bWVudENsaWNrOnRoaXMuYmluZHMuaGlkZVBpY2tlcixwbHVnaW5zOltdfTt1aT17Y29udGFpbmVyOm51bGwsc2hhZG93Um9vdDpudWxsLHdyYXBwZXI6bnVsbH07dmVyc2lvbj1cIjEuMi4xXCI7Y29uc3RydWN0b3IodCl7Y29uc3QgZT17Li4udGhpcy5vcHRpb25zLmxvY2FsZSwuLi50LmxvY2FsZX07dGhpcy5vcHRpb25zPXsuLi50aGlzLm9wdGlvbnMsLi4udH0sdGhpcy5vcHRpb25zLmxvY2FsZT1lLHRoaXMuaGFuZGxlT3B0aW9ucygpLHRoaXMudWkud3JhcHBlcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKSx0aGlzLnVpLndyYXBwZXIuc3R5bGUuZGlzcGxheT1cIm5vbmVcIix0aGlzLnVpLndyYXBwZXIuc3R5bGUucG9zaXRpb249XCJhYnNvbHV0ZVwiLHRoaXMudWkud3JhcHBlci5zdHlsZS5wb2ludGVyRXZlbnRzPVwibm9uZVwiLHRoaXMudWkud3JhcHBlci5jbGFzc05hbWU9XCJlYXNlcGljay13cmFwcGVyXCIsdGhpcy51aS53cmFwcGVyLmF0dGFjaFNoYWRvdyh7bW9kZTpcIm9wZW5cIn0pLHRoaXMudWkuc2hhZG93Um9vdD10aGlzLnVpLndyYXBwZXIuc2hhZG93Um9vdCx0aGlzLnVpLmNvbnRhaW5lcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLHRoaXMudWkuY29udGFpbmVyLmNsYXNzTmFtZT1cImNvbnRhaW5lclwiLHRoaXMub3B0aW9ucy56SW5kZXgmJih0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS56SW5kZXg9U3RyaW5nKHRoaXMub3B0aW9ucy56SW5kZXgpKSx0aGlzLm9wdGlvbnMuaW5saW5lJiYodGhpcy51aS53cmFwcGVyLnN0eWxlLnBvc2l0aW9uPVwicmVsYXRpdmVcIix0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiaW5saW5lXCIpKSx0aGlzLnVpLnNoYWRvd1Jvb3QuYXBwZW5kQ2hpbGQodGhpcy51aS5jb250YWluZXIpLHRoaXMub3B0aW9ucy5lbGVtZW50LmFmdGVyKHRoaXMudWkud3JhcHBlciksdGhpcy5oYW5kbGVDU1MoKSx0aGlzLm9wdGlvbnMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIix0aGlzLmJpbmRzLnNob3cpLHRoaXMub24oXCJ2aWV3XCIsdGhpcy5vblZpZXcuYmluZCh0aGlzKSksdGhpcy5vbihcInJlbmRlclwiLHRoaXMub25SZW5kZXIuYmluZCh0aGlzKSksdGhpcy5QbHVnaW5NYW5hZ2VyLmluaXRpYWxpemUoKSx0aGlzLnBhcnNlVmFsdWVzKCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLnNldHVwJiZ0aGlzLm9wdGlvbnMuc2V0dXAodGhpcyksdGhpcy5vbihcImNsaWNrXCIsdGhpcy5vbkNsaWNrLmJpbmQodGhpcykpO2NvbnN0IGk9dGhpcy5vcHRpb25zLnNjcm9sbFRvRGF0ZT90aGlzLmdldERhdGUoKTpudWxsO3RoaXMucmVuZGVyQWxsKGkpfW9uKHQsZSxpPXt9KXt0aGlzLnVpLmNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKHQsZSxpKX1vZmYodCxlLGk9e30pe3RoaXMudWkuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxlLGkpfXRyaWdnZXIodCxlPXt9KXtyZXR1cm4gdGhpcy51aS5jb250YWluZXIuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQodCx7ZGV0YWlsOmV9KSl9ZGVzdHJveSgpe3RoaXMub3B0aW9ucy5lbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMuYmluZHMuc2hvdyksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2smJmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub3B0aW9ucy5kb2N1bWVudENsaWNrLCEwKSxPYmplY3Qua2V5cyh0aGlzLlBsdWdpbk1hbmFnZXIuaW5zdGFuY2VzKS5mb3JFYWNoKCh0PT57dGhpcy5QbHVnaW5NYW5hZ2VyLnJlbW92ZUluc3RhbmNlKHQpfSkpLHRoaXMudWkud3JhcHBlci5yZW1vdmUoKX1vblJlbmRlcih0KXtjb25zdHt2aWV3OmUsZGF0ZTppfT10LmRldGFpbDt0aGlzLkNhbGVuZGFyLnJlbmRlcihpLGUpfW9uVmlldyh0KXtjb25zdHt2aWV3OmUsdGFyZ2V0Oml9PXQuZGV0YWlsO1wiRm9vdGVyXCI9PT1lJiZ0aGlzLmRhdGVQaWNrZWQubGVuZ3RoJiYoaS5xdWVyeVNlbGVjdG9yKFwiLmFwcGx5LWJ1dHRvblwiKS5kaXNhYmxlZD0hMSl9b25DbGlja0hlYWRlckJ1dHRvbih0KXt0aGlzLmlzQ2FsZW5kYXJIZWFkZXJCdXR0b24odCkmJih0LmNsYXNzTGlzdC5jb250YWlucyhcIm5leHQtYnV0dG9uXCIpP3RoaXMuY2FsZW5kYXJzWzBdLmFkZCgxLFwibW9udGhcIik6dGhpcy5jYWxlbmRhcnNbMF0uc3VidHJhY3QoMSxcIm1vbnRoXCIpLHRoaXMucmVuZGVyQWxsKHRoaXMuY2FsZW5kYXJzWzBdKSl9b25DbGlja0NhbGVuZGFyRGF5KGUpe2lmKHRoaXMuaXNDYWxlbmRhckRheShlKSl7Y29uc3QgaT1uZXcgdChlLmRhdGFzZXQudGltZSk7dGhpcy5vcHRpb25zLmF1dG9BcHBseT8odGhpcy5zZXREYXRlKGkpLHRoaXMudHJpZ2dlcihcInNlbGVjdFwiLHtkYXRlOnRoaXMuZ2V0RGF0ZSgpfSksdGhpcy5oaWRlKCkpOih0aGlzLmRhdGVQaWNrZWRbMF09aSx0aGlzLnRyaWdnZXIoXCJwcmVzZWxlY3RcIix7ZGF0ZTp0aGlzLmdldERhdGUoKX0pLHRoaXMucmVuZGVyQWxsKCkpfX1vbkNsaWNrQXBwbHlCdXR0b24odCl7aWYodGhpcy5pc0FwcGx5QnV0dG9uKHQpKXtpZih0aGlzLmRhdGVQaWNrZWRbMF1pbnN0YW5jZW9mIERhdGUpe2NvbnN0IHQ9dGhpcy5kYXRlUGlja2VkWzBdLmNsb25lKCk7dGhpcy5zZXREYXRlKHQpfXRoaXMuaGlkZSgpLHRoaXMudHJpZ2dlcihcInNlbGVjdFwiLHtkYXRlOnRoaXMuZ2V0RGF0ZSgpfSl9fW9uQ2xpY2tDYW5jZWxCdXR0b24odCl7dGhpcy5pc0NhbmNlbEJ1dHRvbih0KSYmdGhpcy5oaWRlKCl9b25DbGljayh0KXtjb25zdCBlPXQudGFyZ2V0O2lmKGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCl7Y29uc3QgdD1lLmNsb3Nlc3QoXCIudW5pdFwiKTtpZighKHQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkpcmV0dXJuO3RoaXMub25DbGlja0hlYWRlckJ1dHRvbih0KSx0aGlzLm9uQ2xpY2tDYWxlbmRhckRheSh0KSx0aGlzLm9uQ2xpY2tBcHBseUJ1dHRvbih0KSx0aGlzLm9uQ2xpY2tDYW5jZWxCdXR0b24odCl9fWlzU2hvd24oKXtyZXR1cm4gdGhpcy51aS5jb250YWluZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaW5saW5lXCIpfHx0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuY29udGFpbnMoXCJzaG93XCIpfXNob3codCl7aWYodGhpcy5pc1Nob3duKCkpcmV0dXJuO2NvbnN0IGU9dCYmXCJ0YXJnZXRcImluIHQ/dC50YXJnZXQ6dGhpcy5vcHRpb25zLmVsZW1lbnQse3RvcDppLGxlZnQ6bn09dGhpcy5hZGp1c3RQb3NpdGlvbihlKTt0aGlzLnVpLmNvbnRhaW5lci5zdHlsZS50b3A9YCR7aX1weGAsdGhpcy51aS5jb250YWluZXIuc3R5bGUubGVmdD1gJHtufXB4YCx0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKSx0aGlzLnRyaWdnZXIoXCJzaG93XCIse3RhcmdldDplfSl9aGlkZSgpe3RoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpLHRoaXMuZGF0ZVBpY2tlZC5sZW5ndGg9MCx0aGlzLnJlbmRlckFsbCgpLHRoaXMudHJpZ2dlcihcImhpZGVcIil9c2V0RGF0ZShlKXtjb25zdCBpPW5ldyB0KGUsdGhpcy5vcHRpb25zLmZvcm1hdCk7dGhpcy5vcHRpb25zLmRhdGU9aS5jbG9uZSgpLHRoaXMudXBkYXRlVmFsdWVzKCksdGhpcy5jYWxlbmRhcnMubGVuZ3RoJiZ0aGlzLnJlbmRlckFsbCgpfWdldERhdGUoKXtyZXR1cm4gdGhpcy5vcHRpb25zLmRhdGUgaW5zdGFuY2VvZiB0P3RoaXMub3B0aW9ucy5kYXRlLmNsb25lKCk6bnVsbH1wYXJzZVZhbHVlcygpe3RoaXMub3B0aW9ucy5kYXRlP3RoaXMuc2V0RGF0ZSh0aGlzLm9wdGlvbnMuZGF0ZSk6dGhpcy5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLm9wdGlvbnMuZWxlbWVudC52YWx1ZS5sZW5ndGgmJnRoaXMuc2V0RGF0ZSh0aGlzLm9wdGlvbnMuZWxlbWVudC52YWx1ZSksdGhpcy5vcHRpb25zLmRhdGUgaW5zdGFuY2VvZiBEYXRlfHwodGhpcy5vcHRpb25zLmRhdGU9bnVsbCl9dXBkYXRlVmFsdWVzKCl7Y29uc3QgdD10aGlzLmdldERhdGUoKSxlPXQgaW5zdGFuY2VvZiBEYXRlP3QuZm9ybWF0KHRoaXMub3B0aW9ucy5mb3JtYXQsdGhpcy5vcHRpb25zLmxhbmcpOlwiXCIsaT10aGlzLm9wdGlvbnMuZWxlbWVudDtpIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudD9pLnZhbHVlPWU6aSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYoaS5pbm5lclRleHQ9ZSl9aGlkZVBpY2tlcih0KXtsZXQgZT10LnRhcmdldCxpPW51bGw7ZS5zaGFkb3dSb290JiYoZT10LmNvbXBvc2VkUGF0aCgpWzBdLGk9ZS5nZXRSb290Tm9kZSgpLmhvc3QpLHRoaXMuaXNTaG93bigpJiZpIT09dGhpcy51aS53cmFwcGVyJiZlIT09dGhpcy5vcHRpb25zLmVsZW1lbnQmJnRoaXMuaGlkZSgpfXJlbmRlckFsbCh0KXt0aGlzLnRyaWdnZXIoXCJyZW5kZXJcIix7dmlldzpcIkNvbnRhaW5lclwiLGRhdGU6KHR8fHRoaXMuY2FsZW5kYXJzWzBdKS5jbG9uZSgpfSl9aXNDYWxlbmRhckhlYWRlckJ1dHRvbih0KXtyZXR1cm5bXCJwcmV2aW91cy1idXR0b25cIixcIm5leHQtYnV0dG9uXCJdLnNvbWUoKGU9PnQuY2xhc3NMaXN0LmNvbnRhaW5zKGUpKSl9aXNDYWxlbmRhckRheSh0KXtyZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoXCJkYXlcIil9aXNBcHBseUJ1dHRvbih0KXtyZXR1cm4gdC5jbGFzc0xpc3QuY29udGFpbnMoXCJhcHBseS1idXR0b25cIil9aXNDYW5jZWxCdXR0b24odCl7cmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FuY2VsLWJ1dHRvblwiKX1nb3RvRGF0ZShlKXtjb25zdCBpPW5ldyB0KGUsdGhpcy5vcHRpb25zLmZvcm1hdCk7aS5zZXREYXRlKDEpLHRoaXMuY2FsZW5kYXJzWzBdPWkuY2xvbmUoKSx0aGlzLnJlbmRlckFsbCgpfWNsZWFyKCl7dGhpcy5vcHRpb25zLmRhdGU9bnVsbCx0aGlzLmRhdGVQaWNrZWQubGVuZ3RoPTAsdGhpcy51cGRhdGVWYWx1ZXMoKSx0aGlzLnJlbmRlckFsbCgpLHRoaXMudHJpZ2dlcihcImNsZWFyXCIpfWhhbmRsZU9wdGlvbnMoKXt0aGlzLm9wdGlvbnMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fHwodGhpcy5vcHRpb25zLmVsZW1lbnQ9dGhpcy5vcHRpb25zLmRvYy5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5lbGVtZW50KSksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2smJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub3B0aW9ucy5kb2N1bWVudENsaWNrLCEwKSx0aGlzLm9wdGlvbnMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJih0aGlzLm9wdGlvbnMuZWxlbWVudC5yZWFkT25seT10aGlzLm9wdGlvbnMucmVhZG9ubHkpLHRoaXMub3B0aW9ucy5kYXRlP3RoaXMuY2FsZW5kYXJzWzBdPW5ldyB0KHRoaXMub3B0aW9ucy5kYXRlLHRoaXMub3B0aW9ucy5mb3JtYXQpOnRoaXMuY2FsZW5kYXJzWzBdPW5ldyB0fWhhbmRsZUNTUygpe2lmKEFycmF5LmlzQXJyYXkodGhpcy5vcHRpb25zLmNzcykpdGhpcy5vcHRpb25zLmNzcy5mb3JFYWNoKCh0PT57Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKTtlLmhyZWY9dCxlLnJlbD1cInN0eWxlc2hlZXRcIjtjb25zdCBpPSgpPT57dGhpcy5jc3NMb2FkZWQrKyx0aGlzLmNzc0xvYWRlZD09PXRoaXMub3B0aW9ucy5jc3MubGVuZ3RoJiYodGhpcy51aS53cmFwcGVyLnN0eWxlLmRpc3BsYXk9XCJcIil9O2UuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixpKSxlLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGkpLHRoaXMudWkuc2hhZG93Um9vdC5hcHBlbmQoZSl9KSk7ZWxzZSBpZihcInN0cmluZ1wiPT10eXBlb2YgdGhpcy5vcHRpb25zLmNzcyl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIiksZT1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0aGlzLm9wdGlvbnMuY3NzKTt0LmFwcGVuZENoaWxkKGUpLHRoaXMudWkuc2hhZG93Um9vdC5hcHBlbmQodCksdGhpcy51aS53cmFwcGVyLnN0eWxlLmRpc3BsYXk9XCJcIn1lbHNlXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLmNzcyYmKHRoaXMub3B0aW9ucy5jc3MuY2FsbCh0aGlzLHRoaXMpLHRoaXMudWkud3JhcHBlci5zdHlsZS5kaXNwbGF5PVwiXCIpfWFkanVzdFBvc2l0aW9uKHQpe2NvbnN0IGU9dC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxpPXRoaXMudWkud3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTt0aGlzLnVpLmNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKFwiY2FsY1wiKTtjb25zdCBuPXRoaXMudWkuY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO3RoaXMudWkuY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoXCJjYWxjXCIpO2xldCBzPWUuYm90dG9tLWkuYm90dG9tLG89ZS5sZWZ0LWkubGVmdDtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYod2luZG93LmlubmVySGVpZ2h0PHMrbi5oZWlnaHQmJnMtbi5oZWlnaHQ+PTAmJihzPWUudG9wLWkudG9wLW4uaGVpZ2h0KSx3aW5kb3cuaW5uZXJXaWR0aDxvK24ud2lkdGgmJmUucmlnaHQtbi53aWR0aD49MCYmKG89ZS5yaWdodC1pLnJpZ2h0LW4ud2lkdGgpKSx7bGVmdDpvLHRvcDpzfX19dmFyIHM9T2JqZWN0LmZyZWV6ZSh7X19wcm90b19fOm51bGwsQ29yZTpuLGNyZWF0ZTpufSk7Y2xhc3Mgb3twaWNrZXI7b3B0aW9ucztwcmlvcml0eT0wO2RlcGVuZGVuY2llcz1bXTthdHRhY2godCl7Y29uc3QgZT10aGlzLmdldE5hbWUoKSxpPXsuLi50aGlzLm9wdGlvbnN9O3RoaXMub3B0aW9ucz17Li4udGhpcy5vcHRpb25zLC4uLnQub3B0aW9uc1tlXXx8e319O2Zvcihjb25zdCBuIG9mIE9iamVjdC5rZXlzKGkpKWlmKG51bGwhPT1pW25dJiZcIm9iamVjdFwiPT10eXBlb2YgaVtuXSYmT2JqZWN0LmtleXMoaVtuXSkubGVuZ3RoJiZlIGluIHQub3B0aW9ucyYmbiBpbiB0Lm9wdGlvbnNbZV0pe2NvbnN0IHM9ey4uLnQub3B0aW9uc1tlXVtuXX07bnVsbCE9PXMmJlwib2JqZWN0XCI9PXR5cGVvZiBzJiZPYmplY3Qua2V5cyhzKS5sZW5ndGgmJk9iamVjdC5rZXlzKHMpLmV2ZXJ5KCh0PT5PYmplY3Qua2V5cyhpW25dKS5pbmNsdWRlcyh0KSkpJiYodGhpcy5vcHRpb25zW25dPXsuLi5pW25dLC4uLnN9KX1pZih0aGlzLnBpY2tlcj10LHRoaXMuZGVwZW5kZW5jaWVzTm90Rm91bmQoKSl7Y29uc3QgdD10aGlzLmRlcGVuZGVuY2llcy5maWx0ZXIoKHQ9PiF0aGlzLnBsdWdpbnNBc1N0cmluZ0FycmF5KCkuaW5jbHVkZXModCkpKTtyZXR1cm4gdm9pZCBjb25zb2xlLndhcm4oYCR7dGhpcy5nZXROYW1lKCl9OiByZXF1aXJlZCBkZXBlbmRlbmNpZXMgKCR7dC5qb2luKFwiLCBcIil9KS5gKX1jb25zdCBuPXRoaXMuY2FtZWxDYXNlVG9LZWJhYih0aGlzLmdldE5hbWUoKSk7dGhpcy5waWNrZXIudWkuY29udGFpbmVyLmNsYXNzTGlzdC5hZGQobiksdGhpcy5vbkF0dGFjaCgpfWRldGFjaCgpe2NvbnN0IHQ9dGhpcy5jYW1lbENhc2VUb0tlYmFiKHRoaXMuZ2V0TmFtZSgpKTt0aGlzLnBpY2tlci51aS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZSh0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiB0aGlzLm9uRGV0YWNoJiZ0aGlzLm9uRGV0YWNoKCl9ZGVwZW5kZW5jaWVzTm90Rm91bmQoKXtyZXR1cm4gdGhpcy5kZXBlbmRlbmNpZXMubGVuZ3RoJiYhdGhpcy5kZXBlbmRlbmNpZXMuZXZlcnkoKHQ9PnRoaXMucGx1Z2luc0FzU3RyaW5nQXJyYXkoKS5pbmNsdWRlcyh0KSkpfXBsdWdpbnNBc1N0cmluZ0FycmF5KCl7cmV0dXJuIHRoaXMucGlja2VyLm9wdGlvbnMucGx1Z2lucy5tYXAoKHQ9PlwiZnVuY3Rpb25cIj09dHlwZW9mIHQ/KG5ldyB0KS5nZXROYW1lKCk6dCkpfWNhbWVsQ2FzZVRvS2ViYWIodCl7cmV0dXJuIHQucmVwbGFjZSgvKFthLXpBLVpdKSg/PVtBLVpdKS9nLFwiJDEtXCIpLnRvTG93ZXJDYXNlKCl9fWNsYXNzIGEgZXh0ZW5kcyBve3ByaW9yaXR5PTE7YmluZHM9e29uVmlldzp0aGlzLm9uVmlldy5iaW5kKHRoaXMpfTtvcHRpb25zPXttaW5EYXRlOm51bGwsbWF4RGF0ZTpudWxsLG1pbkRheXM6bnVsbCxtYXhEYXlzOm51bGwsc2VsZWN0Rm9yd2FyZDpudWxsLHNlbGVjdEJhY2t3YXJkOm51bGwscHJlc2V0czohMCxpbnNlcGFyYWJsZTohMSxmaWx0ZXI6bnVsbH07Z2V0TmFtZSgpe3JldHVyblwiTG9ja1BsdWdpblwifW9uQXR0YWNoKCl7aWYodGhpcy5vcHRpb25zLm1pbkRhdGUmJih0aGlzLm9wdGlvbnMubWluRGF0ZT1uZXcgdCh0aGlzLm9wdGlvbnMubWluRGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCx0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcpKSx0aGlzLm9wdGlvbnMubWF4RGF0ZSYmKHRoaXMub3B0aW9ucy5tYXhEYXRlPW5ldyB0KHRoaXMub3B0aW9ucy5tYXhEYXRlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0LHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyksdGhpcy5vcHRpb25zLm1heERhdGUgaW5zdGFuY2VvZiB0JiZ0aGlzLnBpY2tlci5vcHRpb25zLmNhbGVuZGFycz4xJiZ0aGlzLnBpY2tlci5jYWxlbmRhcnNbMF0uaXNTYW1lKHRoaXMub3B0aW9ucy5tYXhEYXRlLFwibW9udGhcIikpKXtjb25zdCB0PXRoaXMucGlja2VyLmNhbGVuZGFyc1swXS5jbG9uZSgpLnN1YnRyYWN0KDEsXCJtb250aFwiKTt0aGlzLnBpY2tlci5nb3RvRGF0ZSh0KX1pZigodGhpcy5vcHRpb25zLm1pbkRheXN8fHRoaXMub3B0aW9ucy5tYXhEYXlzfHx0aGlzLm9wdGlvbnMuc2VsZWN0Rm9yd2FyZHx8dGhpcy5vcHRpb25zLnNlbGVjdEJhY2t3YXJkKSYmIXRoaXMucGlja2VyLm9wdGlvbnMucGx1Z2lucy5pbmNsdWRlcyhcIlJhbmdlUGx1Z2luXCIpKXtjb25zdCB0PVtcIm1pbkRheXNcIixcIm1heERheXNcIixcInNlbGVjdEZvcndhcmRcIixcInNlbGVjdEJhY2t3YXJkXCJdO2NvbnNvbGUud2FybihgJHt0aGlzLmdldE5hbWUoKX06IG9wdGlvbnMgJHt0LmpvaW4oXCIsIFwiKX0gcmVxdWlyZWQgUmFuZ2VQbHVnaW4uYCl9dGhpcy5waWNrZXIub24oXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpfW9uRGV0YWNoKCl7dGhpcy5waWNrZXIub2ZmKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KX1vblZpZXcoZSl7Y29uc3R7dmlldzppLHRhcmdldDpuLGRhdGU6c309ZS5kZXRhaWw7aWYoXCJDYWxlbmRhckhlYWRlclwiPT09aSYmKHRoaXMub3B0aW9ucy5taW5EYXRlIGluc3RhbmNlb2YgdCYmcy5pc1NhbWVPckJlZm9yZSh0aGlzLm9wdGlvbnMubWluRGF0ZSxcIm1vbnRoXCIpJiZuLmNsYXNzTGlzdC5hZGQoXCJuby1wcmV2aW91cy1tb250aFwiKSx0aGlzLm9wdGlvbnMubWF4RGF0ZSBpbnN0YW5jZW9mIHQmJnMuaXNTYW1lT3JBZnRlcih0aGlzLm9wdGlvbnMubWF4RGF0ZSxcIm1vbnRoXCIpJiZuLmNsYXNzTGlzdC5hZGQoXCJuby1uZXh0LW1vbnRoXCIpKSxcIkNhbGVuZGFyRGF5XCI9PT1pKXtjb25zdCB0PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoP3RoaXMucGlja2VyLmRhdGVQaWNrZWRbMF06bnVsbDtpZih0aGlzLnRlc3RGaWx0ZXIocykpcmV0dXJuIHZvaWQgbi5jbGFzc0xpc3QuYWRkKFwibG9ja2VkXCIpO2lmKHRoaXMub3B0aW9ucy5pbnNlcGFyYWJsZSl7aWYodGhpcy5vcHRpb25zLm1pbkRheXMpe2NvbnN0IHQ9cy5jbG9uZSgpLnN1YnRyYWN0KHRoaXMub3B0aW9ucy5taW5EYXlzLTEsXCJkYXlcIiksZT1zLmNsb25lKCkuYWRkKHRoaXMub3B0aW9ucy5taW5EYXlzLTEsXCJkYXlcIik7bGV0IGk9ITEsbz0hMTtmb3IoO3QuaXNCZWZvcmUocyxcImRheVwiKTspe2lmKHRoaXMudGVzdEZpbHRlcih0KSl7aT0hMDticmVha310LmFkZCgxLFwiZGF5XCIpfWZvcig7ZS5pc0FmdGVyKHMsXCJkYXlcIik7KXtpZih0aGlzLnRlc3RGaWx0ZXIoZSkpe289ITA7YnJlYWt9ZS5zdWJ0cmFjdCgxLFwiZGF5XCIpfWkmJm8mJm4uY2xhc3NMaXN0LmFkZChcIm5vdC1hdmFpbGFibGVcIil9dGhpcy5yYW5nZUlzTm90QXZhaWxhYmxlKHMsdCkmJm4uY2xhc3NMaXN0LmFkZChcIm5vdC1hdmFpbGFibGVcIil9dGhpcy5kYXRlSXNOb3RBdmFpbGFibGUocyx0KSYmbi5jbGFzc0xpc3QuYWRkKFwibm90LWF2YWlsYWJsZVwiKX1pZih0aGlzLm9wdGlvbnMucHJlc2V0cyYmXCJQcmVzZXRQbHVnaW5CdXR0b25cIj09PWkpe2NvbnN0IGU9bmV3IHQoTnVtYmVyKG4uZGF0YXNldC5zdGFydCkpLGk9bmV3IHQoTnVtYmVyKG4uZGF0YXNldC5lbmQpKSxzPWkuZGlmZihlLFwiZGF5XCIpLG89dGhpcy5vcHRpb25zLm1pbkRheXMmJnM8dGhpcy5vcHRpb25zLm1pbkRheXMsYT10aGlzLm9wdGlvbnMubWF4RGF5cyYmcz50aGlzLm9wdGlvbnMubWF4RGF5czsob3x8YXx8dGhpcy5sb2NrTWluRGF0ZShlKXx8dGhpcy5sb2NrTWF4RGF0ZShlKXx8dGhpcy5sb2NrTWluRGF0ZShpKXx8dGhpcy5sb2NrTWF4RGF0ZShpKXx8dGhpcy5yYW5nZUlzTm90QXZhaWxhYmxlKGUsaSkpJiZuLnNldEF0dHJpYnV0ZShcImRpc2FibGVkXCIsXCJkaXNhYmxlZFwiKX19ZGF0ZUlzTm90QXZhaWxhYmxlKHQsZSl7cmV0dXJuIHRoaXMubG9ja01pbkRhdGUodCl8fHRoaXMubG9ja01heERhdGUodCl8fHRoaXMubG9ja01pbkRheXModCxlKXx8dGhpcy5sb2NrTWF4RGF5cyh0LGUpfHx0aGlzLmxvY2tTZWxlY3RGb3J3YXJkKHQpfHx0aGlzLmxvY2tTZWxlY3RCYWNrd2FyZCh0KX1yYW5nZUlzTm90QXZhaWxhYmxlKHQsZSl7aWYoIXR8fCFlKXJldHVybiExO2NvbnN0IGk9KHQuaXNTYW1lT3JCZWZvcmUoZSxcImRheVwiKT90OmUpLmNsb25lKCksbj0oZS5pc1NhbWVPckFmdGVyKHQsXCJkYXlcIik/ZTp0KS5jbG9uZSgpO2Zvcig7aS5pc1NhbWVPckJlZm9yZShuLFwiZGF5XCIpOyl7aWYodGhpcy50ZXN0RmlsdGVyKGkpKXJldHVybiEwO2kuYWRkKDEsXCJkYXlcIil9cmV0dXJuITF9bG9ja01pbkRhdGUoZSl7cmV0dXJuIHRoaXMub3B0aW9ucy5taW5EYXRlIGluc3RhbmNlb2YgdCYmZS5pc0JlZm9yZSh0aGlzLm9wdGlvbnMubWluRGF0ZSxcImRheVwiKX1sb2NrTWF4RGF0ZShlKXtyZXR1cm4gdGhpcy5vcHRpb25zLm1heERhdGUgaW5zdGFuY2VvZiB0JiZlLmlzQWZ0ZXIodGhpcy5vcHRpb25zLm1heERhdGUsXCJkYXlcIil9bG9ja01pbkRheXModCxlKXtpZih0aGlzLm9wdGlvbnMubWluRGF5cyYmZSl7Y29uc3QgaT1lLmNsb25lKCkuc3VidHJhY3QodGhpcy5vcHRpb25zLm1pbkRheXMtMSxcImRheVwiKSxuPWUuY2xvbmUoKS5hZGQodGhpcy5vcHRpb25zLm1pbkRheXMtMSxcImRheVwiKTtyZXR1cm4gdC5pc0JldHdlZW4oaSxuKX1yZXR1cm4hMX1sb2NrTWF4RGF5cyh0LGUpe2lmKHRoaXMub3B0aW9ucy5tYXhEYXlzJiZlKXtjb25zdCBpPWUuY2xvbmUoKS5zdWJ0cmFjdCh0aGlzLm9wdGlvbnMubWF4RGF5cyxcImRheVwiKSxuPWUuY2xvbmUoKS5hZGQodGhpcy5vcHRpb25zLm1heERheXMsXCJkYXlcIik7cmV0dXJuIXQuaXNCZXR3ZWVuKGksbil9cmV0dXJuITF9bG9ja1NlbGVjdEZvcndhcmQodCl7aWYoMT09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiZ0aGlzLm9wdGlvbnMuc2VsZWN0Rm9yd2FyZCl7Y29uc3QgZT10aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmNsb25lKCk7cmV0dXJuIHQuaXNCZWZvcmUoZSxcImRheVwiKX1yZXR1cm4hMX1sb2NrU2VsZWN0QmFja3dhcmQodCl7aWYoMT09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiZ0aGlzLm9wdGlvbnMuc2VsZWN0QmFja3dhcmQpe2NvbnN0IGU9dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXS5jbG9uZSgpO3JldHVybiB0LmlzQWZ0ZXIoZSxcImRheVwiKX1yZXR1cm4hMX10ZXN0RmlsdGVyKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub3B0aW9ucy5maWx0ZXImJnRoaXMub3B0aW9ucy5maWx0ZXIodCx0aGlzLnBpY2tlci5kYXRlUGlja2VkKX19Y2xhc3MgciBleHRlbmRzIG97ZGVwZW5kZW5jaWVzPVtcIlJhbmdlUGx1Z2luXCJdO2JpbmRzPXtvblZpZXc6dGhpcy5vblZpZXcuYmluZCh0aGlzKSxvbkNsaWNrOnRoaXMub25DbGljay5iaW5kKHRoaXMpfTtvcHRpb25zPXtjdXN0b21MYWJlbHM6W1wiVG9kYXlcIixcIlllc3RlcmRheVwiLFwiTGFzdCA3IERheXNcIixcIkxhc3QgMzAgRGF5c1wiLFwiVGhpcyBNb250aFwiLFwiTGFzdCBNb250aFwiXSxjdXN0b21QcmVzZXQ6e30scG9zaXRpb246XCJsZWZ0XCJ9O2dldE5hbWUoKXtyZXR1cm5cIlByZXNldFBsdWdpblwifW9uQXR0YWNoKCl7aWYoIU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5jdXN0b21QcmVzZXQpLmxlbmd0aCl7Y29uc3QgZT1uZXcgdCxpPSgpPT57Y29uc3QgaT1lLmNsb25lKCk7aS5zZXREYXRlKDEpO2NvbnN0IG49bmV3IERhdGUoZS5nZXRGdWxsWWVhcigpLGUuZ2V0TW9udGgoKSsxLDApO3JldHVybltuZXcgdChpKSxuZXcgdChuKV19LG49KCk9Pntjb25zdCBpPWUuY2xvbmUoKTtpLnNldE1vbnRoKGkuZ2V0TW9udGgoKS0xKSxpLnNldERhdGUoMSk7Y29uc3Qgbj1uZXcgRGF0ZShlLmdldEZ1bGxZZWFyKCksZS5nZXRNb250aCgpLDApO3JldHVybltuZXcgdChpKSxuZXcgdChuKV19LHM9W1tlLmNsb25lKCksZS5jbG9uZSgpXSxbZS5jbG9uZSgpLnN1YnRyYWN0KDEsXCJkYXlcIiksZS5jbG9uZSgpLnN1YnRyYWN0KDEsXCJkYXlcIildLFtlLmNsb25lKCkuc3VidHJhY3QoNixcImRheVwiKSxlLmNsb25lKCldLFtlLmNsb25lKCkuc3VidHJhY3QoMjksXCJkYXlcIiksZS5jbG9uZSgpXSxpKCksbigpXTtPYmplY3QudmFsdWVzKHRoaXMub3B0aW9ucy5jdXN0b21MYWJlbHMpLmZvckVhY2goKCh0LGUpPT57dGhpcy5vcHRpb25zLmN1c3RvbVByZXNldFt0XT1zW2VdfSkpfXRoaXMucGlja2VyLm9uKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vbihcImNsaWNrXCIsdGhpcy5iaW5kcy5vbkNsaWNrKX1vbkRldGFjaCgpe3RoaXMucGlja2VyLm9mZihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyksdGhpcy5waWNrZXIub2ZmKFwiY2xpY2tcIix0aGlzLmJpbmRzLm9uQ2xpY2spfW9uVmlldyh0KXtjb25zdHt2aWV3OmUsdGFyZ2V0Oml9PXQuZGV0YWlsO2lmKFwiTWFpblwiPT09ZSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NOYW1lPVwicHJlc2V0LXBsdWdpbi1jb250YWluZXJcIixPYmplY3Qua2V5cyh0aGlzLm9wdGlvbnMuY3VzdG9tUHJlc2V0KS5mb3JFYWNoKChlPT57aWYoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHRoaXMub3B0aW9ucy5jdXN0b21QcmVzZXQsZSkpe2NvbnN0IGk9dGhpcy5vcHRpb25zLmN1c3RvbVByZXNldFtlXSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7bi5jbGFzc05hbWU9XCJwcmVzZXQtYnV0dG9uIHVuaXRcIixuLmlubmVySFRNTD1lLG4uZGF0YXNldC5zdGFydD1pWzBdLmdldFRpbWUoKSxuLmRhdGFzZXQuZW5kPWlbMV0uZ2V0VGltZSgpLHQuYXBwZW5kQ2hpbGQobiksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlByZXNldFBsdWdpbkJ1dHRvblwiLHRhcmdldDpufSl9fSkpLGkuYXBwZW5kQ2hpbGQodCksaS5jbGFzc0xpc3QuYWRkKGBwcmVzZXQtJHt0aGlzLm9wdGlvbnMucG9zaXRpb259YCksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlByZXNldFBsdWdpbkNvbnRhaW5lclwiLHRhcmdldDp0fSl9fW9uQ2xpY2soZSl7Y29uc3QgaT1lLnRhcmdldDtpZihpIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2NvbnN0IGU9aS5jbG9zZXN0KFwiLnVuaXRcIik7aWYoIShlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKXJldHVybjtpZih0aGlzLmlzUHJlc2V0QnV0dG9uKGUpKXtjb25zdCBpPW5ldyB0KE51bWJlcihlLmRhdGFzZXQuc3RhcnQpKSxuPW5ldyB0KE51bWJlcihlLmRhdGFzZXQuZW5kKSk7dGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHk/KHRoaXMucGlja2VyLnNldERhdGVSYW5nZShpLG4pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJzZWxlY3RcIix7c3RhcnQ6dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlKCksZW5kOnRoaXMucGlja2VyLmdldEVuZERhdGUoKX0pLHRoaXMucGlja2VyLmhpZGUoKSk6KHRoaXMucGlja2VyLmRhdGVQaWNrZWQ9W2ksbl0sdGhpcy5waWNrZXIucmVuZGVyQWxsKCkpfX19aXNQcmVzZXRCdXR0b24odCl7cmV0dXJuIHQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJlc2V0LWJ1dHRvblwiKX19Y2xhc3MgYyBleHRlbmRzIG97dG9vbHRpcEVsZW1lbnQ7dHJpZ2dlckVsZW1lbnQ7YmluZHM9e3NldFN0YXJ0RGF0ZTp0aGlzLnNldFN0YXJ0RGF0ZS5iaW5kKHRoaXMpLHNldEVuZERhdGU6dGhpcy5zZXRFbmREYXRlLmJpbmQodGhpcyksc2V0RGF0ZVJhbmdlOnRoaXMuc2V0RGF0ZVJhbmdlLmJpbmQodGhpcyksZ2V0U3RhcnREYXRlOnRoaXMuZ2V0U3RhcnREYXRlLmJpbmQodGhpcyksZ2V0RW5kRGF0ZTp0aGlzLmdldEVuZERhdGUuYmluZCh0aGlzKSxvblZpZXc6dGhpcy5vblZpZXcuYmluZCh0aGlzKSxvblNob3c6dGhpcy5vblNob3cuYmluZCh0aGlzKSxvbk1vdXNlRW50ZXI6dGhpcy5vbk1vdXNlRW50ZXIuYmluZCh0aGlzKSxvbk1vdXNlTGVhdmU6dGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKSxvbkNsaWNrQ2FsZW5kYXJEYXk6dGhpcy5vbkNsaWNrQ2FsZW5kYXJEYXkuYmluZCh0aGlzKSxvbkNsaWNrQXBwbHlCdXR0b246dGhpcy5vbkNsaWNrQXBwbHlCdXR0b24uYmluZCh0aGlzKSxwYXJzZVZhbHVlczp0aGlzLnBhcnNlVmFsdWVzLmJpbmQodGhpcyksdXBkYXRlVmFsdWVzOnRoaXMudXBkYXRlVmFsdWVzLmJpbmQodGhpcyksY2xlYXI6dGhpcy5jbGVhci5iaW5kKHRoaXMpfTtvcHRpb25zPXtlbGVtZW50RW5kOm51bGwsc3RhcnREYXRlOm51bGwsZW5kRGF0ZTpudWxsLHJlcGljazohMSxzdHJpY3Q6ITAsZGVsaW1pdGVyOlwiIC0gXCIsdG9vbHRpcDohMCx0b29sdGlwTnVtYmVyOnQ9PnQsbG9jYWxlOnt6ZXJvOlwiXCIsb25lOlwiZGF5XCIsdHdvOlwiXCIsZmV3OlwiXCIsbWFueTpcIlwiLG90aGVyOlwiZGF5c1wifSxkb2N1bWVudENsaWNrOnRoaXMuaGlkZVBpY2tlci5iaW5kKHRoaXMpfTtnZXROYW1lKCl7cmV0dXJuXCJSYW5nZVBsdWdpblwifW9uQXR0YWNoKCl7dGhpcy5iaW5kcy5fc2V0U3RhcnREYXRlPXRoaXMucGlja2VyLnNldFN0YXJ0RGF0ZSx0aGlzLmJpbmRzLl9zZXRFbmREYXRlPXRoaXMucGlja2VyLnNldEVuZERhdGUsdGhpcy5iaW5kcy5fc2V0RGF0ZVJhbmdlPXRoaXMucGlja2VyLnNldERhdGVSYW5nZSx0aGlzLmJpbmRzLl9nZXRTdGFydERhdGU9dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlLHRoaXMuYmluZHMuX2dldEVuZERhdGU9dGhpcy5waWNrZXIuZ2V0RW5kRGF0ZSx0aGlzLmJpbmRzLl9wYXJzZVZhbHVlcz10aGlzLnBpY2tlci5wYXJzZVZhbHVlcyx0aGlzLmJpbmRzLl91cGRhdGVWYWx1ZXM9dGhpcy5waWNrZXIudXBkYXRlVmFsdWVzLHRoaXMuYmluZHMuX2NsZWFyPXRoaXMucGlja2VyLmNsZWFyLHRoaXMuYmluZHMuX29uQ2xpY2tDYWxlbmRhckRheT10aGlzLnBpY2tlci5vbkNsaWNrQ2FsZW5kYXJEYXksdGhpcy5iaW5kcy5fb25DbGlja0FwcGx5QnV0dG9uPXRoaXMucGlja2VyLm9uQ2xpY2tBcHBseUJ1dHRvbixPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBpY2tlcix7c2V0U3RhcnREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5zZXRTdGFydERhdGV9LHNldEVuZERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnNldEVuZERhdGV9LHNldERhdGVSYW5nZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuc2V0RGF0ZVJhbmdlfSxnZXRTdGFydERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLmdldFN0YXJ0RGF0ZX0sZ2V0RW5kRGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuZ2V0RW5kRGF0ZX0scGFyc2VWYWx1ZXM6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnBhcnNlVmFsdWVzfSx1cGRhdGVWYWx1ZXM6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnVwZGF0ZVZhbHVlc30sY2xlYXI6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLmNsZWFyfSxvbkNsaWNrQ2FsZW5kYXJEYXk6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLm9uQ2xpY2tDYWxlbmRhckRheX0sb25DbGlja0FwcGx5QnV0dG9uOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5vbkNsaWNrQXBwbHlCdXR0b259fSksdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQmJih0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50fHwodGhpcy5vcHRpb25zLmVsZW1lbnRFbmQ9dGhpcy5waWNrZXIub3B0aW9ucy5kb2MucXVlcnlTZWxlY3Rvcih0aGlzLm9wdGlvbnMuZWxlbWVudEVuZCkpLHRoaXMub3B0aW9ucy5lbGVtZW50RW5kIGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmKHRoaXMub3B0aW9ucy5lbGVtZW50RW5kLnJlYWRPbmx5PXRoaXMucGlja2VyLm9wdGlvbnMucmVhZG9ubHkpLFwiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMucGlja2VyLm9wdGlvbnMuZG9jdW1lbnRDbGljayYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMucGlja2VyLm9wdGlvbnMuZG9jdW1lbnRDbGljaywhMCksXCJmdW5jdGlvblwiPT10eXBlb2YgdGhpcy5vcHRpb25zLmRvY3VtZW50Q2xpY2smJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub3B0aW9ucy5kb2N1bWVudENsaWNrLCEwKSksdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsdGhpcy5waWNrZXIuc2hvdy5iaW5kKHRoaXMucGlja2VyKSkpLHRoaXMub3B0aW9ucy5yZXBpY2s9dGhpcy5vcHRpb25zLnJlcGljayYmdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCx0aGlzLnBpY2tlci5vcHRpb25zLmRhdGU9bnVsbCx0aGlzLnBpY2tlci5vbihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyksdGhpcy5waWNrZXIub24oXCJzaG93XCIsdGhpcy5iaW5kcy5vblNob3cpLHRoaXMucGlja2VyLm9uKFwibW91c2VlbnRlclwiLHRoaXMuYmluZHMub25Nb3VzZUVudGVyLCEwKSx0aGlzLnBpY2tlci5vbihcIm1vdXNlbGVhdmVcIix0aGlzLmJpbmRzLm9uTW91c2VMZWF2ZSwhMCksdGhpcy5jaGVja0ludGxQbHVyYWxMb2NhbGVzKCl9b25EZXRhY2goKXtPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBpY2tlcix7c2V0U3RhcnREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fc2V0U3RhcnREYXRlfSxzZXRFbmREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fc2V0RW5kRGF0ZX0sc2V0RGF0ZVJhbmdlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fc2V0RGF0ZVJhbmdlfSxnZXRTdGFydERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9nZXRTdGFydERhdGV9LGdldEVuZERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl9nZXRFbmREYXRlfSxwYXJzZVZhbHVlczp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX3BhcnNlVmFsdWVzfSx1cGRhdGVWYWx1ZXM6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLl91cGRhdGVWYWx1ZXN9LGNsZWFyOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fY2xlYXJ9LG9uQ2xpY2tDYWxlbmRhckRheTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX29uQ2xpY2tDYWxlbmRhckRheX0sb25DbGlja0FwcGx5QnV0dG9uOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5fb25DbGlja0FwcGx5QnV0dG9ufX0pLHRoaXMucGlja2VyLm9mZihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyksdGhpcy5waWNrZXIub2ZmKFwic2hvd1wiLHRoaXMuYmluZHMub25TaG93KSx0aGlzLnBpY2tlci5vZmYoXCJtb3VzZWVudGVyXCIsdGhpcy5iaW5kcy5vbk1vdXNlRW50ZXIsITApLHRoaXMucGlja2VyLm9mZihcIm1vdXNlbGVhdmVcIix0aGlzLmJpbmRzLm9uTW91c2VMZWF2ZSwhMCl9cGFyc2VWYWx1ZXMoKXtpZih0aGlzLm9wdGlvbnMuc3RhcnREYXRlfHx0aGlzLm9wdGlvbnMuZW5kRGF0ZSl0aGlzLm9wdGlvbnMuc3RyaWN0P3RoaXMub3B0aW9ucy5zdGFydERhdGUmJnRoaXMub3B0aW9ucy5lbmREYXRlP3RoaXMuc2V0RGF0ZVJhbmdlKHRoaXMub3B0aW9ucy5zdGFydERhdGUsdGhpcy5vcHRpb25zLmVuZERhdGUpOih0aGlzLm9wdGlvbnMuc3RhcnREYXRlPW51bGwsdGhpcy5vcHRpb25zLmVuZERhdGU9bnVsbCk6KHRoaXMub3B0aW9ucy5zdGFydERhdGUmJnRoaXMuc2V0U3RhcnREYXRlKHRoaXMub3B0aW9ucy5zdGFydERhdGUpLHRoaXMub3B0aW9ucy5lbmREYXRlJiZ0aGlzLnNldEVuZERhdGUodGhpcy5vcHRpb25zLmVuZERhdGUpKTtlbHNlIGlmKHRoaXMub3B0aW9ucy5lbGVtZW50RW5kKXRoaXMub3B0aW9ucy5zdHJpY3Q/dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCYmdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZS5sZW5ndGgmJnRoaXMuc2V0RGF0ZVJhbmdlKHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZSk6KHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZS5sZW5ndGgmJnRoaXMuc2V0U3RhcnREYXRlKHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudC52YWx1ZSksdGhpcy5vcHRpb25zLmVsZW1lbnRFbmQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZS5sZW5ndGgmJnRoaXMuc2V0RW5kRGF0ZSh0aGlzLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZSkpO2Vsc2UgaWYodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCl7Y29uc3RbdCxlXT10aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUuc3BsaXQodGhpcy5vcHRpb25zLmRlbGltaXRlcik7dGhpcy5vcHRpb25zLnN0cmljdD90JiZlJiZ0aGlzLnNldERhdGVSYW5nZSh0LGUpOih0JiZ0aGlzLnNldFN0YXJ0RGF0ZSh0KSxlJiZ0aGlzLnNldEVuZERhdGUoZSkpfX11cGRhdGVWYWx1ZXMoKXtjb25zdCB0PXRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCxlPXRoaXMub3B0aW9ucy5lbGVtZW50RW5kLGk9dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlKCksbj10aGlzLnBpY2tlci5nZXRFbmREYXRlKCkscz1pIGluc3RhbmNlb2YgRGF0ZT9pLmZvcm1hdCh0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCx0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcpOlwiXCIsbz1uIGluc3RhbmNlb2YgRGF0ZT9uLmZvcm1hdCh0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCx0aGlzLnBpY2tlci5vcHRpb25zLmxhbmcpOlwiXCI7aWYoZSl0IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudD90LnZhbHVlPXM6dCBpbnN0YW5jZW9mIEhUTUxFbGVtZW50JiYodC5pbm5lclRleHQ9cyksZSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQ/ZS52YWx1ZT1vOmUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKGUuaW5uZXJUZXh0PW8pO2Vsc2V7Y29uc3QgZT1gJHtzfSR7c3x8bz90aGlzLm9wdGlvbnMuZGVsaW1pdGVyOlwiXCJ9JHtvfWA7dCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQ/dC52YWx1ZT1lOnQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCYmKHQuaW5uZXJUZXh0PWUpfX1jbGVhcigpe3RoaXMub3B0aW9ucy5zdGFydERhdGU9bnVsbCx0aGlzLm9wdGlvbnMuZW5kRGF0ZT1udWxsLHRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoPTAsdGhpcy51cGRhdGVWYWx1ZXMoKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwiY2xlYXJcIil9b25TaG93KHQpe2NvbnN0e3RhcmdldDplfT10LmRldGFpbDt0aGlzLnRyaWdnZXJFbGVtZW50PWUsdGhpcy5waWNrZXIub3B0aW9ucy5zY3JvbGxUb0RhdGUmJnRoaXMuZ2V0U3RhcnREYXRlKClpbnN0YW5jZW9mIERhdGUmJnRoaXMucGlja2VyLmdvdG9EYXRlKHRoaXMuZ2V0U3RhcnREYXRlKCkpLHRoaXMuaW5pdGlhbGl6ZVJlcGljaygpfW9uVmlldyhlKXtjb25zdHt2aWV3OmksdGFyZ2V0Om59PWUuZGV0YWlsO2lmKFwiTWFpblwiPT09aSYmKHRoaXMudG9vbHRpcEVsZW1lbnQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIiksdGhpcy50b29sdGlwRWxlbWVudC5jbGFzc05hbWU9XCJyYW5nZS1wbHVnaW4tdG9vbHRpcFwiLG4uYXBwZW5kQ2hpbGQodGhpcy50b29sdGlwRWxlbWVudCkpLFwiQ2FsZW5kYXJEYXlcIj09PWkpe2NvbnN0IGU9bmV3IHQobi5kYXRhc2V0LnRpbWUpLGk9dGhpcy5waWNrZXIuZGF0ZVBpY2tlZCxzPWkubGVuZ3RoP3RoaXMucGlja2VyLmRhdGVQaWNrZWRbMF06dGhpcy5nZXRTdGFydERhdGUoKSxvPWkubGVuZ3RoP3RoaXMucGlja2VyLmRhdGVQaWNrZWRbMV06dGhpcy5nZXRFbmREYXRlKCk7cyYmcy5pc1NhbWUoZSxcImRheVwiKSYmbi5jbGFzc0xpc3QuYWRkKFwic3RhcnRcIikscyYmbyYmKG8uaXNTYW1lKGUsXCJkYXlcIikmJm4uY2xhc3NMaXN0LmFkZChcImVuZFwiKSxlLmlzQmV0d2VlbihzLG8pJiZuLmNsYXNzTGlzdC5hZGQoXCJpbi1yYW5nZVwiKSl9aWYoXCJGb290ZXJcIj09PWkpe2NvbnN0IHQ9MT09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiYhdGhpcy5vcHRpb25zLnN0cmljdHx8Mj09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoO24ucXVlcnlTZWxlY3RvcihcIi5hcHBseS1idXR0b25cIikuZGlzYWJsZWQ9IXR9fWhpZGVQaWNrZXIodCl7bGV0IGU9dC50YXJnZXQsaT1udWxsO2Uuc2hhZG93Um9vdCYmKGU9dC5jb21wb3NlZFBhdGgoKVswXSxpPWUuZ2V0Um9vdE5vZGUoKS5ob3N0KSx0aGlzLnBpY2tlci5pc1Nob3duKCkmJmkhPT10aGlzLnBpY2tlci51aS53cmFwcGVyJiZlIT09dGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50JiZlIT09dGhpcy5vcHRpb25zLmVsZW1lbnRFbmQmJnRoaXMucGlja2VyLmhpZGUoKX1zZXRTdGFydERhdGUoZSl7Y29uc3QgaT1uZXcgdChlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLm9wdGlvbnMuc3RhcnREYXRlPWk/aS5jbG9uZSgpOm51bGwsdGhpcy51cGRhdGVWYWx1ZXMoKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKX1zZXRFbmREYXRlKGUpe2NvbnN0IGk9bmV3IHQoZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy5vcHRpb25zLmVuZERhdGU9aT9pLmNsb25lKCk6bnVsbCx0aGlzLnVwZGF0ZVZhbHVlcygpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpfXNldERhdGVSYW5nZShlLGkpe2NvbnN0IG49bmV3IHQoZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCkscz1uZXcgdChpLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLm9wdGlvbnMuc3RhcnREYXRlPW4/bi5jbG9uZSgpOm51bGwsdGhpcy5vcHRpb25zLmVuZERhdGU9cz9zLmNsb25lKCk6bnVsbCx0aGlzLnVwZGF0ZVZhbHVlcygpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpfWdldFN0YXJ0RGF0ZSgpe3JldHVybiB0aGlzLm9wdGlvbnMuc3RhcnREYXRlIGluc3RhbmNlb2YgRGF0ZT90aGlzLm9wdGlvbnMuc3RhcnREYXRlLmNsb25lKCk6bnVsbH1nZXRFbmREYXRlKCl7cmV0dXJuIHRoaXMub3B0aW9ucy5lbmREYXRlIGluc3RhbmNlb2YgRGF0ZT90aGlzLm9wdGlvbnMuZW5kRGF0ZS5jbG9uZSgpOm51bGx9b25Nb3VzZUVudGVyKGUpe2NvbnN0IGk9ZS50YXJnZXQ7aWYoaSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KXt0aGlzLmlzQ29udGFpbmVyKGkpJiZ0aGlzLmluaXRpYWxpemVSZXBpY2soKTtjb25zdCBlPWkuY2xvc2VzdChcIi51bml0XCIpO2lmKCEoZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSlyZXR1cm47aWYodGhpcy5waWNrZXIuaXNDYWxlbmRhckRheShlKSl7aWYoMSE9PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoKXJldHVybjtsZXQgaT10aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLmNsb25lKCksbj1uZXcgdChlLmRhdGFzZXQudGltZSkscz0hMTtpZihpLmlzQWZ0ZXIobixcImRheVwiKSl7Y29uc3QgdD1pLmNsb25lKCk7aT1uLmNsb25lKCksbj10LmNsb25lKCkscz0hMH1pZihbLi4udGhpcy5waWNrZXIudWkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuZGF5XCIpXS5mb3JFYWNoKChvPT57Y29uc3QgYT1uZXcgdChvLmRhdGFzZXQudGltZSkscj10aGlzLnBpY2tlci5DYWxlbmRhci5nZXRDYWxlbmRhckRheVZpZXcoYSk7YS5pc0JldHdlZW4oaSxuKSYmci5jbGFzc0xpc3QuYWRkKFwiaW4tcmFuZ2VcIiksYS5pc1NhbWUodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXSxcImRheVwiKSYmKHIuY2xhc3NMaXN0LmFkZChcInN0YXJ0XCIpLHIuY2xhc3NMaXN0LnRvZ2dsZShcImZsaXBwZWRcIixzKSksbz09PWUmJihyLmNsYXNzTGlzdC5hZGQoXCJlbmRcIiksci5jbGFzc0xpc3QudG9nZ2xlKFwiZmxpcHBlZFwiLHMpKSxvLmNsYXNzTmFtZT1yLmNsYXNzTmFtZX0pKSx0aGlzLm9wdGlvbnMudG9vbHRpcCl7Y29uc3QgdD10aGlzLm9wdGlvbnMudG9vbHRpcE51bWJlcihuLmRpZmYoaSxcImRheVwiKSsxKTtpZih0PjApe2NvbnN0IGk9bmV3IEludGwuUGx1cmFsUnVsZXModGhpcy5waWNrZXIub3B0aW9ucy5sYW5nKS5zZWxlY3QodCksbj1gJHt0fSAke3RoaXMub3B0aW9ucy5sb2NhbGVbaV19YDt0aGlzLnNob3dUb29sdGlwKGUsbil9ZWxzZSB0aGlzLmhpZGVUb29sdGlwKCl9fX19b25Nb3VzZUxlYXZlKHQpe2lmKHRoaXMuaXNDb250YWluZXIodC50YXJnZXQpJiZ0aGlzLm9wdGlvbnMucmVwaWNrKXtjb25zdCB0PXRoaXMuZ2V0U3RhcnREYXRlKCksZT10aGlzLmdldEVuZERhdGUoKTt0JiZlJiYodGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGg9MCx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSl9fW9uQ2xpY2tDYWxlbmRhckRheShlKXtpZih0aGlzLnBpY2tlci5pc0NhbGVuZGFyRGF5KGUpKXsyPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJih0aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aD0wKTtjb25zdCBpPW5ldyB0KGUuZGF0YXNldC50aW1lKTtpZih0aGlzLnBpY2tlci5kYXRlUGlja2VkW3RoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoXT1pLDI9PT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmdGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXS5pc0FmdGVyKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMV0pKXtjb25zdCB0PXRoaXMucGlja2VyLmRhdGVQaWNrZWRbMV0uY2xvbmUoKTt0aGlzLnBpY2tlci5kYXRlUGlja2VkWzFdPXRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0uY2xvbmUoKSx0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdPXQuY2xvbmUoKX0xIT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJnRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5fHx0aGlzLnBpY2tlci50cmlnZ2VyKFwicHJlc2VsZWN0XCIse3N0YXJ0OnRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF1pbnN0YW5jZW9mIERhdGU/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXS5jbG9uZSgpOm51bGwsZW5kOnRoaXMucGlja2VyLmRhdGVQaWNrZWRbMV1pbnN0YW5jZW9mIERhdGU/dGhpcy5waWNrZXIuZGF0ZVBpY2tlZFsxXS5jbG9uZSgpOm51bGx9KSwxPT09dGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJighdGhpcy5vcHRpb25zLnN0cmljdCYmdGhpcy5waWNrZXIub3B0aW9ucy5hdXRvQXBwbHkmJih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQ9PT10aGlzLnRyaWdnZXJFbGVtZW50JiZ0aGlzLnNldFN0YXJ0RGF0ZSh0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdKSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZD09PXRoaXMudHJpZ2dlckVsZW1lbnQmJnRoaXMuc2V0RW5kRGF0ZSh0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdKSx0aGlzLnBpY2tlci50cmlnZ2VyKFwic2VsZWN0XCIse3N0YXJ0OnRoaXMucGlja2VyLmdldFN0YXJ0RGF0ZSgpLGVuZDp0aGlzLnBpY2tlci5nZXRFbmREYXRlKCl9KSksdGhpcy5waWNrZXIucmVuZGVyQWxsKCkpLDI9PT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aCYmKHRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5Pyh0aGlzLnNldERhdGVSYW5nZSh0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMV0pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJzZWxlY3RcIix7c3RhcnQ6dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlKCksZW5kOnRoaXMucGlja2VyLmdldEVuZERhdGUoKX0pLHRoaXMucGlja2VyLmhpZGUoKSk6KHRoaXMuaGlkZVRvb2x0aXAoKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKSkpfX1vbkNsaWNrQXBwbHlCdXR0b24odCl7dGhpcy5waWNrZXIuaXNBcHBseUJ1dHRvbih0KSYmKDEhPT10aGlzLnBpY2tlci5kYXRlUGlja2VkLmxlbmd0aHx8dGhpcy5vcHRpb25zLnN0cmljdHx8KHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudD09PXRoaXMudHJpZ2dlckVsZW1lbnQmJih0aGlzLm9wdGlvbnMuZW5kRGF0ZT1udWxsLHRoaXMuc2V0U3RhcnREYXRlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0pKSx0aGlzLm9wdGlvbnMuZWxlbWVudEVuZD09PXRoaXMudHJpZ2dlckVsZW1lbnQmJih0aGlzLm9wdGlvbnMuc3RhcnREYXRlPW51bGwsdGhpcy5zZXRFbmREYXRlKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF0pKSksMj09PXRoaXMucGlja2VyLmRhdGVQaWNrZWQubGVuZ3RoJiZ0aGlzLnNldERhdGVSYW5nZSh0aGlzLnBpY2tlci5kYXRlUGlja2VkWzBdLHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMV0pLHRoaXMucGlja2VyLnRyaWdnZXIoXCJzZWxlY3RcIix7c3RhcnQ6dGhpcy5waWNrZXIuZ2V0U3RhcnREYXRlKCksZW5kOnRoaXMucGlja2VyLmdldEVuZERhdGUoKX0pLHRoaXMucGlja2VyLmhpZGUoKSl9c2hvd1Rvb2x0aXAodCxlKXt0aGlzLnRvb2x0aXBFbGVtZW50LnN0eWxlLnZpc2liaWxpdHk9XCJ2aXNpYmxlXCIsdGhpcy50b29sdGlwRWxlbWVudC5pbm5lckhUTUw9ZTtjb25zdCBpPXRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxuPXRoaXMudG9vbHRpcEVsZW1lbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscz10LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO2xldCBvPXMudG9wLGE9cy5sZWZ0O28tPWkudG9wLGEtPWkubGVmdCxvLT1uLmhlaWdodCxhLT1uLndpZHRoLzIsYSs9cy53aWR0aC8yLHRoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUudG9wPWAke299cHhgLHRoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUubGVmdD1gJHthfXB4YH1oaWRlVG9vbHRpcCgpe3RoaXMudG9vbHRpcEVsZW1lbnQuc3R5bGUudmlzaWJpbGl0eT1cImhpZGRlblwifWNoZWNrSW50bFBsdXJhbExvY2FsZXMoKXtpZighdGhpcy5vcHRpb25zLnRvb2x0aXApcmV0dXJuO2NvbnN0IHQ9Wy4uLm5ldyBTZXQoW25ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykuc2VsZWN0KDApLG5ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykuc2VsZWN0KDEpLG5ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykuc2VsZWN0KDIpLG5ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykuc2VsZWN0KDYpLG5ldyBJbnRsLlBsdXJhbFJ1bGVzKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZykuc2VsZWN0KDE4KV0pXSxlPU9iamVjdC5rZXlzKHRoaXMub3B0aW9ucy5sb2NhbGUpO3QuZXZlcnkoKHQ9PmUuaW5jbHVkZXModCkpKXx8Y29uc29sZS53YXJuKGAke3RoaXMuZ2V0TmFtZSgpfTogcHJvdmlkZSBsb2NhbGVzICgke3Quam9pbihcIiwgXCIpfSkgZm9yIGNvcnJlY3QgdG9vbHRpcCB0ZXh0LmApfWluaXRpYWxpemVSZXBpY2soKXtpZighdGhpcy5vcHRpb25zLnJlcGljaylyZXR1cm47Y29uc3QgdD10aGlzLmdldFN0YXJ0RGF0ZSgpLGU9dGhpcy5nZXRFbmREYXRlKCk7ZSYmdGhpcy50cmlnZ2VyRWxlbWVudD09PXRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCYmKHRoaXMucGlja2VyLmRhdGVQaWNrZWRbMF09ZSksdCYmdGhpcy50cmlnZ2VyRWxlbWVudD09PXRoaXMub3B0aW9ucy5lbGVtZW50RW5kJiYodGhpcy5waWNrZXIuZGF0ZVBpY2tlZFswXT10KX1pc0NvbnRhaW5lcih0KXtyZXR1cm4gdD09PXRoaXMucGlja2VyLnVpLmNvbnRhaW5lcn19Y2xhc3MgbCBleHRlbmRzIG97b3B0aW9ucz17bmF0aXZlOiExLHNlY29uZHM6ITEsc3RlcEhvdXJzOjEsc3RlcE1pbnV0ZXM6NSxzdGVwU2Vjb25kczo1LGZvcm1hdDEyOiExfTtyYW5nZVBsdWdpbjt0aW1lUGlja2VkPXtpbnB1dDpudWxsLHN0YXJ0Om51bGwsZW5kOm51bGx9O3RpbWVQcmVQaWNrZWQ9e2lucHV0Om51bGwsc3RhcnQ6bnVsbCxlbmQ6bnVsbH07YmluZHM9e2dldERhdGU6dGhpcy5nZXREYXRlLmJpbmQodGhpcyksZ2V0U3RhcnREYXRlOnRoaXMuZ2V0U3RhcnREYXRlLmJpbmQodGhpcyksZ2V0RW5kRGF0ZTp0aGlzLmdldEVuZERhdGUuYmluZCh0aGlzKSxvblZpZXc6dGhpcy5vblZpZXcuYmluZCh0aGlzKSxvbklucHV0OnRoaXMub25JbnB1dC5iaW5kKHRoaXMpLG9uQ2hhbmdlOnRoaXMub25DaGFuZ2UuYmluZCh0aGlzKSxvbkNsaWNrOnRoaXMub25DbGljay5iaW5kKHRoaXMpLHNldFRpbWU6dGhpcy5zZXRUaW1lLmJpbmQodGhpcyksc2V0U3RhcnRUaW1lOnRoaXMuc2V0U3RhcnRUaW1lLmJpbmQodGhpcyksc2V0RW5kVGltZTp0aGlzLnNldEVuZFRpbWUuYmluZCh0aGlzKX07Z2V0TmFtZSgpe3JldHVyblwiVGltZVBsdWdpblwifW9uQXR0YWNoKCl7dGhpcy5iaW5kcy5fZ2V0RGF0ZT10aGlzLnBpY2tlci5nZXREYXRlLHRoaXMuYmluZHMuX2dldFN0YXJ0RGF0ZT10aGlzLnBpY2tlci5nZXRTdGFydERhdGUsdGhpcy5iaW5kcy5fZ2V0RW5kRGF0ZT10aGlzLnBpY2tlci5nZXRFbmREYXRlLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMucGlja2VyLHtnZXREYXRlOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5nZXREYXRlfSxnZXRTdGFydERhdGU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLmdldFN0YXJ0RGF0ZX0sZ2V0RW5kRGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuZ2V0RW5kRGF0ZX0sc2V0VGltZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuc2V0VGltZX0sc2V0U3RhcnRUaW1lOntjb25maWd1cmFibGU6ITAsdmFsdWU6dGhpcy5iaW5kcy5zZXRTdGFydFRpbWV9LHNldEVuZFRpbWU6e2NvbmZpZ3VyYWJsZTohMCx2YWx1ZTp0aGlzLmJpbmRzLnNldEVuZFRpbWV9fSksdGhpcy5yYW5nZVBsdWdpbj10aGlzLnBpY2tlci5QbHVnaW5NYW5hZ2VyLmdldEluc3RhbmNlKFwiUmFuZ2VQbHVnaW5cIiksdGhpcy5wYXJzZVZhbHVlcygpLHRoaXMucGlja2VyLm9uKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vbihcImlucHV0XCIsdGhpcy5iaW5kcy5vbklucHV0KSx0aGlzLnBpY2tlci5vbihcImNoYW5nZVwiLHRoaXMuYmluZHMub25DaGFuZ2UpLHRoaXMucGlja2VyLm9uKFwiY2xpY2tcIix0aGlzLmJpbmRzLm9uQ2xpY2spfW9uRGV0YWNoKCl7ZGVsZXRlIHRoaXMucGlja2VyLnNldFRpbWUsZGVsZXRlIHRoaXMucGlja2VyLnNldFN0YXJ0VGltZSxkZWxldGUgdGhpcy5waWNrZXIuc2V0RW5kVGltZSxPYmplY3QuZGVmaW5lUHJvcGVydGllcyh0aGlzLnBpY2tlcix7Z2V0RGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX2dldERhdGV9LGdldFN0YXJ0RGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX2dldFN0YXJ0RGF0ZX0sZ2V0RW5kRGF0ZTp7Y29uZmlndXJhYmxlOiEwLHZhbHVlOnRoaXMuYmluZHMuX2dldEVuZERhdGV9fSksdGhpcy5waWNrZXIub2ZmKFwidmlld1wiLHRoaXMuYmluZHMub25WaWV3KSx0aGlzLnBpY2tlci5vZmYoXCJpbnB1dFwiLHRoaXMuYmluZHMub25JbnB1dCksdGhpcy5waWNrZXIub2ZmKFwiY2hhbmdlXCIsdGhpcy5iaW5kcy5vbkNoYW5nZSksdGhpcy5waWNrZXIub2ZmKFwiY2xpY2tcIix0aGlzLmJpbmRzLm9uQ2xpY2spfW9uVmlldyh0KXtjb25zdHt2aWV3OmUsdGFyZ2V0Oml9PXQuZGV0YWlsO2lmKFwiTWFpblwiPT09ZSl7dGhpcy5yYW5nZVBsdWdpbj10aGlzLnBpY2tlci5QbHVnaW5NYW5hZ2VyLmdldEluc3RhbmNlKFwiUmFuZ2VQbHVnaW5cIik7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2lmKHQuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY29udGFpbmVyXCIsdGhpcy5yYW5nZVBsdWdpbil7Y29uc3QgZT10aGlzLmdldFN0YXJ0SW5wdXQoKTt0LmFwcGVuZENoaWxkKGUpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse3ZpZXc6XCJUaW1lUGx1Z2luSW5wdXRcIix0YXJnZXQ6ZX0pO2NvbnN0IGk9dGhpcy5nZXRFbmRJbnB1dCgpO3QuYXBwZW5kQ2hpbGQoaSksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlRpbWVQbHVnaW5JbnB1dFwiLHRhcmdldDppfSl9ZWxzZXtjb25zdCBlPXRoaXMuZ2V0U2luZ2xlSW5wdXQoKTt0LmFwcGVuZENoaWxkKGUpLHRoaXMucGlja2VyLnRyaWdnZXIoXCJ2aWV3XCIse3ZpZXc6XCJUaW1lUGx1Z2luSW5wdXRcIix0YXJnZXQ6ZX0pfWkuYXBwZW5kQ2hpbGQodCksdGhpcy5waWNrZXIudHJpZ2dlcihcInZpZXdcIix7dmlldzpcIlRpbWVQbHVnaW5Db250YWluZXJcIix0YXJnZXQ6dH0pfX1vbklucHV0KGUpe2NvbnN0IGk9ZS50YXJnZXQ7aWYoaSBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJmkuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGltZS1wbHVnaW4taW5wdXRcIikpe2NvbnN0IGU9dGhpcy50aW1lUGlja2VkW2kubmFtZV18fG5ldyB0LFtuLHNdPWkudmFsdWUuc3BsaXQoXCI6XCIpO2Uuc2V0SG91cnMoTnVtYmVyKG4pfHwwLE51bWJlcihzKXx8MCwwLDApLHRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5Pyh0aGlzLnRpbWVQaWNrZWRbaS5uYW1lXT1lLHRoaXMucGlja2VyLnVwZGF0ZVZhbHVlcygpKTp0aGlzLnRpbWVQcmVQaWNrZWRbaS5uYW1lXT1lfX1vbkNoYW5nZShlKXtjb25zdCBpPWUudGFyZ2V0O2lmKGkgaW5zdGFuY2VvZiBIVE1MU2VsZWN0RWxlbWVudCYmaS5jbGFzc0xpc3QuY29udGFpbnMoXCJ0aW1lLXBsdWdpbi1jdXN0b20taW5wdXRcIikpe2NvbnN0IGU9LyhcXHcrKVxcWyhcXHcrKVxcXS8sWyxuLHNdPWkubmFtZS5tYXRjaChlKSxvPU51bWJlcihpLnZhbHVlKTtsZXQgYT1uZXcgdDtzd2l0Y2goIXRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5JiZ0aGlzLnRpbWVQcmVQaWNrZWRbbl1pbnN0YW5jZW9mIERhdGU/YT10aGlzLnRpbWVQcmVQaWNrZWRbbl0uY2xvbmUoKTp0aGlzLnRpbWVQaWNrZWRbbl1pbnN0YW5jZW9mIERhdGUmJihhPXRoaXMudGltZVBpY2tlZFtuXS5jbG9uZSgpKSxzKXtjYXNlXCJISFwiOmlmKHRoaXMub3B0aW9ucy5mb3JtYXQxMil7Y29uc3QgdD1pLmNsb3Nlc3QoXCIudGltZS1wbHVnaW4tY3VzdG9tLWJsb2NrXCIpLnF1ZXJ5U2VsZWN0b3IoYHNlbGVjdFtuYW1lPVwiJHtufVtwZXJpb2RdXCJdYCkudmFsdWUsZT10aGlzLmhhbmRsZUZvcm1hdDEyKHQsYSxvKTthLnNldEhvdXJzKGUuZ2V0SG91cnMoKSxlLmdldE1pbnV0ZXMoKSxlLmdldFNlY29uZHMoKSwwKX1lbHNlIGEuc2V0SG91cnMobyxhLmdldE1pbnV0ZXMoKSxhLmdldFNlY29uZHMoKSwwKTticmVhaztjYXNlXCJtbVwiOmEuc2V0SG91cnMoYS5nZXRIb3VycygpLG8sYS5nZXRTZWNvbmRzKCksMCk7YnJlYWs7Y2FzZVwic3NcIjphLnNldEhvdXJzKGEuZ2V0SG91cnMoKSxhLmdldE1pbnV0ZXMoKSxvLDApO2JyZWFrO2Nhc2VcInBlcmlvZFwiOmlmKHRoaXMub3B0aW9ucy5mb3JtYXQxMil7Y29uc3QgdD1pLmNsb3Nlc3QoXCIudGltZS1wbHVnaW4tY3VzdG9tLWJsb2NrXCIpLnF1ZXJ5U2VsZWN0b3IoYHNlbGVjdFtuYW1lPVwiJHtufVtISF1cIl1gKS52YWx1ZSxlPXRoaXMuaGFuZGxlRm9ybWF0MTIoaS52YWx1ZSxhLE51bWJlcih0KSk7YS5zZXRIb3VycyhlLmdldEhvdXJzKCksZS5nZXRNaW51dGVzKCksZS5nZXRTZWNvbmRzKCksMCl9fWlmKHRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5KXRoaXMudGltZVBpY2tlZFtuXT1hLHRoaXMucGlja2VyLnVwZGF0ZVZhbHVlcygpO2Vsc2V7dGhpcy50aW1lUHJlUGlja2VkW25dPWE7Y29uc3QgdD10aGlzLnBpY2tlci51aS5jb250YWluZXIucXVlcnlTZWxlY3RvcihcIi5hcHBseS1idXR0b25cIik7aWYodGhpcy5yYW5nZVBsdWdpbil7Y29uc3QgZT10aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMsaT10aGlzLnBpY2tlci5kYXRlUGlja2VkLG49ZS5zdHJpY3QmJjI9PT1pLmxlbmd0aHx8IWUuc3RyaWN0JiZpLmxlbmd0aD4wfHwhaS5sZW5ndGgmJmUuc3RyaWN0JiZlLnN0YXJ0RGF0ZSBpbnN0YW5jZW9mIERhdGUmJmUuZW5kRGF0ZSBpbnN0YW5jZW9mIERhdGV8fCFpLmxlbmd0aCYmIWUuc3RyaWN0JiYoZS5zdGFydERhdGUgaW5zdGFuY2VvZiBEYXRlfHxlLmVuZERhdGUgaW5zdGFuY2VvZiBEYXRlKTt0LmRpc2FibGVkPSFufWVsc2UgdGhpcy5waWNrZXIuZGF0ZVBpY2tlZC5sZW5ndGgmJih0LmRpc2FibGVkPSExKX19fW9uQ2xpY2sodCl7Y29uc3QgZT10LnRhcmdldDtpZihlIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpe2NvbnN0IHQ9ZS5jbG9zZXN0KFwiLnVuaXRcIik7aWYoISh0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKXJldHVybjt0aGlzLnBpY2tlci5pc0FwcGx5QnV0dG9uKHQpJiYoT2JqZWN0LmtleXModGhpcy50aW1lUGlja2VkKS5mb3JFYWNoKCh0PT57dGhpcy50aW1lUHJlUGlja2VkW3RdaW5zdGFuY2VvZiBEYXRlJiYodGhpcy50aW1lUGlja2VkW3RdPXRoaXMudGltZVByZVBpY2tlZFt0XS5jbG9uZSgpKX0pKSx0aGlzLnBpY2tlci51cGRhdGVWYWx1ZXMoKSx0aGlzLnRpbWVQcmVQaWNrZWQ9e2lucHV0Om51bGwsc3RhcnQ6bnVsbCxlbmQ6bnVsbH0pLHRoaXMucGlja2VyLmlzQ2FuY2VsQnV0dG9uKHQpJiYodGhpcy50aW1lUHJlUGlja2VkPXtpbnB1dDpudWxsLHN0YXJ0Om51bGwsZW5kOm51bGx9LHRoaXMucGlja2VyLnJlbmRlckFsbCgpKX19c2V0VGltZSh0KXtjb25zdCBlPXRoaXMuaGFuZGxlVGltZVN0cmluZyh0KTt0aGlzLnRpbWVQaWNrZWQuaW5wdXQ9ZS5jbG9uZSgpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpLHRoaXMucGlja2VyLnVwZGF0ZVZhbHVlcygpfXNldFN0YXJ0VGltZSh0KXtjb25zdCBlPXRoaXMuaGFuZGxlVGltZVN0cmluZyh0KTt0aGlzLnRpbWVQaWNrZWQuc3RhcnQ9ZS5jbG9uZSgpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpLHRoaXMucGlja2VyLnVwZGF0ZVZhbHVlcygpfXNldEVuZFRpbWUodCl7Y29uc3QgZT10aGlzLmhhbmRsZVRpbWVTdHJpbmcodCk7dGhpcy50aW1lUGlja2VkLmVuZD1lLmNsb25lKCksdGhpcy5waWNrZXIucmVuZGVyQWxsKCksdGhpcy5waWNrZXIudXBkYXRlVmFsdWVzKCl9aGFuZGxlVGltZVN0cmluZyhlKXtjb25zdCBpPW5ldyB0LFtuLHMsb109ZS5zcGxpdChcIjpcIikubWFwKCh0PT5OdW1iZXIodCkpKSxhPW4mJiFOdW1iZXIuaXNOYU4obik/bjowLHI9cyYmIU51bWJlci5pc05hTihzKT9zOjAsYz1vJiYhTnVtYmVyLmlzTmFOKG8pP286MDtyZXR1cm4gaS5zZXRIb3VycyhhLHIsYywwKSxpfWdldERhdGUoKXtpZih0aGlzLnBpY2tlci5vcHRpb25zLmRhdGUgaW5zdGFuY2VvZiBEYXRlKXtjb25zdCBlPW5ldyB0KHRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7aWYodGhpcy50aW1lUGlja2VkLmlucHV0IGluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgdD10aGlzLnRpbWVQaWNrZWQuaW5wdXQ7ZS5zZXRIb3Vycyh0LmdldEhvdXJzKCksdC5nZXRNaW51dGVzKCksdC5nZXRTZWNvbmRzKCksMCl9cmV0dXJuIGV9cmV0dXJuIG51bGx9Z2V0U3RhcnREYXRlKCl7aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0YXJ0RGF0ZSBpbnN0YW5jZW9mIERhdGUpe2NvbnN0IGU9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0YXJ0RGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7aWYodGhpcy50aW1lUGlja2VkLnN0YXJ0IGluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgdD10aGlzLnRpbWVQaWNrZWQuc3RhcnQ7ZS5zZXRIb3Vycyh0LmdldEhvdXJzKCksdC5nZXRNaW51dGVzKCksdC5nZXRTZWNvbmRzKCksMCl9cmV0dXJuIGV9cmV0dXJuIG51bGx9Z2V0RW5kRGF0ZSgpe2lmKHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbmREYXRlIGluc3RhbmNlb2YgRGF0ZSl7Y29uc3QgZT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZW5kRGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7aWYodGhpcy50aW1lUGlja2VkLmVuZCBpbnN0YW5jZW9mIERhdGUpe2NvbnN0IHQ9dGhpcy50aW1lUGlja2VkLmVuZDtlLnNldEhvdXJzKHQuZ2V0SG91cnMoKSx0LmdldE1pbnV0ZXMoKSx0LmdldFNlY29uZHMoKSwwKX1yZXR1cm4gZX1yZXR1cm4gbnVsbH1nZXRTaW5nbGVJbnB1dCgpe3JldHVybiB0aGlzLm9wdGlvbnMubmF0aXZlP3RoaXMuZ2V0TmF0aXZlSW5wdXQoXCJpbnB1dFwiKTp0aGlzLmdldEN1c3RvbUlucHV0KFwiaW5wdXRcIil9Z2V0U3RhcnRJbnB1dCgpe3JldHVybiB0aGlzLm9wdGlvbnMubmF0aXZlP3RoaXMuZ2V0TmF0aXZlSW5wdXQoXCJzdGFydFwiKTp0aGlzLmdldEN1c3RvbUlucHV0KFwic3RhcnRcIil9Z2V0RW5kSW5wdXQoKXtyZXR1cm4gdGhpcy5vcHRpb25zLm5hdGl2ZT90aGlzLmdldE5hdGl2ZUlucHV0KFwiZW5kXCIpOnRoaXMuZ2V0Q3VzdG9tSW5wdXQoXCJlbmRcIil9Z2V0TmF0aXZlSW5wdXQodCl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7ZS50eXBlPVwidGltZVwiLGUubmFtZT10LGUuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4taW5wdXQgdW5pdFwiO2NvbnN0IGk9dGhpcy50aW1lUGlja2VkW3RdO2lmKGkpe2NvbnN0IHQ9YDAke2kuZ2V0SG91cnMoKX1gLnNsaWNlKC0yKSxuPWAwJHtpLmdldE1pbnV0ZXMoKX1gLnNsaWNlKC0yKTtlLnZhbHVlPWAke3R9OiR7bn1gfXJldHVybiBlfWdldEN1c3RvbUlucHV0KHQpe2NvbnN0IGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmNsYXNzTmFtZT1cInRpbWUtcGx1Z2luLWN1c3RvbS1ibG9ja1wiO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpLmNsYXNzTmFtZT1cInRpbWUtcGx1Z2luLWN1c3RvbS1pbnB1dCB1bml0XCIsaS5uYW1lPWAke3R9W0hIXWA7Y29uc3Qgbj10aGlzLm9wdGlvbnMuZm9ybWF0MTI/MTowLHM9dGhpcy5vcHRpb25zLmZvcm1hdDEyPzEzOjI0O2xldCBvPW51bGw7IXRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5JiZ0aGlzLnRpbWVQcmVQaWNrZWRbdF1pbnN0YW5jZW9mIERhdGU/bz10aGlzLnRpbWVQcmVQaWNrZWRbdF0uY2xvbmUoKTp0aGlzLnRpbWVQaWNrZWRbdF1pbnN0YW5jZW9mIERhdGUmJihvPXRoaXMudGltZVBpY2tlZFt0XS5jbG9uZSgpKTtmb3IobGV0IHQ9bjt0PHM7dCs9dGhpcy5vcHRpb25zLnN0ZXBIb3Vycyl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO2UudmFsdWU9U3RyaW5nKHQpLGUudGV4dD1TdHJpbmcodCksbyYmKHRoaXMub3B0aW9ucy5mb3JtYXQxMj8oby5nZXRIb3VycygpJTEyP28uZ2V0SG91cnMoKSUxMjoxMik9PT10JiYoZS5zZWxlY3RlZD0hMCk6by5nZXRIb3VycygpPT09dCYmKGUuc2VsZWN0ZWQ9ITApKSxpLmFwcGVuZENoaWxkKGUpfWUuYXBwZW5kQ2hpbGQoaSk7Y29uc3QgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpO2EuY2xhc3NOYW1lPVwidGltZS1wbHVnaW4tY3VzdG9tLWlucHV0IHVuaXRcIixhLm5hbWU9YCR7dH1bbW1dYDtmb3IobGV0IHQ9MDt0PDYwO3QrPXRoaXMub3B0aW9ucy5zdGVwTWludXRlcyl7Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO2UudmFsdWU9YDAke1N0cmluZyh0KX1gLnNsaWNlKC0yKSxlLnRleHQ9YDAke1N0cmluZyh0KX1gLnNsaWNlKC0yKSxvJiZvLmdldE1pbnV0ZXMoKT09PXQmJihlLnNlbGVjdGVkPSEwKSxhLmFwcGVuZENoaWxkKGUpfWlmKGUuYXBwZW5kQ2hpbGQoYSksdGhpcy5vcHRpb25zLnNlY29uZHMpe2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpLmNsYXNzTmFtZT1cInRpbWUtcGx1Z2luLWN1c3RvbS1pbnB1dCB1bml0XCIsaS5uYW1lPWAke3R9W3NzXWA7Y29uc3Qgbj02MDtmb3IobGV0IHQ9MDt0PG47dCs9dGhpcy5vcHRpb25zLnN0ZXBTZWNvbmRzKXtjb25zdCBlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7ZS52YWx1ZT1gMCR7U3RyaW5nKHQpfWAuc2xpY2UoLTIpLGUudGV4dD1gMCR7U3RyaW5nKHQpfWAuc2xpY2UoLTIpLG8mJm8uZ2V0U2Vjb25kcygpPT09dCYmKGUuc2VsZWN0ZWQ9ITApLGkuYXBwZW5kQ2hpbGQoZSl9ZS5hcHBlbmRDaGlsZChpKX1pZih0aGlzLm9wdGlvbnMuZm9ybWF0MTIpe2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpLmNsYXNzTmFtZT1cInRpbWUtcGx1Z2luLWN1c3RvbS1pbnB1dCB1bml0XCIsaS5uYW1lPWAke3R9W3BlcmlvZF1gLFtcIkFNXCIsXCJQTVwiXS5mb3JFYWNoKCh0PT57Y29uc3QgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpO2UudmFsdWU9dCxlLnRleHQ9dCxvJiZcIlBNXCI9PT10JiZvLmdldEhvdXJzKCk+PTEyJiYoZS5zZWxlY3RlZD0hMCksaS5hcHBlbmRDaGlsZChlKX0pKSxlLmFwcGVuZENoaWxkKGkpfXJldHVybiBlfWhhbmRsZUZvcm1hdDEyKHQsZSxpKXtjb25zdCBuPWUuY2xvbmUoKTtzd2l0Y2godCl7Y2FzZVwiQU1cIjoxMj09PWk/bi5zZXRIb3VycygwLG4uZ2V0TWludXRlcygpLG4uZ2V0U2Vjb25kcygpLDApOm4uc2V0SG91cnMoaSxuLmdldE1pbnV0ZXMoKSxuLmdldFNlY29uZHMoKSwwKTticmVhaztjYXNlXCJQTVwiOjEyIT09aT9uLnNldEhvdXJzKGkrMTIsbi5nZXRNaW51dGVzKCksbi5nZXRTZWNvbmRzKCksMCk6bi5zZXRIb3VycyhpLG4uZ2V0TWludXRlcygpLG4uZ2V0U2Vjb25kcygpLDApfXJldHVybiBufXBhcnNlVmFsdWVzKCl7aWYodGhpcy5yYW5nZVBsdWdpbil7aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0cmljdCl7aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0YXJ0RGF0ZSYmdGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVuZERhdGUpe2NvbnN0IGU9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0YXJ0RGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCksaT1uZXcgdCh0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZW5kRGF0ZSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKSx0aGlzLnRpbWVQaWNrZWQuZW5kPWkuY2xvbmUoKX19ZWxzZXtpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RhcnREYXRlKXtjb25zdCBlPW5ldyB0KHRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5zdGFydERhdGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1lLmNsb25lKCl9aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVuZERhdGUpe2NvbnN0IGU9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVuZERhdGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5lbmQ9ZS5jbG9uZSgpfX1pZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZClpZih0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuc3RyaWN0KXtpZih0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUubGVuZ3RoJiZ0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZCBpbnN0YW5jZW9mIEhUTUxJbnB1dEVsZW1lbnQmJnRoaXMucmFuZ2VQbHVnaW4ub3B0aW9ucy5lbGVtZW50RW5kLnZhbHVlLmxlbmd0aCl7Y29uc3QgZT1uZXcgdCh0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpLGk9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVsZW1lbnRFbmQudmFsdWUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1lLmNsb25lKCksdGhpcy50aW1lUGlja2VkLmVuZD1pLmNsb25lKCl9fWVsc2V7aWYodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCl7Y29uc3QgZT1uZXcgdCh0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1lLmNsb25lKCl9aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVsZW1lbnRFbmQgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50JiZ0aGlzLnJhbmdlUGx1Z2luLm9wdGlvbnMuZWxlbWVudEVuZC52YWx1ZS5sZW5ndGgpe2NvbnN0IGU9bmV3IHQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmVsZW1lbnRFbmQudmFsdWUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1lLmNsb25lKCl9fWVsc2UgaWYodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCl7Y29uc3RbZSxpXT10aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUuc3BsaXQodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLmRlbGltaXRlcik7aWYodGhpcy5yYW5nZVBsdWdpbi5vcHRpb25zLnN0cmljdCl7aWYoZSYmaSl7Y29uc3Qgbj1uZXcgdChlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KSxzPW5ldyB0KGksdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5zdGFydD1uLmNsb25lKCksdGhpcy50aW1lUGlja2VkLmVuZD1zLmNsb25lKCl9fWVsc2V7aWYoZSl7Y29uc3QgaT1uZXcgdChlLHRoaXMucGlja2VyLm9wdGlvbnMuZm9ybWF0KTt0aGlzLnRpbWVQaWNrZWQuc3RhcnQ9aS5jbG9uZSgpfWlmKGkpe2NvbnN0IGU9bmV3IHQoaSx0aGlzLnBpY2tlci5vcHRpb25zLmZvcm1hdCk7dGhpcy50aW1lUGlja2VkLnN0YXJ0PWUuY2xvbmUoKX19fX1lbHNle2lmKHRoaXMucGlja2VyLm9wdGlvbnMuZGF0ZSl7Y29uc3QgZT1uZXcgdCh0aGlzLnBpY2tlci5vcHRpb25zLmRhdGUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5pbnB1dD1lLmNsb25lKCl9aWYodGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50IGluc3RhbmNlb2YgSFRNTElucHV0RWxlbWVudCYmdGhpcy5waWNrZXIub3B0aW9ucy5lbGVtZW50LnZhbHVlLmxlbmd0aCl7Y29uc3QgZT1uZXcgdCh0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQudmFsdWUsdGhpcy5waWNrZXIub3B0aW9ucy5mb3JtYXQpO3RoaXMudGltZVBpY2tlZC5pbnB1dD1lLmNsb25lKCl9fX19Y2xhc3MgaCBleHRlbmRzIG97ZG9jRWxlbWVudD1udWxsO3JhbmdlUGx1Z2luO2JpbmRzPXtvblZpZXc6dGhpcy5vblZpZXcuYmluZCh0aGlzKSxvbktleWRvd246dGhpcy5vbktleWRvd24uYmluZCh0aGlzKX07b3B0aW9ucz17dW5pdEluZGV4OjEsZGF5SW5kZXg6Mn07Z2V0TmFtZSgpe3JldHVyblwiS2JkUGx1Z2luXCJ9b25BdHRhY2goKXtjb25zdCB0PXRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCxlPXQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7aWYodGhpcy5kb2NFbGVtZW50PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpLHRoaXMuZG9jRWxlbWVudC5zdHlsZS5wb3NpdGlvbj1cImFic29sdXRlXCIsdGhpcy5kb2NFbGVtZW50LnN0eWxlLnRvcD1gJHt0Lm9mZnNldFRvcH1weGAsdGhpcy5kb2NFbGVtZW50LnN0eWxlLmxlZnQ9dC5vZmZzZXRMZWZ0K2Uud2lkdGgtMjUrXCJweFwiLHRoaXMuZG9jRWxlbWVudC5hdHRhY2hTaGFkb3coe21vZGU6XCJvcGVuXCJ9KSx0aGlzLm9wdGlvbnMuaHRtbCl0aGlzLmRvY0VsZW1lbnQuc2hhZG93Um9vdC5pbm5lckhUTUw9dGhpcy5vcHRpb25zLmh0bWw7ZWxzZXtjb25zdCB0PWBcXG4gICAgICA8c3R5bGU+XFxuICAgICAgYnV0dG9uIHtcXG4gICAgICAgIGJvcmRlcjogbm9uZTtcXG4gICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xcbiAgICAgICAgZm9udC1zaXplOiAke3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudCkuZm9udFNpemV9O1xcbiAgICAgIH1cXG4gICAgICA8L3N0eWxlPlxcblxcbiAgICAgIDxidXR0b24+JiMxMjgxOTc7PC9idXR0b24+XFxuICAgICAgYDt0aGlzLmRvY0VsZW1lbnQuc2hhZG93Um9vdC5pbm5lckhUTUw9dH1jb25zdCBpPXRoaXMuZG9jRWxlbWVudC5zaGFkb3dSb290LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b25cIik7aSYmKGkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsKHQ9Pnt0LnByZXZlbnREZWZhdWx0KCksdGhpcy5waWNrZXIuc2hvdyh7dGFyZ2V0OnRoaXMucGlja2VyLm9wdGlvbnMuZWxlbWVudH0pfSkse2NhcHR1cmU6ITB9KSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsKHQ9PntcIkVzY2FwZVwiPT09dC5jb2RlJiZ0aGlzLnBpY2tlci5oaWRlKCl9KSx7Y2FwdHVyZTohMH0pKSx0aGlzLnBpY2tlci5vcHRpb25zLmVsZW1lbnQuYWZ0ZXIodGhpcy5kb2NFbGVtZW50KSx0aGlzLnBpY2tlci5vbihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyksdGhpcy5waWNrZXIub24oXCJrZXlkb3duXCIsdGhpcy5iaW5kcy5vbktleWRvd24pfW9uRGV0YWNoKCl7dGhpcy5kb2NFbGVtZW50JiZ0aGlzLmRvY0VsZW1lbnQuaXNDb25uZWN0ZWQmJnRoaXMuZG9jRWxlbWVudC5yZW1vdmUoKSx0aGlzLnBpY2tlci5vZmYoXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpLHRoaXMucGlja2VyLm9mZihcImtleWRvd25cIix0aGlzLmJpbmRzLm9uS2V5ZG93bil9b25WaWV3KHQpe2NvbnN0e3ZpZXc6ZSx0YXJnZXQ6aX09dC5kZXRhaWw7aSYmXCJxdWVyeVNlbGVjdG9yXCJpbiBpJiYoXCJDYWxlbmRhckRheVwiIT09ZXx8W1wibG9ja2VkXCIsXCJub3QtYXZhaWxhYmxlXCJdLnNvbWUoKHQ9PmkuY2xhc3NMaXN0LmNvbnRhaW5zKHQpKSk/Wy4uLmkucXVlcnlTZWxlY3RvckFsbChcIi51bml0Om5vdCguZGF5KVwiKV0uZm9yRWFjaCgodD0+dC50YWJJbmRleD10aGlzLm9wdGlvbnMudW5pdEluZGV4KSk6aS50YWJJbmRleD10aGlzLm9wdGlvbnMuZGF5SW5kZXgpfW9uS2V5ZG93bih0KXtzd2l0Y2godGhpcy5vbk1vdXNlRW50ZXIodCksdC5jb2RlKXtjYXNlXCJBcnJvd1VwXCI6Y2FzZVwiQXJyb3dEb3duXCI6dGhpcy52ZXJ0aWNhbE1vdmUodCk7YnJlYWs7Y2FzZVwiQXJyb3dMZWZ0XCI6Y2FzZVwiQXJyb3dSaWdodFwiOnRoaXMuaG9yaXpvbnRhbE1vdmUodCk7YnJlYWs7Y2FzZVwiRW50ZXJcIjpjYXNlXCJTcGFjZVwiOnRoaXMuaGFuZGxlRW50ZXIodCk7YnJlYWs7Y2FzZVwiRXNjYXBlXCI6dGhpcy5waWNrZXIuaGlkZSgpfX1maW5kQWxsb3dhYmxlRGF5U2libGluZyh0LGUsaSl7Y29uc3Qgbj1BcnJheS5mcm9tKHQucXVlcnlTZWxlY3RvckFsbChgLmRheVt0YWJpbmRleD1cIiR7dGhpcy5vcHRpb25zLmRheUluZGV4fVwiXWApKSxzPW4uaW5kZXhPZihlKTtyZXR1cm4gbi5maWx0ZXIoKCh0LGUpPT5pKGUscykmJnQudGFiSW5kZXg9PT10aGlzLm9wdGlvbnMuZGF5SW5kZXgpKVswXX1jaGFuZ2VNb250aCh0KXtjb25zdCBlPXtBcnJvd0xlZnQ6XCJwcmV2aW91c1wiLEFycm93UmlnaHQ6XCJuZXh0XCJ9LGk9dGhpcy5waWNrZXIudWkuY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYC4ke2VbdC5jb2RlXX0tYnV0dG9uW3RhYmluZGV4PVwiJHt0aGlzLm9wdGlvbnMudW5pdEluZGV4fVwiXWApO2kmJiFpLnBhcmVudEVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKGBuby0ke2VbdC5jb2RlXX0tbW9udGhgKSYmKGkuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbGlja1wiLHtidWJibGVzOiEwfSkpLHNldFRpbWVvdXQoKCgpPT57bGV0IGU9bnVsbDtzd2l0Y2godC5jb2RlKXtjYXNlXCJBcnJvd0xlZnRcIjpjb25zdCB0PXRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKGAuZGF5W3RhYmluZGV4PVwiJHt0aGlzLm9wdGlvbnMuZGF5SW5kZXh9XCJdYCk7ZT10W3QubGVuZ3RoLTFdO2JyZWFrO2Nhc2VcIkFycm93UmlnaHRcIjplPXRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGAuZGF5W3RhYmluZGV4PVwiJHt0aGlzLm9wdGlvbnMuZGF5SW5kZXh9XCJdYCl9ZSYmZS5mb2N1cygpfSkpKX12ZXJ0aWNhbE1vdmUodCl7Y29uc3QgZT10LnRhcmdldDtpZihlLmNsYXNzTGlzdC5jb250YWlucyhcImRheVwiKSl7dC5wcmV2ZW50RGVmYXVsdCgpO2NvbnN0IGk9dGhpcy5maW5kQWxsb3dhYmxlRGF5U2libGluZyh0aGlzLnBpY2tlci51aS5jb250YWluZXIsZSwoKGUsaSk9PmU9PT0oXCJBcnJvd1VwXCI9PT10LmNvZGU/aS03OmkrNykpKTtpJiZpLmZvY3VzKCl9fWhvcml6b250YWxNb3ZlKHQpe2NvbnN0IGU9dC50YXJnZXQ7aWYoZS5jbGFzc0xpc3QuY29udGFpbnMoXCJkYXlcIikpe3QucHJldmVudERlZmF1bHQoKTtjb25zdCBpPXRoaXMuZmluZEFsbG93YWJsZURheVNpYmxpbmcodGhpcy5waWNrZXIudWkuY29udGFpbmVyLGUsKChlLGkpPT5lPT09KFwiQXJyb3dMZWZ0XCI9PT10LmNvZGU/aS0xOmkrMSkpKTtpP2kuZm9jdXMoKTp0aGlzLmNoYW5nZU1vbnRoKHQpfX1oYW5kbGVFbnRlcih0KXtjb25zdCBlPXQudGFyZ2V0O2UuY2xhc3NMaXN0LmNvbnRhaW5zKFwiZGF5XCIpJiYodC5wcmV2ZW50RGVmYXVsdCgpLGUuZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoXCJjbGlja1wiLHtidWJibGVzOiEwfSkpLHNldFRpbWVvdXQoKCgpPT57aWYodGhpcy5yYW5nZVBsdWdpbj10aGlzLnBpY2tlci5QbHVnaW5NYW5hZ2VyLmdldEluc3RhbmNlKFwiUmFuZ2VQbHVnaW5cIiksdGhpcy5yYW5nZVBsdWdpbnx8IXRoaXMucGlja2VyLm9wdGlvbnMuYXV0b0FwcGx5KXtjb25zdCB0PXRoaXMucGlja2VyLnVpLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmRheS5zZWxlY3RlZFwiKTt0JiZzZXRUaW1lb3V0KCgoKT0+e3QuZm9jdXMoKX0pKX19KSkpfW9uTW91c2VFbnRlcih0KXt0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJkYXlcIikmJnNldFRpbWVvdXQoKCgpPT57Y29uc3QgdD10aGlzLnBpY2tlci51aS5zaGFkb3dSb290LmFjdGl2ZUVsZW1lbnQ7dCYmdC5kaXNwYXRjaEV2ZW50KG5ldyBFdmVudChcIm1vdXNlZW50ZXJcIix7YnViYmxlczohMH0pKX0pKX19Y2xhc3MgZCBleHRlbmRzIG97cmFuZ2VQbHVnaW47bG9ja1BsdWdpbjtwcmlvcml0eT0xMDtiaW5kcz17b25WaWV3OnRoaXMub25WaWV3LmJpbmQodGhpcyksb25Db2xvclNjaGVtZTp0aGlzLm9uQ29sb3JTY2hlbWUuYmluZCh0aGlzKX07b3B0aW9ucz17ZHJvcGRvd246e21vbnRoczohMSx5ZWFyczohMSxtaW5ZZWFyOjE5NTAsbWF4WWVhcjpudWxsfSxkYXJrTW9kZTohMCxsb2NhbGU6e3Jlc2V0QnV0dG9uOic8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiBoZWlnaHQ9XCIyNFwiIHdpZHRoPVwiMjRcIj48cGF0aCBkPVwiTTEzIDNjLTQuOTcgMC05IDQuMDMtOSA5SDFsMy44OSAzLjg5LjA3LjE0TDkgMTJINmMwLTMuODcgMy4xMy03IDctN3M3IDMuMTMgNyA3LTMuMTMgNy03IDdjLTEuOTMgMC0zLjY4LS43OS00Ljk0LTIuMDZsLTEuNDIgMS40MkM4LjI3IDE5Ljk5IDEwLjUxIDIxIDEzIDIxYzQuOTcgMCA5LTQuMDMgOS05cy00LjAzLTktOS05em0tMSA1djVsNC4yOCAyLjU0LjcyLTEuMjEtMy41LTIuMDhWOEgxMnpcIi8+PC9zdmc+J319O21hdGNoTWVkaWE7Z2V0TmFtZSgpe3JldHVyblwiQW1wUGx1Z2luXCJ9b25BdHRhY2goKXt0aGlzLm9wdGlvbnMuZGFya01vZGUmJndpbmRvdyYmXCJtYXRjaE1lZGlhXCJpbiB3aW5kb3cmJih0aGlzLm1hdGNoTWVkaWE9d2luZG93Lm1hdGNoTWVkaWEoXCIocHJlZmVycy1jb2xvci1zY2hlbWU6IGRhcmspXCIpLHRoaXMubWF0Y2hNZWRpYS5tYXRjaGVzJiYodGhpcy5waWNrZXIudWkuY29udGFpbmVyLmRhdGFzZXQudGhlbWU9XCJkYXJrXCIpLHRoaXMubWF0Y2hNZWRpYS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5iaW5kcy5vbkNvbG9yU2NoZW1lKSksdGhpcy5vcHRpb25zLndlZWtOdW1iZXJzJiZ0aGlzLnBpY2tlci51aS5jb250YWluZXIuY2xhc3NMaXN0LmFkZChcIndlZWstbnVtYmVyc1wiKSx0aGlzLnBpY2tlci5vbihcInZpZXdcIix0aGlzLmJpbmRzLm9uVmlldyl9b25EZXRhY2goKXt0aGlzLm9wdGlvbnMuZGFya01vZGUmJndpbmRvdyYmXCJtYXRjaE1lZGlhXCJpbiB3aW5kb3cmJnRoaXMubWF0Y2hNZWRpYS5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsdGhpcy5iaW5kcy5vbkNvbG9yU2NoZW1lKSx0aGlzLnBpY2tlci51aS5jb250YWluZXIucmVtb3ZlQXR0cmlidXRlKFwiZGF0YS10aGVtZVwiKSx0aGlzLnBpY2tlci51aS5jb250YWluZXIuY2xhc3NMaXN0LnJlbW92ZShcIndlZWstbnVtYmVyc1wiKSx0aGlzLnBpY2tlci5vZmYoXCJ2aWV3XCIsdGhpcy5iaW5kcy5vblZpZXcpfW9uVmlldyh0KXt0aGlzLmxvY2tQbHVnaW49dGhpcy5waWNrZXIuUGx1Z2luTWFuYWdlci5nZXRJbnN0YW5jZShcIkxvY2tQbHVnaW5cIiksdGhpcy5yYW5nZVBsdWdpbj10aGlzLnBpY2tlci5QbHVnaW5NYW5hZ2VyLmdldEluc3RhbmNlKFwiUmFuZ2VQbHVnaW5cIiksdGhpcy5oYW5kbGVEcm9wZG93bih0KSx0aGlzLmhhbmRsZVJlc2V0QnV0dG9uKHQpLHRoaXMuaGFuZGxlV2Vla051bWJlcnModCl9b25Db2xvclNjaGVtZSh0KXtjb25zdCBlPXQubWF0Y2hlcz9cImRhcmtcIjpcImxpZ2h0XCI7dGhpcy5waWNrZXIudWkuY29udGFpbmVyLmRhdGFzZXQudGhlbWU9ZX1oYW5kbGVEcm9wZG93bihlKXtjb25zdHt2aWV3OmksdGFyZ2V0Om4sZGF0ZTpzLGluZGV4Om99PWUuZGV0YWlsO2lmKFwiQ2FsZW5kYXJIZWFkZXJcIj09PWkpe2NvbnN0IGU9bi5xdWVyeVNlbGVjdG9yKFwiLm1vbnRoLW5hbWVcIik7aWYodGhpcy5vcHRpb25zLmRyb3Bkb3duLm1vbnRocyl7ZS5jaGlsZE5vZGVzWzBdLnJlbW92ZSgpO2NvbnN0IGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtpLmNsYXNzTmFtZT1cIm1vbnRoLW5hbWUtLXNlbGVjdCBtb250aC1uYW1lLS1kcm9wZG93blwiO2ZvcihsZXQgZT0wO2U8MTI7ZSs9MSl7Y29uc3Qgbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIpLG89bmV3IHQobmV3IERhdGUocy5nZXRGdWxsWWVhcigpLGUsMiwwLDAsMCkpLGE9bmV3IHQobmV3IERhdGUocy5nZXRGdWxsWWVhcigpLGUsMSwwLDAsMCkpO24udmFsdWU9U3RyaW5nKGUpLG4udGV4dD1vLnRvTG9jYWxlU3RyaW5nKHRoaXMucGlja2VyLm9wdGlvbnMubGFuZyx7bW9udGg6XCJsb25nXCJ9KSx0aGlzLmxvY2tQbHVnaW4mJihuLmRpc2FibGVkPXRoaXMubG9ja1BsdWdpbi5vcHRpb25zLm1pbkRhdGUmJmEuaXNCZWZvcmUobmV3IHQodGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWluRGF0ZSksXCJtb250aFwiKXx8dGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWF4RGF0ZSYmYS5pc0FmdGVyKG5ldyB0KHRoaXMubG9ja1BsdWdpbi5vcHRpb25zLm1heERhdGUpLFwibW9udGhcIikpLG4uc2VsZWN0ZWQ9YS5nZXRNb250aCgpPT09cy5nZXRNb250aCgpLGkuYXBwZW5kQ2hpbGQobil9aS5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsKHQ9Pntjb25zdCBlPXQudGFyZ2V0O3RoaXMucGlja2VyLmNhbGVuZGFyc1swXS5zZXREYXRlKDEpLHRoaXMucGlja2VyLmNhbGVuZGFyc1swXS5zZXRNb250aChOdW1iZXIoZS52YWx1ZSkpLHRoaXMucGlja2VyLnJlbmRlckFsbCgpfSkpLGUucHJlcGVuZChpKX1pZih0aGlzLm9wdGlvbnMuZHJvcGRvd24ueWVhcnMpe2UuY2hpbGROb2Rlc1sxXS5yZW1vdmUoKTtjb25zdCBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzZWxlY3RcIik7aS5jbGFzc05hbWU9XCJtb250aC1uYW1lLS1zZWxlY3RcIjtjb25zdCBuPXRoaXMub3B0aW9ucy5kcm9wZG93bi5taW5ZZWFyLG89dGhpcy5vcHRpb25zLmRyb3Bkb3duLm1heFllYXI/dGhpcy5vcHRpb25zLmRyb3Bkb3duLm1heFllYXI6KG5ldyBEYXRlKS5nZXRGdWxsWWVhcigpO2lmKHMuZ2V0RnVsbFllYXIoKT5vKXtjb25zdCB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7dC52YWx1ZT1TdHJpbmcocy5nZXRGdWxsWWVhcigpKSx0LnRleHQ9U3RyaW5nKHMuZ2V0RnVsbFllYXIoKSksdC5zZWxlY3RlZD0hMCx0LmRpc2FibGVkPSEwLGkuYXBwZW5kQ2hpbGQodCl9Zm9yKGxldCBlPW87ZT49bjtlLT0xKXtjb25zdCBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIiksbz1uZXcgdChuZXcgRGF0ZShlLDAsMSwwLDAsMCkpO24udmFsdWU9U3RyaW5nKGUpLG4udGV4dD1TdHJpbmcoZSksdGhpcy5sb2NrUGx1Z2luJiYobi5kaXNhYmxlZD10aGlzLmxvY2tQbHVnaW4ub3B0aW9ucy5taW5EYXRlJiZvLmlzQmVmb3JlKG5ldyB0KHRoaXMubG9ja1BsdWdpbi5vcHRpb25zLm1pbkRhdGUpLFwieWVhclwiKXx8dGhpcy5sb2NrUGx1Z2luLm9wdGlvbnMubWF4RGF0ZSYmby5pc0FmdGVyKG5ldyB0KHRoaXMubG9ja1BsdWdpbi5vcHRpb25zLm1heERhdGUpLFwieWVhclwiKSksbi5zZWxlY3RlZD1zLmdldEZ1bGxZZWFyKCk9PT1lLGkuYXBwZW5kQ2hpbGQobil9aWYocy5nZXRGdWxsWWVhcigpPG4pe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKTt0LnZhbHVlPVN0cmluZyhzLmdldEZ1bGxZZWFyKCkpLHQudGV4dD1TdHJpbmcocy5nZXRGdWxsWWVhcigpKSx0LnNlbGVjdGVkPSEwLHQuZGlzYWJsZWQ9ITAsaS5hcHBlbmRDaGlsZCh0KX1pZihcImFzY1wiPT09dGhpcy5vcHRpb25zLmRyb3Bkb3duLnllYXJzKXtjb25zdCB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGkuY2hpbGROb2RlcykucmV2ZXJzZSgpO2kuaW5uZXJIVE1MPVwiXCIsdC5mb3JFYWNoKCh0PT57dC5pbm5lckhUTUw9dC52YWx1ZSxpLmFwcGVuZENoaWxkKHQpfSkpfWkuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCh0PT57Y29uc3QgZT10LnRhcmdldDt0aGlzLnBpY2tlci5jYWxlbmRhcnNbMF0uc2V0RnVsbFllYXIoTnVtYmVyKGUudmFsdWUpKSx0aGlzLnBpY2tlci5yZW5kZXJBbGwoKX0pKSxlLmFwcGVuZENoaWxkKGkpfX19aGFuZGxlUmVzZXRCdXR0b24odCl7Y29uc3R7dmlldzplLHRhcmdldDppfT10LmRldGFpbDtpZihcIkNhbGVuZGFySGVhZGVyXCI9PT1lJiZ0aGlzLm9wdGlvbnMucmVzZXRCdXR0b24pe2NvbnN0IHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTt0LmNsYXNzTmFtZT1cInJlc2V0LWJ1dHRvbiB1bml0XCIsdC5pbm5lckhUTUw9dGhpcy5vcHRpb25zLmxvY2FsZS5yZXNldEJ1dHRvbix0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCh0PT57dC5wcmV2ZW50RGVmYXVsdCgpO2xldCBlPSEwO1wiZnVuY3Rpb25cIj09dHlwZW9mIHRoaXMub3B0aW9ucy5yZXNldEJ1dHRvbiYmKGU9dGhpcy5vcHRpb25zLnJlc2V0QnV0dG9uLmNhbGwodGhpcykpLGUmJnRoaXMucGlja2VyLmNsZWFyKCl9KSksaS5hcHBlbmRDaGlsZCh0KX19aGFuZGxlV2Vla051bWJlcnMoZSl7aWYodGhpcy5vcHRpb25zLndlZWtOdW1iZXJzKXtjb25zdHt2aWV3OmksdGFyZ2V0Om59PWUuZGV0YWlsO2lmKFwiQ2FsZW5kYXJEYXlOYW1lc1wiPT09aSl7Y29uc3QgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3QuY2xhc3NOYW1lPVwid251bS1oZWFkZXJcIix0LmlubmVySFRNTD1cIldrXCIsbi5wcmVwZW5kKHQpfVwiQ2FsZW5kYXJEYXlzXCI9PT1pJiZbLi4ubi5jaGlsZHJlbl0uZm9yRWFjaCgoKGUsaSk9PntpZigwPT09aXx8aSU3PT0wKXtsZXQgaTtpZihlLmNsYXNzTGlzdC5jb250YWlucyhcImRheVwiKSlpPW5ldyB0KGUuZGF0YXNldC50aW1lKTtlbHNle2NvbnN0IGU9bi5xdWVyeVNlbGVjdG9yKFwiLmRheVwiKTtpPW5ldyB0KGUuZGF0YXNldC50aW1lKX1sZXQgcz1pLmdldFdlZWsodGhpcy5waWNrZXIub3B0aW9ucy5maXJzdERheSk7NTM9PT1zJiYwPT09aS5nZXRNb250aCgpJiYocz1cIjUzLzFcIik7Y29uc3Qgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO28uY2xhc3NOYW1lPVwid251bS1pdGVtXCIsby5pbm5lckhUTUw9U3RyaW5nKHMpLG4uaW5zZXJ0QmVmb3JlKG8sZSl9fSkpfX19ZXhwb3J0e2QgYXMgQW1wUGx1Z2luLHQgYXMgRGF0ZVRpbWUsaCBhcyBLYmRQbHVnaW4sYSBhcyBMb2NrUGx1Z2luLHIgYXMgUHJlc2V0UGx1Z2luLGMgYXMgUmFuZ2VQbHVnaW4sbCBhcyBUaW1lUGx1Z2luLG4gYXMgY3JlYXRlLHMgYXMgZWFzZXBpY2t9O1xuIiwiaW1wb3J0IHsgZWFzZXBpY2sgfSBmcm9tICdAZWFzZXBpY2svYnVuZGxlJ1xuXG5pbnRlcmZhY2UgSUNhcnQge1xuICBpZDogbnVtYmVyXG4gIHByb2R1Y3Q6IElQcm9kdWN0XG4gIHF1YW50aXR5OiBudW1iZXJcbn1cblxuaW50ZXJmYWNlIElQcm9kdWN0IHtcbiAgaWQ6IG51bWJlclxuICBTS1U6IHN0cmluZ1xuICBuYW1lOiBzdHJpbmdcbiAgcmV0YWlsX3ByaWNlOiBudW1iZXJcbiAgaW1hZ2U6IHN0cmluZ1xufVxuXG5pbnRlcmZhY2UgSUNhcnRJdGVtIHtcbiAgaWQ6IG51bWJlclxuICBwcm9kdWN0X2lkOiBudW1iZXJcbiAgcXVhbnRpdHk6IG51bWJlclxuICBncm91cDogc3RyaW5nXG59XG5cbmludGVyZmFjZSBJRXZlbnRDYXJ0IHtcbiAgY2FydElkOiBudW1iZXJcbiAgZXJyb3I/OiBzdHJpbmdcbiAgc3RhdHVzOiBib29sZWFuXG59XG5cbi8vIC0tZ2V0IGNhcnQgaXRlbXMgZnJvbSBoaWRkZW4gaW5wdXQgZm9yIGRhdGVwaWNrZXItLVxuY29uc3QgY2FydEV2ZW50c0hpZGRlbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcnRzLWV2ZW50cy1oaWRkZW4taW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50XG5jb25zdCBjYXJ0cyA9IEpTT04ucGFyc2UoY2FydEV2ZW50c0hpZGRlbklucHV0LnZhbHVlKSBhcyBJQ2FydEl0ZW1bXVxuXG4vLyB2YXJpYWJsZSB0byBzZXQgZGVmYXVsdCBpbWFnZSB0byBicmFuZCBkeW5hbWljYWxseSBpbiBtb2RhbCB3aW5kb3cuIENhbiB3ZSBnZXQgbGluayBmcm9tIHRoZSBpbnRlcm5ldD9cbmNvbnN0IGRlZmF1bHRJbWFnZSA9XG4gICdodHRwczovL2Z1bmtvLmNvbS9vbi9kZW1hbmR3YXJlLnN0YXRpYy8tL1NpdGVzLWZ1bmtvLW1hc3Rlci1jYXRhbG9nL2RlZmF1bHQvZHdiYjM4YTExMS9pbWFnZXMvZnVua28vdXBsb2FkLzU1OTk4X0NvY2FDb2xhX1MyX1Nwcml0ZUJvdHRsZUNhcF9QT1BfR0xBTS1XRUIucG5nJ1xuXG4vLyAtLWNvdW50IHRvdGFsIHF1YW50aXR5IGFuZCBwcmljZS0tXG5jb25zdCB0b3RhbFByaWNlRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJ0LXRvdGFsLXByaWNlJylcbmNvbnN0IHRvdGFsUXVhbnRpdHlFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcnQtdG90YWwtcXVhbnRpdHknKVxuY29uc3QgdGFibGVDYXJ0SXRlbXMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGFibGUtY2FydC1pdGVtJylcbmNvbnN0IHN1Ym1pdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJ0LXNoaXAtcmVxdWVzdC1zdWJtaXQtYnRuJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnRcblxubGV0IHRvdGFsUHJpY2UgPSAwXG5sZXQgdG90YWxRdWFudGl0eSA9IDBcbmxldCBoYXNFdmVudEdyb3VwID0gZmFsc2VcblxuLy8gY2hlY2sgaWYgY2FydCBoYXMgZXZlbnQgZ3JvdXBcbnRhYmxlQ2FydEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgY29uc29sZS5sb2coJ2l0ZW0nLCBpdGVtKVxuICBjb25zdCBncm91cCA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1ncm91cCcpXG4gIGlmIChncm91cCA9PT0gJ0V2ZW50cycpIHtcbiAgICBoYXNFdmVudEdyb3VwID0gdHJ1ZVxuICB9XG5cbiAgY29uc3QgcHJpY2VFbGVtZW50ID0gaXRlbS5xdWVyeVNlbGVjdG9yKCcuY2FydC1pdGVtLXJldGFpbF9wcmljZScpXG4gIGNvbnN0IHF1YW50aXR5RWxlbWVudDogSFRNTElucHV0RWxlbWVudCA9IGl0ZW0ucXVlcnlTZWxlY3RvcignLmNhcnQtaXRlbS1xdWFudGl0eScpXG4gIGNvbnN0IGF2YWlsYWJsZVByb2R1Y3RRdWFudGl0eSA9IHF1YW50aXR5RWxlbWVudC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0LWF2YWlsYWJsZS1xdWFudGl0eScpXG5cbiAgY29uc3QgcHJpY2UgPSBwYXJzZUZsb2F0KHByaWNlRWxlbWVudC50ZXh0Q29udGVudClcbiAgY29uc3QgcXVhbnRpdHkgPSBwYXJzZUludChxdWFudGl0eUVsZW1lbnQudmFsdWUpXG5cbiAgY29uc3QgdG90YWxQcmljZU9uZUVsZW1lbnQgPSBwcmljZSAqIHF1YW50aXR5XG4gIHRvdGFsUHJpY2UgKz0gdG90YWxQcmljZU9uZUVsZW1lbnRcbiAgdG90YWxRdWFudGl0eSArPSBxdWFudGl0eVxuICBxdWFudGl0eUVsZW1lbnQubWF4ID0gYXZhaWxhYmxlUHJvZHVjdFF1YW50aXR5XG59KVxuXG50b3RhbFByaWNlRWxlbWVudC50ZXh0Q29udGVudCA9IGAkJHt0b3RhbFByaWNlLnRvRml4ZWQoMil9YFxudG90YWxRdWFudGl0eUVsZW1lbnQudGV4dENvbnRlbnQgPSB0b3RhbFF1YW50aXR5LnRvU3RyaW5nKClcblxuLy8gYWRkIGV2ZW50IGRhdGUgcmFuZ2UsIGRpc2FibGUgc3VibWl0IGJ1dHRvbiBpZiBjYXJ0IGhhcyBldmVudCBncm91cFxuaWYgKGhhc0V2ZW50R3JvdXApIHtcbiAgY29uc3QgZXZlbnRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1ldmVudC1jb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudFxuICBldmVudENvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKVxuICBldmVudENvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdmbGV4Jylcbn0gZWxzZSB7XG4gIHN1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbn1cblxuLy8gLS1hZGQgZGVsaXZlcnkgZm9ybSB3aGVuIGNyZWF0ZSBzaGlwIHJlcXVlc3QtLVxuY29uc3QgZGVsaXZlclRvU3RvcmVCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1kZWxpdmVyLXRvLXN0b3JlLWJ0bicpIGFzIEhUTUxCdXR0b25FbGVtZW50XG5jb25zdCBjcmVhdGVTdG9yZVJlcXVlc3RDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1jcmVhdGUtc3RvcmUtcmVxdWVzdC1jb250YWluZXInKSBhcyBIVE1MRGl2RWxlbWVudFxuXG5kZWxpdmVyVG9TdG9yZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY3JlYXRlU3RvcmVSZXF1ZXN0Q29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXG59KVxuXG4vLyAtLWRlbGV0ZSBjYXJ0IGl0ZW0tLVxuY29uc3QgZGVsZXRlQnV0dG9ucyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWxldGUtY2FydC1pdGVtLWJ0bicpXG5cbmRlbGV0ZUJ1dHRvbnMuZm9yRWFjaCgoZSkgPT4ge1xuICBlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xuICAgIGlmIChjb25maXJtKCdBcmUgc3VyZT8nKSkge1xuICAgICAgbGV0IGlkID0gZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FydC1pdGVtLWlkJylcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYC9jYXJ0L2RlbGV0ZS8ke2lkfWAsIHtcbiAgICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIH0pXG4gICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkge1xuICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKVxuICAgICAgfVxuICAgIH1cbiAgfSlcbn0pXG5cbi8vIC0tc2hvdy9oaWRlIGZhdm9yaXRlIHN0b3JlIGluIGRyb3Bkb3duLS1cbmNvbnN0IGZhdm9yaXRlQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1mYXZvcml0ZS1zdG9yZS1jaGVja2JveCcpXG5jb25zdCBzdG9yZVNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1zdG9yZS1zZWxlY3QnKVxuY29uc3Qgb3B0aW9uc1N0b3JlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNhcnQtc3RvcmUtb3B0aW9uJylcbmZhdm9yaXRlQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICBjb25zdCBzaG93RmF2b3JpdGVTdG9yZSA9IGZhdm9yaXRlQ2hlY2tib3guY2hlY2tlZFxuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgb3B0aW9uc1N0b3JlLmxlbmd0aDsgaSsrKSB7XG4gICAgY29uc3QgaXNGYXZvcml0ZSA9IG9wdGlvbnNTdG9yZVtpXS5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0LWZhdm9yaXRlJylcblxuICAgIGlmIChzaG93RmF2b3JpdGVTdG9yZSAmJiBpc0Zhdm9yaXRlICE9PSAnVHJ1ZScpIHtcbiAgICAgIDsob3B0aW9uc1N0b3JlW2ldIGFzIEhUTUxPcHRpb25FbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXG4gICAgfSBlbHNlIHtcbiAgICAgIDsob3B0aW9uc1N0b3JlW2ldIGFzIEhUTUxPcHRpb25FbGVtZW50KS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xuICAgIH1cbiAgfVxufSlcblxuY29uc3Qgc3RvcmVDYXRlZ29yeVNlbGVjdDogSFRNTFNlbGVjdEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1zdG9yZS1yZXF1ZXN0LWNhdGVnb3J5LXNlbGVjdCcpXG5jb25zdCBvcHRpb25zID0gc3RvcmVDYXRlZ29yeVNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKVxuXG5zdG9yZUNhdGVnb3J5U2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IHtcbiAgb3B0aW9ucy5mb3JFYWNoKChlKSA9PiB7XG4gICAgaWYgKGUudGV4dENvbnRlbnQgPT09IHN0b3JlQ2F0ZWdvcnlTZWxlY3Qub3B0aW9uc1tzdG9yZUNhdGVnb3J5U2VsZWN0LnNlbGVjdGVkSW5kZXhdLnRleHQpIHtcbiAgICAgIGNvbnN0IHN0b3JlU2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NhcnQtc3RvcmUtc2VsZWN0JylcbiAgICAgIGNvbnN0IG9wdGlvbkNhdGVnb3J5ID0gSlNPTi5wYXJzZShlLmdldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQtc3RvcmUtY2F0ZWdvcnktc3RvcmUnKSlcblxuICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NhcnQtc3RvcmUtc2VsZWN0JykuaW5uZXJIVE1MID0gJydcbiAgICAgIGlmIChvcHRpb25DYXRlZ29yeSkge1xuICAgICAgICBvcHRpb25DYXRlZ29yeS5zdG9yZV9jYXRlZ29yeV9zdG9yZS5mb3JFYWNoKChlOiB7IHN0b3JlX2lkOiBudW1iZXI7IHN0b3JlX25hbWU6IHN0cmluZyB9KSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RvcmVTZWxlY3RPcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdvcHRpb24nKVxuICAgICAgICAgIGNvbnNvbGUubG9nKCdlLmlkJywgZS5zdG9yZV9pZClcbiAgICAgICAgICBjb25zb2xlLmxvZygnc3RvcmVTZWxlY3QnLCBzdG9yZVNlbGVjdClcblxuICAgICAgICAgIHN0b3JlU2VsZWN0T3B0aW9uLnNldEF0dHJpYnV0ZSgndmFsdWUnLCBlLnN0b3JlX2lkLnRvU3RyaW5nKCkpXG4gICAgICAgICAgc3RvcmVTZWxlY3RPcHRpb24udGV4dENvbnRlbnQgPSBlLnN0b3JlX25hbWVcbiAgICAgICAgICBzdG9yZVNlbGVjdC5hcHBlbmRDaGlsZChzdG9yZVNlbGVjdE9wdGlvbilcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICB9XG4gIH0pXG59KVxuXG4vLyAtLWRpc3BsYXkgb25seSBzYWxlcyByZXAgbG9ja2VyLS1cbmNvbnN0IHNhbGVzUmVwTG9ja2VyQ2hlY2tib3g6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1zYWxlcy1yZXAtbG9ja2VyLWNoZWNrYm94JylcbmlmIChzYWxlc1JlcExvY2tlckNoZWNrYm94KSB7XG4gIHNhbGVzUmVwTG9ja2VyQ2hlY2tib3guYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKCkgPT4ge1xuICAgIGNvbnN0IGZhdm9yaXRlU3RvcmVDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2FydC1zdG9yZS1jb250YWluZXInKVxuICAgIGNvbnN0IGxvY2tlclN0b3JlQ2F0ZWdvcnlJZHMgPSBKU09OLnBhcnNlKFxuICAgICAgc2FsZXNSZXBMb2NrZXJDaGVja2JveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0LWxvY2tlci1zdG9yZS1jYXRlZ29yeS1pZHMnKVxuICAgIClcblxuICAgIGNvbnN0IG9sZFN0b3JlQ2F0ZWdvcnlPcHRpb25zID0gc3RvcmVDYXRlZ29yeVNlbGVjdC5xdWVyeVNlbGVjdG9yQWxsKCdvcHRpb24nKVxuICAgIGNvbnN0IG9sZFN0b3JlT3B0aW9ucyA9IHN0b3JlU2VsZWN0LnF1ZXJ5U2VsZWN0b3JBbGwoJ29wdGlvbicpXG5cbiAgICBpZiAoc2FsZXNSZXBMb2NrZXJDaGVja2JveC5jaGVja2VkKSB7XG4gICAgICBjb25zdCBuZXdTdG9yZUNhdGVnb3J5T3B0aW9uID0gbmV3IE9wdGlvbignTG9ja2VyJywgbG9ja2VyU3RvcmVDYXRlZ29yeUlkc1sxXSwgdHJ1ZSwgdHJ1ZSlcbiAgICAgIGNvbnN0IG5ld1N0b3JlT3B0aW9uID0gbmV3IE9wdGlvbignIExvY2tlciBTdG9yZScsIGxvY2tlclN0b3JlQ2F0ZWdvcnlJZHNbMF0sIHRydWUsIHRydWUpXG4gICAgICBmYXZvcml0ZVN0b3JlQ29udGFpbmVyLmNsYXNzTGlzdC5hZGQoJ2ludmlzaWJsZScpXG4gICAgICBvbGRTdG9yZUNhdGVnb3J5T3B0aW9ucy5mb3JFYWNoKChlKSA9PiB7XG4gICAgICAgIGUuZGlzYWJsZWQgPSB0cnVlXG4gICAgICB9KVxuICAgICAgc3RvcmVTZWxlY3QuYXBwZW5kQ2hpbGQobmV3U3RvcmVPcHRpb24pXG4gICAgICBzdG9yZVNlbGVjdC52YWx1ZSA9IGxvY2tlclN0b3JlQ2F0ZWdvcnlJZHNbMF0udG9TdHJpbmcoKVxuICAgICAgc3RvcmVDYXRlZ29yeVNlbGVjdC5hcHBlbmRDaGlsZChuZXdTdG9yZUNhdGVnb3J5T3B0aW9uKVxuICAgIH0gZWxzZSB7XG4gICAgICBmYXZvcml0ZVN0b3JlQ29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ2ludmlzaWJsZScpXG4gICAgICBzdG9yZVNlbGVjdC5yZW1vdmVDaGlsZChvbGRTdG9yZU9wdGlvbnNbb2xkU3RvcmVPcHRpb25zLmxlbmd0aCAtIDFdKVxuICAgICAgc3RvcmVDYXRlZ29yeVNlbGVjdC5yZW1vdmVDaGlsZChvbGRTdG9yZUNhdGVnb3J5T3B0aW9uc1tvbGRTdG9yZUNhdGVnb3J5T3B0aW9ucy5sZW5ndGggLSAxXSlcbiAgICAgIG9sZFN0b3JlQ2F0ZWdvcnlPcHRpb25zLmZvckVhY2goKGUsIGkpID0+IHtcbiAgICAgICAgaWYgKGkgIT09IDApIHtcbiAgICAgICAgICBlLmRpc2FibGVkID0gZmFsc2VcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIHN0b3JlU2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwXG4gICAgICBzdG9yZUNhdGVnb3J5U2VsZWN0LnNlbGVjdGVkSW5kZXggPSAwXG4gICAgfVxuICB9KVxufVxuXG5jb25zdCBldmVudEJ1dHRvbnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuY2FydC1pdGVtLWV2ZW50LWJ1dHRvbicpXG5ldmVudEJ1dHRvbnMuZm9yRWFjaCgoYnRuKSA9PiB7XG4gIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICBjb25zdCBjYXJ0ID0gSlNPTi5wYXJzZShidG4uZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldC1jYXJ0JykpIGFzIElDYXJ0XG4gICAgY29uc29sZS5sb2coJ2NhcnQnLCBjYXJ0KVxuXG4gICAgbGV0IGRpdjogSFRNTERpdkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZHVjdC1ldmVudC1uYW1lJylcbiAgICBkaXYuaW5uZXJIVE1MID0gY2FydC5wcm9kdWN0Lm5hbWVcbiAgICBkaXYgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZHVjdC1ldmVudC1TS1UnKVxuICAgIGRpdi5pbm5lckhUTUwgPSBjYXJ0LnByb2R1Y3QuU0tVXG4gICAgY29uc3QgaW1nOiBIVE1MSW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2R1Y3QtZXZlbnQtaW1hZ2UnKVxuICAgIGNhcnQucHJvZHVjdC5pbWFnZS5sZW5ndGggPiAxMDBcbiAgICAgID8gKGltZy5zcmMgPSBgZGF0YTppbWFnZS9wbmc7YmFzZTY0LCAke2NhcnQucHJvZHVjdC5pbWFnZX1gKVxuICAgICAgOiAoaW1nLnNyYyA9IGRlZmF1bHRJbWFnZSlcbiAgICBsZXQgaW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcHJvZHVjdC1ldmVudC1xdWFudGl0eScpXG4gICAgaW5wdXQudmFsdWUgPSBjYXJ0LnF1YW50aXR5LnRvU3RyaW5nKClcbiAgICBpbnB1dC5taW4gPSAnMSdcbiAgICBpbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwcm9kdWN0LWV2ZW50LWNhcnQtaWQtaGlkZGVuJylcbiAgICBpbnB1dC52YWx1ZSA9IGNhcnQuaWQudG9TdHJpbmcoKVxuICAgIGlucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3Byb2R1Y3QtZXZlbnQtcHJvZHVjdC1pZCcpXG4gICAgaW5wdXQudmFsdWUgPSBjYXJ0LnByb2R1Y3QuaWQudG9TdHJpbmcoKVxuICB9KVxufSlcblxuY29uc3QgeyBEYXRlVGltZSB9ID0gZWFzZXBpY2tcbmZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZTogRGF0ZSk6IHN0cmluZyB7XG4gIGNvbnN0IHllYXIgPSBkYXRlLmdldEZ1bGxZZWFyKClcbiAgY29uc3QgbW9udGggPSAoZGF0ZS5nZXRNb250aCgpICsgMSkudG9TdHJpbmcoKVxuICBjb25zdCBkYXkgPSBkYXRlLmdldERhdGUoKS50b1N0cmluZygpXG4gIHJldHVybiBgJHt5ZWFyfS0ke21vbnRofS0ke2RheX1gXG59XG5cbmZ1bmN0aW9uIGdldEZpcnN0QW5kTGFzdERhdGUoKSB7XG4gIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKVxuICBjb25zdCBmaWZ0aERheUJlZm9yZSA9IG5ldyBEYXRlKHRvZGF5KVxuICBmaWZ0aERheUJlZm9yZS5zZXREYXRlKHRvZGF5LmdldERhdGUoKSAtIDUpXG4gIGNvbnN0IGZpZnRoRGF5QWZ0ZXIgPSBuZXcgRGF0ZSh0b2RheSlcbiAgZmlmdGhEYXlBZnRlci5zZXREYXRlKHRvZGF5LmdldERhdGUoKSArIDYpXG4gIHJldHVybiBbZm9ybWF0RGF0ZShmaWZ0aERheUJlZm9yZSksIGZvcm1hdERhdGUoZmlmdGhEYXlBZnRlcildXG59XG5cbmNvbnN0IGJvb2tlZERhdGVzID0gW2dldEZpcnN0QW5kTGFzdERhdGUoKV0ubWFwKChkKSA9PiB7XG4gIGlmIChkIGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICBjb25zdCBzdGFydCA9IG5ldyBEYXRlKGRbMF0pXG4gICAgY29uc3QgZW5kID0gbmV3IERhdGUoZFsxXSlcbiAgICByZXR1cm4gW3N0YXJ0LCBlbmRdXG4gIH1cbiAgcmV0dXJuIG5ldyBEYXRlVGltZShkLCAnWVlZWS1NTS1ERCcpXG59KVxuXG5jb25zdCBwaWNrZXIgPSBuZXcgZWFzZXBpY2suY3JlYXRlKHtcbiAgZWxlbWVudDogZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RhdGVwaWNrZXInKSxcbiAgY3NzOiBbXG4gICAgJ2h0dHBzOi8vY2RuLmpzZGVsaXZyLm5ldC9ucG0vQGVhc2VwaWNrL2J1bmRsZUAxLjIuMS9kaXN0L2luZGV4LmNzcycsXG4gICAgJ2h0dHBzOi8vZWFzZXBpY2suY29tL2Nzcy9kZW1vX2hvdGVsY2FsLmNzcycsXG4gIF0sXG4gIHBsdWdpbnM6IFsnUmFuZ2VQbHVnaW4nLCAnTG9ja1BsdWdpbiddLFxuICBSYW5nZVBsdWdpbjoge1xuICAgIHRvb2x0aXBOdW1iZXIobnVtOiBhbnkpIHtcbiAgICAgIHJldHVybiBudW0gLSAxXG4gICAgfSxcbiAgfSxcbiAgTG9ja1BsdWdpbjoge1xuICAgIG1pbkRhdGU6IG5ldyBEYXRlKCksXG4gICAgbWluRGF5czogMSxcbiAgICBpbnNlcGFyYWJsZTogdHJ1ZSxcbiAgICBmaWx0ZXIoZGF0ZTogYW55LCBwaWNrZWQ6IGFueSkge1xuICAgICAgaWYgKHBpY2tlZC5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgY29uc3QgaW5jbCA9IGRhdGUuaXNCZWZvcmUocGlja2VkWzBdKSA/ICdbKScgOiAnKF0nXG4gICAgICAgIHJldHVybiAhcGlja2VkWzBdLmlzU2FtZShkYXRlLCAnZGF5JykgJiYgZGF0ZS5pbkFycmF5KGJvb2tlZERhdGVzLCBpbmNsKVxuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGUuaW5BcnJheShib29rZWREYXRlcywgJ1spJylcbiAgICB9LFxuICB9LFxuICBzZXR1cChwaWNrZXI6IGFueSkge1xuICAgIHBpY2tlci5vbignc2VsZWN0JywgYXN5bmMgKGV2dDogYW55KSA9PiB7XG4gICAgICBjb25zdCB7IHZpZXcsIGRhdGUsIHRhcmdldCB9ID0gZXZ0LmRldGFpbFxuICAgICAgY29uc3Qgc3RhcnREYXRlID1cbiAgICAgICAgZXZ0LmRldGFpbC5zdGFydC5nZXRGdWxsWWVhcigpICsgJ18nICsgKGV2dC5kZXRhaWwuc3RhcnQuZ2V0TW9udGgoKSArIDEpICsgJ18nICsgZXZ0LmRldGFpbC5zdGFydC5nZXREYXRlKClcbiAgICAgIGNvbnN0IGVuZERhdGUgPVxuICAgICAgICBldnQuZGV0YWlsLmVuZC5nZXRGdWxsWWVhcigpICsgJ18nICsgKGV2dC5kZXRhaWwuZW5kLmdldE1vbnRoKCkgKyAxKSArICdfJyArIGV2dC5kZXRhaWwuZW5kLmdldERhdGUoKVxuXG4gICAgICBjb25zdCBhdmFpbGFibGVFdmVudFF1YW50aXR5ID0gYXdhaXQgZ2V0RXZlbnRBdmFpbGFibGVRdWFudGl0eUJ5RGF0ZShjYXJ0cywgc3RhcnREYXRlLCBlbmREYXRlKVxuXG4gICAgICBpZiAoYXZhaWxhYmxlRXZlbnRRdWFudGl0eS5sZW5ndGggIT09IDApIHtcbiAgICAgICAgY29uc3QgZXJyb3JNZXNzYWdlcyA9IGF2YWlsYWJsZUV2ZW50UXVhbnRpdHkubWFwKChlKSA9PiBlLmVycm9yKVxuICAgICAgICBhbGVydCgnTWF4aW11bSBxdWFudGl0eSBleGNlZWRlZCEnICsgJ1xcbicgKyBlcnJvck1lc3NhZ2VzLmpvaW4oJ1xcbicpKVxuICAgICAgICByZXR1cm5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1Ym1pdEJ0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJylcbiAgICAgIH1cbiAgICB9KVxuICB9LFxufSlcblxuYXN5bmMgZnVuY3Rpb24gZ2V0RXZlbnRBdmFpbGFibGVRdWFudGl0eUJ5RGF0ZShjYXJ0czogSUNhcnRJdGVtW10sIGRhdGVGcm9tOiBzdHJpbmcsIGRhdGVUbzogc3RyaW5nKSB7XG4gIGNvbnN0IHVuaXFDYXJ0cyA9IGNhcnRzLnJlZHVjZSgoYWNjQ2FydEl0ZW0sIGNhcnQpID0+IHtcbiAgICBjb25zdCBmb3VuZGVkQ2FydCA9IGFjY0NhcnRJdGVtLmZpbmQoXG4gICAgICAoY2FydEl0ZW0pID0+IGNhcnRJdGVtLnByb2R1Y3RfaWQgPT09IGNhcnQucHJvZHVjdF9pZCAmJiBjYXJ0SXRlbS5ncm91cCA9PT0gY2FydC5ncm91cFxuICAgIClcbiAgICBpZiAoZm91bmRlZENhcnQpIHtcbiAgICAgIGZvdW5kZWRDYXJ0LnF1YW50aXR5ICs9IGNhcnQucXVhbnRpdHlcbiAgICB9IGVsc2Uge1xuICAgICAgYWNjQ2FydEl0ZW0ucHVzaChjYXJ0KVxuICAgIH1cbiAgICByZXR1cm4gYWNjQ2FydEl0ZW1cbiAgfSwgW10gYXMgSUNhcnRJdGVtW10pXG5cbiAgY29uc3QgZmV0Y2hQcm9taXNlcyA9IHVuaXFDYXJ0cy5tYXAoYXN5bmMgKGNhcnQpID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgYC9ldmVudC9nZXRfYXZhaWxhYmxlX3F1YW50aXR5X2J5X2RhdGU/ZGF0ZV9mcm9tPSR7ZGF0ZUZyb219JmRhdGVfdG89JHtkYXRlVG99Jmdyb3VwX25hbWU9JHtjYXJ0Lmdyb3VwfSZwcm9kdWN0X2lkPSR7Y2FydC5wcm9kdWN0X2lkfSZxdWFudGl0eT0ke2NhcnQucXVhbnRpdHl9YFxuICAgIClcblxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgIT09IDIwMCkge1xuICAgICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxuXG4gICAgICBjb25zdCBkYXRhID0ge1xuICAgICAgICBjYXJ0SWQ6IGNhcnQuaWQsXG4gICAgICAgIGVycm9yOiBtZXNzYWdlLFxuICAgICAgICBzdGF0dXM6IGZhbHNlLFxuICAgICAgfVxuICAgICAgcmV0dXJuIGRhdGFcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIGNhcnRJZDogY2FydC5pZCxcbiAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICB9XG5cbiAgICByZXR1cm4gZGF0YVxuICB9KVxuICBjb25zdCByZXN1bHRBbGxQcm9taXNlczogSUV2ZW50Q2FydFtdID0gW11cblxuICBjb25zdCByZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGwoZmV0Y2hQcm9taXNlcylcbiAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQpID0+IHtcbiAgICBpZiAocmVzdWx0LnN0YXR1cyAhPT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHJlc3VsdEFsbFByb21pc2VzLnB1c2gocmVzdWx0KVxuICAgIH1cbiAgfSlcblxuICByZXR1cm4gcmVzdWx0QWxsUHJvbWlzZXNcbn1cbiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9ucyBmb3IgaGFybW9ueSBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSAoZXhwb3J0cywgZGVmaW5pdGlvbikgPT4ge1xuXHRmb3IodmFyIGtleSBpbiBkZWZpbml0aW9uKSB7XG5cdFx0aWYoX193ZWJwYWNrX3JlcXVpcmVfXy5vKGRlZmluaXRpb24sIGtleSkgJiYgIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBrZXkpKSB7XG5cdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywga2V5LCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZGVmaW5pdGlvbltrZXldIH0pO1xuXHRcdH1cblx0fVxufTsiLCJfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSAob2JqLCBwcm9wKSA9PiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwgcHJvcCkpIiwiLy8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yID0gKGV4cG9ydHMpID0+IHtcblx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG5cdH1cblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbn07IiwiIiwiLy8gc3RhcnR1cFxuLy8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vLyBUaGlzIGVudHJ5IG1vZHVsZSBpcyByZWZlcmVuY2VkIGJ5IG90aGVyIG1vZHVsZXMgc28gaXQgY2FuJ3QgYmUgaW5saW5lZFxudmFyIF9fd2VicGFja19leHBvcnRzX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKFwiLi9zcmMvY2FydC50c1wiKTtcbiIsIiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==